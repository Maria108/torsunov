{"ast":null,"code":"import React from 'react';\nimport PropTypes from 'prop-types';\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\nfunction unwrapExports(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\nvar wavesurfer = createCommonjsModule(function (module, exports) {\n  /*!\n   * wavesurfer.js 4.1.1 (2020-09-25)\n   * https://wavesurfer-js.org\n   * @license BSD-3-Clause\n   */\n  (function webpackUniversalModuleDefinition(root, factory) {\n    module.exports = factory();\n  })(commonjsGlobal, function () {\n    return (/******/function (modules) {\n        // webpackBootstrap\n        /******/ // The module cache\n        /******/\n        var installedModules = {};\n        /******/\n        /******/ // The require function\n        /******/\n        function __webpack_require__(moduleId) {\n          /******/\n          /******/ // Check if module is in cache\n          /******/if (installedModules[moduleId]) {\n            /******/return installedModules[moduleId].exports;\n            /******/\n          }\n          /******/ // Create a new module (and put it into the cache)\n          /******/\n          var module = installedModules[moduleId] = {\n            /******/i: moduleId,\n            /******/l: false,\n            /******/exports: {}\n            /******/\n          };\n          /******/\n          /******/ // Execute the module function\n          /******/\n          modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n          /******/\n          /******/ // Flag the module as loaded\n          /******/\n          module.l = true;\n          /******/\n          /******/ // Return the exports of the module\n          /******/\n          return module.exports;\n          /******/\n        }\n        /******/\n        /******/\n        /******/ // expose the modules object (__webpack_modules__)\n        /******/\n        __webpack_require__.m = modules;\n        /******/\n        /******/ // expose the module cache\n        /******/\n        __webpack_require__.c = installedModules;\n        /******/\n        /******/ // define getter function for harmony exports\n        /******/\n        __webpack_require__.d = function (exports, name, getter) {\n          /******/if (!__webpack_require__.o(exports, name)) {\n            /******/Object.defineProperty(exports, name, {\n              enumerable: true,\n              get: getter\n            });\n            /******/\n          }\n          /******/\n        };\n        /******/\n        /******/ // define __esModule on exports\n        /******/\n        __webpack_require__.r = function (exports) {\n          /******/if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            /******/Object.defineProperty(exports, Symbol.toStringTag, {\n              value: 'Module'\n            });\n            /******/\n          }\n          /******/\n          Object.defineProperty(exports, '__esModule', {\n            value: true\n          });\n          /******/\n        };\n        /******/\n        /******/ // create a fake namespace object\n        /******/ // mode & 1: value is a module id, require it\n        /******/ // mode & 2: merge all properties of value into the ns\n        /******/ // mode & 4: return value when already ns object\n        /******/ // mode & 8|1: behave like require\n        /******/\n        __webpack_require__.t = function (value, mode) {\n          /******/if (mode & 1) value = __webpack_require__(value);\n          /******/\n          if (mode & 8) return value;\n          /******/\n          if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n          /******/\n          var ns = Object.create(null);\n          /******/\n          __webpack_require__.r(ns);\n          /******/\n          Object.defineProperty(ns, 'default', {\n            enumerable: true,\n            value: value\n          });\n          /******/\n          if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) {\n            return value[key];\n          }.bind(null, key));\n          /******/\n          return ns;\n          /******/\n        };\n        /******/\n        /******/ // getDefaultExport function for compatibility with non-harmony modules\n        /******/\n        __webpack_require__.n = function (module) {\n          /******/var getter = module && module.__esModule ? /******/function getDefault() {\n            return module['default'];\n          } : /******/function getModuleExports() {\n            return module;\n          };\n          /******/\n          __webpack_require__.d(getter, 'a', getter);\n          /******/\n          return getter;\n          /******/\n        };\n        /******/\n        /******/ // Object.prototype.hasOwnProperty.call\n        /******/\n        __webpack_require__.o = function (object, property) {\n          return Object.prototype.hasOwnProperty.call(object, property);\n        };\n        /******/\n        /******/ // __webpack_public_path__\n        /******/\n        __webpack_require__.p = \"\";\n        /******/\n        /******/\n        /******/ // Load entry module and return exports\n        /******/\n        return __webpack_require__(__webpack_require__.s = \"./src/wavesurfer.js\");\n        /******/\n      }\n      /************************************************************************/\n      /******/({\n        /***/\"./node_modules/debounce/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/debounce/index.js ***!\n          \\****************************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports) {\n          /**\n           * Returns a function, that, as long as it continues to be invoked, will not\n           * be triggered. The function will be called after it stops being called for\n           * N milliseconds. If `immediate` is passed, trigger the function on the\n           * leading edge, instead of the trailing. The function also has a property 'clear' \n           * that is a function which will clear the timer to prevent previously scheduled executions. \n           *\n           * @source underscore.js\n           * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n           * @param {Function} function to wrap\n           * @param {Number} timeout in ms (`100`)\n           * @param {Boolean} whether to execute at the beginning (`false`)\n           * @api public\n           */\n          function debounce(func, wait, immediate) {\n            var timeout, args, context, timestamp, result;\n            if (null == wait) wait = 100;\n            function later() {\n              var last = Date.now() - timestamp;\n              if (last < wait && last >= 0) {\n                timeout = setTimeout(later, wait - last);\n              } else {\n                timeout = null;\n                if (!immediate) {\n                  result = func.apply(context, args);\n                  context = args = null;\n                }\n              }\n            }\n            var debounced = function () {\n              context = this;\n              args = arguments;\n              timestamp = Date.now();\n              var callNow = immediate && !timeout;\n              if (!timeout) timeout = setTimeout(later, wait);\n              if (callNow) {\n                result = func.apply(context, args);\n                context = args = null;\n              }\n              return result;\n            };\n            debounced.clear = function () {\n              if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n              }\n            };\n            debounced.flush = function () {\n              if (timeout) {\n                result = func.apply(context, args);\n                context = args = null;\n                clearTimeout(timeout);\n                timeout = null;\n              }\n            };\n            return debounced;\n          }\n          // Adds compatibility for ES modules\n          debounce.debounce = debounce;\n          module.exports = debounce;\n\n          /***/\n        },\n\n        /***/\"./src/drawer.canvasentry.js\":\n        /*!***********************************!*\\\n          !*** ./src/drawer.canvasentry.js ***!\n          \\***********************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var _style = _interopRequireDefault(__webpack_require__( /*! ./util/style */\"./src/util/style.js\"));\n          var _getId = _interopRequireDefault(__webpack_require__( /*! ./util/get-id */\"./src/util/get-id.js\"));\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          /**\n           * The `CanvasEntry` class represents an element consisting of a wave `canvas`\n           * and an (optional) progress wave `canvas`.\n           *\n           * The `MultiCanvas` renderer uses one or more `CanvasEntry` instances to\n           * render a waveform, depending on the zoom level.\n           */\n          var CanvasEntry = /*#__PURE__*/function () {\n            function CanvasEntry() {\n              _classCallCheck(this, CanvasEntry);\n\n              /**\n               * The wave node\n               *\n               * @type {HTMLCanvasElement}\n               */\n              this.wave = null;\n              /**\n               * The wave canvas rendering context\n               *\n               * @type {CanvasRenderingContext2D}\n               */\n\n              this.waveCtx = null;\n              /**\n               * The (optional) progress wave node\n               *\n               * @type {HTMLCanvasElement}\n               */\n\n              this.progress = null;\n              /**\n               * The (optional) progress wave canvas rendering context\n               *\n               * @type {CanvasRenderingContext2D}\n               */\n\n              this.progressCtx = null;\n              /**\n               * Start of the area the canvas should render, between 0 and 1\n               *\n               * @type {number}\n               */\n\n              this.start = 0;\n              /**\n               * End of the area the canvas should render, between 0 and 1\n               *\n               * @type {number}\n               */\n\n              this.end = 1;\n              /**\n               * Unique identifier for this entry\n               *\n               * @type {string}\n               */\n\n              this.id = (0, _getId.default)(typeof this.constructor.name !== 'undefined' ? this.constructor.name.toLowerCase() + '_' : 'canvasentry_');\n              /**\n               * Canvas 2d context attributes\n               *\n               * @type {object}\n               */\n\n              this.canvasContextAttributes = {};\n            }\n            /**\n             * Store the wave canvas element and create the 2D rendering context\n             *\n             * @param {HTMLCanvasElement} element The wave `canvas` element.\n             */\n\n            _createClass(CanvasEntry, [{\n              key: \"initWave\",\n              value: function initWave(element) {\n                this.wave = element;\n                this.waveCtx = this.wave.getContext('2d', this.canvasContextAttributes);\n              }\n              /**\n               * Store the progress wave canvas element and create the 2D rendering\n               * context\n               *\n               * @param {HTMLCanvasElement} element The progress wave `canvas` element.\n               */\n            }, {\n              key: \"initProgress\",\n              value: function initProgress(element) {\n                this.progress = element;\n                this.progressCtx = this.progress.getContext('2d', this.canvasContextAttributes);\n              }\n              /**\n               * Update the dimensions\n               *\n               * @param {number} elementWidth Width of the entry\n               * @param {number} totalWidth Total width of the multi canvas renderer\n               * @param {number} width The new width of the element\n               * @param {number} height The new height of the element\n               */\n            }, {\n              key: \"updateDimensions\",\n              value: function updateDimensions(elementWidth, totalWidth, width, height) {\n                // where the canvas starts and ends in the waveform, represented as a\n                // decimal between 0 and 1\n                this.start = this.wave.offsetLeft / totalWidth || 0;\n                this.end = this.start + elementWidth / totalWidth; // set wave canvas dimensions\n\n                this.wave.width = width;\n                this.wave.height = height;\n                var elementSize = {\n                  width: elementWidth + 'px'\n                };\n                (0, _style.default)(this.wave, elementSize);\n                if (this.hasProgressCanvas) {\n                  // set progress canvas dimensions\n                  this.progress.width = width;\n                  this.progress.height = height;\n                  (0, _style.default)(this.progress, elementSize);\n                }\n              }\n              /**\n               * Clear the wave and progress rendering contexts\n               */\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {\n                // wave\n                this.waveCtx.clearRect(0, 0, this.waveCtx.canvas.width, this.waveCtx.canvas.height); // progress\n\n                if (this.hasProgressCanvas) {\n                  this.progressCtx.clearRect(0, 0, this.progressCtx.canvas.width, this.progressCtx.canvas.height);\n                }\n              }\n              /**\n               * Set the fill styles for wave and progress\n               *\n               * @param {string} waveColor Fill color for the wave canvas\n               * @param {?string} progressColor Fill color for the progress canvas\n               */\n            }, {\n              key: \"setFillStyles\",\n              value: function setFillStyles(waveColor, progressColor) {\n                this.waveCtx.fillStyle = waveColor;\n                if (this.hasProgressCanvas) {\n                  this.progressCtx.fillStyle = progressColor;\n                }\n              }\n              /**\n               * Draw a rectangle for wave and progress\n               *\n               * @param {number} x X start position\n               * @param {number} y Y start position\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n            }, {\n              key: \"fillRects\",\n              value: function fillRects(x, y, width, height, radius) {\n                this.fillRectToContext(this.waveCtx, x, y, width, height, radius);\n                if (this.hasProgressCanvas) {\n                  this.fillRectToContext(this.progressCtx, x, y, width, height, radius);\n                }\n              }\n              /**\n               * Draw the actual rectangle on a `canvas` element\n               *\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {number} x X start position\n               * @param {number} y Y start position\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n            }, {\n              key: \"fillRectToContext\",\n              value: function fillRectToContext(ctx, x, y, width, height, radius) {\n                if (!ctx) {\n                  return;\n                }\n                if (radius) {\n                  this.drawRoundedRect(ctx, x, y, width, height, radius);\n                } else {\n                  ctx.fillRect(x, y, width, height);\n                }\n              }\n              /**\n               * Draw a rounded rectangle on Canvas\n               *\n               * @param {CanvasRenderingContext2D} ctx Canvas context\n               * @param {number} x X-position of the rectangle\n               * @param {number} y Y-position of the rectangle\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               *\n               * @return {void}\n               * @example drawRoundedRect(ctx, 50, 50, 5, 10, 3)\n               */\n            }, {\n              key: \"drawRoundedRect\",\n              value: function drawRoundedRect(ctx, x, y, width, height, radius) {\n                if (height === 0) {\n                  return;\n                } // peaks are float values from -1 to 1. Use absolute height values in\n                // order to correctly calculate rounded rectangle coordinates\n\n                if (height < 0) {\n                  height *= -1;\n                  y -= height;\n                }\n                ctx.beginPath();\n                ctx.moveTo(x + radius, y);\n                ctx.lineTo(x + width - radius, y);\n                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n                ctx.lineTo(x + width, y + height - radius);\n                ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n                ctx.lineTo(x + radius, y + height);\n                ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n                ctx.lineTo(x, y + radius);\n                ctx.quadraticCurveTo(x, y, x + radius, y);\n                ctx.closePath();\n                ctx.fill();\n              }\n              /**\n               * Render the actual wave and progress lines\n               *\n               * @param {number[]} peaks Array with peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               */\n            }, {\n              key: \"drawLines\",\n              value: function drawLines(peaks, absmax, halfH, offsetY, start, end) {\n                this.drawLineToContext(this.waveCtx, peaks, absmax, halfH, offsetY, start, end);\n                if (this.hasProgressCanvas) {\n                  this.drawLineToContext(this.progressCtx, peaks, absmax, halfH, offsetY, start, end);\n                }\n              }\n              /**\n               * Render the actual waveform line on a `canvas` element\n               *\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {number[]} peaks Array with peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               */\n            }, {\n              key: \"drawLineToContext\",\n              value: function drawLineToContext(ctx, peaks, absmax, halfH, offsetY, start, end) {\n                if (!ctx) {\n                  return;\n                }\n                var length = peaks.length / 2;\n                var first = Math.round(length * this.start); // use one more peak value to make sure we join peaks at ends -- unless,\n                // of course, this is the last canvas\n\n                var last = Math.round(length * this.end) + 1;\n                var canvasStart = first;\n                var canvasEnd = last;\n                var scale = this.wave.width / (canvasEnd - canvasStart - 1); // optimization\n\n                var halfOffset = halfH + offsetY;\n                var absmaxHalf = absmax / halfH;\n                ctx.beginPath();\n                ctx.moveTo((canvasStart - first) * scale, halfOffset);\n                ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart] || 0) / absmaxHalf));\n                var i, peak, h;\n                for (i = canvasStart; i < canvasEnd; i++) {\n                  peak = peaks[2 * i] || 0;\n                  h = Math.round(peak / absmaxHalf);\n                  ctx.lineTo((i - first) * scale + this.halfPixel, halfOffset - h);\n                } // draw the bottom edge going backwards, to make a single\n                // closed hull to fill\n\n                var j = canvasEnd - 1;\n                for (j; j >= canvasStart; j--) {\n                  peak = peaks[2 * j + 1] || 0;\n                  h = Math.round(peak / absmaxHalf);\n                  ctx.lineTo((j - first) * scale + this.halfPixel, halfOffset - h);\n                }\n                ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart + 1] || 0) / absmaxHalf));\n                ctx.closePath();\n                ctx.fill();\n              }\n              /**\n               * Destroys this entry\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.waveCtx = null;\n                this.wave = null;\n                this.progressCtx = null;\n                this.progress = null;\n              }\n              /**\n               * Return image data of the wave `canvas` element\n               *\n               * When using a `type` of `'blob'`, this will return a `Promise` that\n               * resolves with a `Blob` instance.\n               *\n               * @param {string} format='image/png' An optional value of a format type.\n               * @param {number} quality=0.92 An optional value between 0 and 1.\n               * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n               * @return {string|Promise} When using the default `'dataURL'` `type` this\n               * returns a data URL. When using the `'blob'` `type` this returns a\n               * `Promise` that resolves with a `Blob` instance.\n               */\n            }, {\n              key: \"getImage\",\n              value: function getImage(format, quality, type) {\n                var _this = this;\n                if (type === 'blob') {\n                  return new Promise(function (resolve) {\n                    _this.wave.toBlob(resolve, format, quality);\n                  });\n                } else if (type === 'dataURL') {\n                  return this.wave.toDataURL(format, quality);\n                }\n              }\n            }]);\n            return CanvasEntry;\n          }();\n          exports.default = CanvasEntry;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/drawer.js\":\n        /*!***********************!*\\\n          !*** ./src/drawer.js ***!\n          \\***********************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var util = _interopRequireWildcard(__webpack_require__( /*! ./util */\"./src/util/index.js\"));\n          function _getRequireWildcardCache() {\n            if (typeof WeakMap !== \"function\") return null;\n            var cache = new WeakMap();\n            _getRequireWildcardCache = function _getRequireWildcardCache() {\n              return cache;\n            };\n            return cache;\n          }\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            }\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n            var cache = _getRequireWildcardCache();\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n            for (var key in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n            newObj.default = obj;\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n            return newObj;\n          }\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n            return _typeof(obj);\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n            return _setPrototypeOf(o, p);\n          }\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                result;\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n            return _assertThisInitialized(self);\n          }\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n            return self;\n          }\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n            try {\n              Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          /**\n           * Parent class for renderers\n           *\n           * @extends {Observer}\n           */\n          var Drawer = /*#__PURE__*/function (_util$Observer) {\n            _inherits(Drawer, _util$Observer);\n            var _super = _createSuper(Drawer);\n\n            /**\n             * @param {HTMLElement} container The container node of the wavesurfer instance\n             * @param {WavesurferParams} params The wavesurfer initialisation options\n             */\n            function Drawer(container, params) {\n              var _this;\n              _classCallCheck(this, Drawer);\n              _this = _super.call(this);\n              _this.container = container;\n              /**\n               * @type {WavesurferParams}\n               */\n\n              _this.params = params;\n              /**\n               * The width of the renderer\n               * @type {number}\n               */\n\n              _this.width = 0;\n              /**\n               * The height of the renderer\n               * @type {number}\n               */\n\n              _this.height = params.height * _this.params.pixelRatio;\n              _this.lastPos = 0;\n              /**\n               * The `<wave>` element which is added to the container\n               * @type {HTMLElement}\n               */\n\n              _this.wrapper = null;\n              return _this;\n            }\n            /**\n             * Alias of `util.style`\n             *\n             * @param {HTMLElement} el The element that the styles will be applied to\n             * @param {Object} styles The map of propName: attribute, both are used as-is\n             * @return {HTMLElement} el\n             */\n\n            _createClass(Drawer, [{\n              key: \"style\",\n              value: function style(el, styles) {\n                return util.style(el, styles);\n              }\n              /**\n               * Create the wrapper `<wave>` element, style it and set up the events for\n               * interaction\n               */\n            }, {\n              key: \"createWrapper\",\n              value: function createWrapper() {\n                this.wrapper = this.container.appendChild(document.createElement('wave'));\n                this.style(this.wrapper, {\n                  display: 'block',\n                  position: 'relative',\n                  userSelect: 'none',\n                  webkitUserSelect: 'none',\n                  height: this.params.height + 'px'\n                });\n                if (this.params.fillParent || this.params.scrollParent) {\n                  this.style(this.wrapper, {\n                    width: '100%',\n                    overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',\n                    overflowY: 'hidden'\n                  });\n                }\n                this.setupWrapperEvents();\n              }\n              /**\n               * Handle click event\n               *\n               * @param {Event} e Click event\n               * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`\n               * @return {number} Playback position from 0 to 1\n               */\n            }, {\n              key: \"handleEvent\",\n              value: function handleEvent(e, noPrevent) {\n                !noPrevent && e.preventDefault();\n                var clientX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX;\n                var bbox = this.wrapper.getBoundingClientRect();\n                var nominalWidth = this.width;\n                var parentWidth = this.getWidth();\n                var progress;\n                if (!this.params.fillParent && nominalWidth < parentWidth) {\n                  progress = (this.params.rtl ? bbox.right - clientX : clientX - bbox.left) * (this.params.pixelRatio / nominalWidth) || 0;\n                } else {\n                  progress = ((this.params.rtl ? bbox.right - clientX : clientX - bbox.left) + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;\n                }\n                return util.clamp(progress, 0, 1);\n              }\n            }, {\n              key: \"setupWrapperEvents\",\n              value: function setupWrapperEvents() {\n                var _this2 = this;\n                this.wrapper.addEventListener('click', function (e) {\n                  var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;\n                  if (scrollbarHeight !== 0) {\n                    // scrollbar is visible.  Check if click was on it\n                    var bbox = _this2.wrapper.getBoundingClientRect();\n                    if (e.clientY >= bbox.bottom - scrollbarHeight) {\n                      // ignore mousedown as it was on the scrollbar\n                      return;\n                    }\n                  }\n                  if (_this2.params.interact) {\n                    _this2.fireEvent('click', e, _this2.handleEvent(e));\n                  }\n                });\n                this.wrapper.addEventListener('dblclick', function (e) {\n                  if (_this2.params.interact) {\n                    _this2.fireEvent('dblclick', e, _this2.handleEvent(e));\n                  }\n                });\n                this.wrapper.addEventListener('scroll', function (e) {\n                  return _this2.fireEvent('scroll', e);\n                });\n              }\n              /**\n               * Draw peaks on the canvas\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} length The width of the area that should be drawn\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n            }, {\n              key: \"drawPeaks\",\n              value: function drawPeaks(peaks, length, start, end) {\n                if (!this.setWidth(length)) {\n                  this.clearWave();\n                }\n                this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);\n              }\n              /**\n               * Scroll to the beginning\n               */\n            }, {\n              key: \"resetScroll\",\n              value: function resetScroll() {\n                if (this.wrapper !== null) {\n                  this.wrapper.scrollLeft = 0;\n                }\n              }\n              /**\n               * Recenter the view-port at a certain percent of the waveform\n               *\n               * @param {number} percent Value from 0 to 1 on the waveform\n               */\n            }, {\n              key: \"recenter\",\n              value: function recenter(percent) {\n                var position = this.wrapper.scrollWidth * percent;\n                this.recenterOnPosition(position, true);\n              }\n              /**\n               * Recenter the view-port on a position, either scroll there immediately or\n               * in steps of 5 pixels\n               *\n               * @param {number} position X-offset in pixels\n               * @param {boolean} immediate Set to true to immediately scroll somewhere\n               */\n            }, {\n              key: \"recenterOnPosition\",\n              value: function recenterOnPosition(position, immediate) {\n                var scrollLeft = this.wrapper.scrollLeft;\n                var half = ~~(this.wrapper.clientWidth / 2);\n                var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n                var target = position - half;\n                var offset = target - scrollLeft;\n                if (maxScroll == 0) {\n                  // no need to continue if scrollbar is not there\n                  return;\n                } // if the cursor is currently visible...\n\n                if (!immediate && -half <= offset && offset < half) {\n                  // set rate at which waveform is centered\n                  var rate = this.params.autoCenterRate; // make rate depend on width of view and length of waveform\n\n                  rate /= half;\n                  rate *= maxScroll;\n                  offset = Math.max(-rate, Math.min(rate, offset));\n                  target = scrollLeft + offset;\n                } // limit target to valid range (0 to maxScroll)\n\n                target = Math.max(0, Math.min(maxScroll, target)); // no use attempting to scroll if we're not moving\n\n                if (target != scrollLeft) {\n                  this.wrapper.scrollLeft = target;\n                }\n              }\n              /**\n               * Get the current scroll position in pixels\n               *\n               * @return {number} Horizontal scroll position in pixels\n               */\n            }, {\n              key: \"getScrollX\",\n              value: function getScrollX() {\n                var x = 0;\n                if (this.wrapper) {\n                  var pixelRatio = this.params.pixelRatio;\n                  x = Math.round(this.wrapper.scrollLeft * pixelRatio); // In cases of elastic scroll (safari with mouse wheel) you can\n                  // scroll beyond the limits of the container\n                  // Calculate and floor the scrollable extent to make sure an out\n                  // of bounds value is not returned\n                  // Ticket #1312\n\n                  if (this.params.scrollParent) {\n                    var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());\n                    x = Math.min(maxScroll, Math.max(0, x));\n                  }\n                }\n                return x;\n              }\n              /**\n               * Get the width of the container\n               *\n               * @return {number} The width of the container\n               */\n            }, {\n              key: \"getWidth\",\n              value: function getWidth() {\n                return Math.round(this.container.clientWidth * this.params.pixelRatio);\n              }\n              /**\n               * Set the width of the container\n               *\n               * @param {number} width The new width of the container\n               * @return {boolean} Whether the width of the container was updated or not\n               */\n            }, {\n              key: \"setWidth\",\n              value: function setWidth(width) {\n                if (this.width == width) {\n                  return false;\n                }\n                this.width = width;\n                if (this.params.fillParent || this.params.scrollParent) {\n                  this.style(this.wrapper, {\n                    width: ''\n                  });\n                } else {\n                  this.style(this.wrapper, {\n                    width: ~~(this.width / this.params.pixelRatio) + 'px'\n                  });\n                }\n                this.updateSize();\n                return true;\n              }\n              /**\n               * Set the height of the container\n               *\n               * @param {number} height The new height of the container.\n               * @return {boolean} Whether the height of the container was updated or not\n               */\n            }, {\n              key: \"setHeight\",\n              value: function setHeight(height) {\n                if (height == this.height) {\n                  return false;\n                }\n                this.height = height;\n                this.style(this.wrapper, {\n                  height: ~~(this.height / this.params.pixelRatio) + 'px'\n                });\n                this.updateSize();\n                return true;\n              }\n              /**\n               * Called by wavesurfer when progress should be rendered\n               *\n               * @param {number} progress From 0 to 1\n               */\n            }, {\n              key: \"progress\",\n              value: function progress(_progress) {\n                var minPxDelta = 1 / this.params.pixelRatio;\n                var pos = Math.round(_progress * this.width) * minPxDelta;\n                if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n                  this.lastPos = pos;\n                  if (this.params.scrollParent && this.params.autoCenter) {\n                    var newPos = ~~(this.wrapper.scrollWidth * _progress);\n                    this.recenterOnPosition(newPos, this.params.autoCenterImmediately);\n                  }\n                  this.updateProgress(pos);\n                }\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.unAll();\n                if (this.wrapper) {\n                  if (this.wrapper.parentNode == this.container) {\n                    this.container.removeChild(this.wrapper);\n                  }\n                  this.wrapper = null;\n                }\n              }\n              /* Renderer-specific methods */\n\n              /**\n               * Called after cursor related params have changed.\n               *\n               * @abstract\n               */\n            }, {\n              key: \"updateCursor\",\n              value: function updateCursor() {}\n              /**\n               * Called when the size of the container changes so the renderer can adjust\n               *\n               * @abstract\n               */\n            }, {\n              key: \"updateSize\",\n              value: function updateSize() {}\n              /**\n               * Draw a waveform with bars\n               *\n               * @abstract\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n               * rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n            }, {\n              key: \"drawBars\",\n              value: function drawBars(peaks, channelIndex, start, end) {}\n              /**\n               * Draw a waveform\n               *\n               * @abstract\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n               * rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n            }, {\n              key: \"drawWave\",\n              value: function drawWave(peaks, channelIndex, start, end) {}\n              /**\n               * Clear the waveform\n               *\n               * @abstract\n               */\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {}\n              /**\n               * Render the new progress\n               *\n               * @abstract\n               * @param {number} position X-Offset of progress position in pixels\n               */\n            }, {\n              key: \"updateProgress\",\n              value: function updateProgress(position) {}\n            }]);\n            return Drawer;\n          }(util.Observer);\n          exports.default = Drawer;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/drawer.multicanvas.js\":\n        /*!***********************************!*\\\n          !*** ./src/drawer.multicanvas.js ***!\n          \\***********************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var _drawer = _interopRequireDefault(__webpack_require__( /*! ./drawer */\"./src/drawer.js\"));\n          var util = _interopRequireWildcard(__webpack_require__( /*! ./util */\"./src/util/index.js\"));\n          var _drawer2 = _interopRequireDefault(__webpack_require__( /*! ./drawer.canvasentry */\"./src/drawer.canvasentry.js\"));\n          function _getRequireWildcardCache() {\n            if (typeof WeakMap !== \"function\") return null;\n            var cache = new WeakMap();\n            _getRequireWildcardCache = function _getRequireWildcardCache() {\n              return cache;\n            };\n            return cache;\n          }\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            }\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n            var cache = _getRequireWildcardCache();\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n            for (var key in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n            newObj.default = obj;\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n            return newObj;\n          }\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n            return _typeof(obj);\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n            return _setPrototypeOf(o, p);\n          }\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                result;\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n            return _assertThisInitialized(self);\n          }\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n            return self;\n          }\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n            try {\n              Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          /**\n           * MultiCanvas renderer for wavesurfer. Is currently the default and sole\n           * builtin renderer.\n           *\n           * A `MultiCanvas` consists of one or more `CanvasEntry` instances, depending\n           * on the zoom level.\n           */\n          var MultiCanvas = /*#__PURE__*/function (_Drawer) {\n            _inherits(MultiCanvas, _Drawer);\n            var _super = _createSuper(MultiCanvas);\n\n            /**\n             * @param {HTMLElement} container The container node of the wavesurfer instance\n             * @param {WavesurferParams} params The wavesurfer initialisation options\n             */\n            function MultiCanvas(container, params) {\n              var _this;\n              _classCallCheck(this, MultiCanvas);\n              _this = _super.call(this, container, params);\n              /**\n               * @type {number}\n               */\n\n              _this.maxCanvasWidth = params.maxCanvasWidth;\n              /**\n               * @type {number}\n               */\n\n              _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);\n              /**\n               * Whether or not the progress wave is rendered. If the `waveColor`\n               * and `progressColor` are the same color it is not.\n               *\n               * @type {boolean}\n               */\n\n              _this.hasProgressCanvas = params.waveColor != params.progressColor;\n              /**\n               * @type {number}\n               */\n\n              _this.halfPixel = 0.5 / params.pixelRatio;\n              /**\n               * List of `CanvasEntry` instances.\n               *\n               * @type {Array}\n               */\n\n              _this.canvases = [];\n              /**\n               * @type {HTMLElement}\n               */\n\n              _this.progressWave = null;\n              /**\n               * Class used to generate entries.\n               *\n               * @type {function}\n               */\n\n              _this.EntryClass = _drawer2.default;\n              /**\n               * Canvas 2d context attributes.\n               *\n               * @type {object}\n               */\n\n              _this.canvasContextAttributes = params.drawingContextAttributes;\n              /**\n               * Overlap added between entries to prevent vertical white stripes\n               * between `canvas` elements.\n               *\n               * @type {number}\n               */\n\n              _this.overlap = 2 * Math.ceil(params.pixelRatio / 2);\n              /**\n               * The radius of the wave bars. Makes bars rounded\n               *\n               * @type {number}\n               */\n\n              _this.barRadius = params.barRadius || 0;\n              return _this;\n            }\n            /**\n             * Initialize the drawer\n             */\n\n            _createClass(MultiCanvas, [{\n              key: \"init\",\n              value: function init() {\n                this.createWrapper();\n                this.createElements();\n              }\n              /**\n               * Create the canvas elements and style them\n               *\n               */\n            }, {\n              key: \"createElements\",\n              value: function createElements() {\n                this.progressWave = this.wrapper.appendChild(this.style(document.createElement('wave'), {\n                  position: 'absolute',\n                  zIndex: 3,\n                  left: 0,\n                  top: 0,\n                  bottom: 0,\n                  overflow: 'hidden',\n                  width: '0',\n                  display: 'none',\n                  boxSizing: 'border-box',\n                  borderRightStyle: 'solid',\n                  pointerEvents: 'none'\n                }));\n                this.addCanvas();\n                this.updateCursor();\n              }\n              /**\n               * Update cursor style\n               */\n            }, {\n              key: \"updateCursor\",\n              value: function updateCursor() {\n                this.style(this.progressWave, {\n                  borderRightWidth: this.params.cursorWidth + 'px',\n                  borderRightColor: this.params.cursorColor\n                });\n              }\n              /**\n               * Adjust to the updated size by adding or removing canvases\n               */\n            }, {\n              key: \"updateSize\",\n              value: function updateSize() {\n                var _this2 = this;\n                var totalWidth = Math.round(this.width / this.params.pixelRatio);\n                var requiredCanvases = Math.ceil(totalWidth / (this.maxCanvasElementWidth + this.overlap)); // add required canvases\n\n                while (this.canvases.length < requiredCanvases) {\n                  this.addCanvas();\n                } // remove older existing canvases, if any\n\n                while (this.canvases.length > requiredCanvases) {\n                  this.removeCanvas();\n                }\n                var canvasWidth = this.maxCanvasWidth + this.overlap;\n                var lastCanvas = this.canvases.length - 1;\n                this.canvases.forEach(function (entry, i) {\n                  if (i == lastCanvas) {\n                    canvasWidth = _this2.width - _this2.maxCanvasWidth * lastCanvas;\n                  }\n                  _this2.updateDimensions(entry, canvasWidth, _this2.height);\n                  entry.clearWave();\n                });\n              }\n              /**\n               * Add a canvas to the canvas list\n               *\n               */\n            }, {\n              key: \"addCanvas\",\n              value: function addCanvas() {\n                var entry = new this.EntryClass();\n                entry.canvasContextAttributes = this.canvasContextAttributes;\n                entry.hasProgressCanvas = this.hasProgressCanvas;\n                entry.halfPixel = this.halfPixel;\n                var leftOffset = this.maxCanvasElementWidth * this.canvases.length; // wave\n\n                entry.initWave(this.wrapper.appendChild(this.style(document.createElement('canvas'), {\n                  position: 'absolute',\n                  zIndex: 2,\n                  left: leftOffset + 'px',\n                  top: 0,\n                  bottom: 0,\n                  height: '100%',\n                  pointerEvents: 'none'\n                }))); // progress\n\n                if (this.hasProgressCanvas) {\n                  entry.initProgress(this.progressWave.appendChild(this.style(document.createElement('canvas'), {\n                    position: 'absolute',\n                    left: leftOffset + 'px',\n                    top: 0,\n                    bottom: 0,\n                    height: '100%'\n                  })));\n                }\n                this.canvases.push(entry);\n              }\n              /**\n               * Pop single canvas from the list\n               *\n               */\n            }, {\n              key: \"removeCanvas\",\n              value: function removeCanvas() {\n                var lastEntry = this.canvases[this.canvases.length - 1]; // wave\n\n                lastEntry.wave.parentElement.removeChild(lastEntry.wave); // progress\n\n                if (this.hasProgressCanvas) {\n                  lastEntry.progress.parentElement.removeChild(lastEntry.progress);\n                } // cleanup\n\n                if (lastEntry) {\n                  lastEntry.destroy();\n                  lastEntry = null;\n                }\n                this.canvases.pop();\n              }\n              /**\n               * Update the dimensions of a canvas element\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {number} width The new width of the element\n               * @param {number} height The new height of the element\n               */\n            }, {\n              key: \"updateDimensions\",\n              value: function updateDimensions(entry, width, height) {\n                var elementWidth = Math.round(width / this.params.pixelRatio);\n                var totalWidth = Math.round(this.width / this.params.pixelRatio); // update canvas dimensions\n\n                entry.updateDimensions(elementWidth, totalWidth, width, height); // style element\n\n                this.style(this.progressWave, {\n                  display: 'block'\n                });\n              }\n              /**\n               * Clear the whole multi-canvas\n               */\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {\n                var _this3 = this;\n                util.frame(function () {\n                  _this3.canvases.forEach(function (entry) {\n                    return entry.clearWave();\n                  });\n                })();\n              }\n              /**\n               * Draw a waveform with bars\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0. Must be an integer.\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               * @returns {void}\n               */\n            }, {\n              key: \"drawBars\",\n              value: function drawBars(peaks, channelIndex, start, end) {\n                var _this4 = this;\n                return this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {\n                  var absmax = _ref.absmax,\n                    hasMinVals = _ref.hasMinVals,\n                    height = _ref.height,\n                    offsetY = _ref.offsetY,\n                    halfH = _ref.halfH,\n                    peaks = _ref.peaks;\n\n                  // if drawBars was called within ws.empty we don't pass a start and\n                  // don't want anything to happen\n                  if (start === undefined) {\n                    return;\n                  } // Skip every other value if there are negatives.\n\n                  var peakIndexScale = hasMinVals ? 2 : 1;\n                  var length = peaks.length / peakIndexScale;\n                  var bar = _this4.params.barWidth * _this4.params.pixelRatio;\n                  var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);\n                  var step = bar + gap;\n                  var scale = length / _this4.width;\n                  var first = start;\n                  var last = end;\n                  var i = first;\n                  for (i; i < last; i += step) {\n                    var peak = peaks[Math.floor(i * scale * peakIndexScale)] || 0;\n                    var h = Math.round(peak / absmax * halfH);\n                    /* in case of silences, allow the user to specify that we\n                     * always draw *something* (normally a 1px high bar) */\n\n                    if (h == 0 && _this4.params.barMinHeight) h = _this4.params.barMinHeight;\n                    _this4.fillRect(i + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2, _this4.barRadius);\n                  }\n                });\n              }\n              /**\n               * Draw a waveform\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number?} start The x-offset of the beginning of the area that\n               * should be rendered (If this isn't set only a flat line is rendered)\n               * @param {number?} end The x-offset of the end of the area that should be\n               * rendered\n               * @returns {void}\n               */\n            }, {\n              key: \"drawWave\",\n              value: function drawWave(peaks, channelIndex, start, end) {\n                var _this5 = this;\n                return this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {\n                  var absmax = _ref2.absmax,\n                    hasMinVals = _ref2.hasMinVals,\n                    height = _ref2.height,\n                    offsetY = _ref2.offsetY,\n                    halfH = _ref2.halfH,\n                    peaks = _ref2.peaks,\n                    channelIndex = _ref2.channelIndex;\n                  if (!hasMinVals) {\n                    var reflectedPeaks = [];\n                    var len = peaks.length;\n                    var i = 0;\n                    for (i; i < len; i++) {\n                      reflectedPeaks[2 * i] = peaks[i];\n                      reflectedPeaks[2 * i + 1] = -peaks[i];\n                    }\n                    peaks = reflectedPeaks;\n                  } // if drawWave was called within ws.empty we don't pass a start and\n                  // end and simply want a flat line\n\n                  if (start !== undefined) {\n                    _this5.drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex);\n                  } // always draw a median line\n\n                  _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel, _this5.barRadius);\n                });\n              }\n              /**\n               * Tell the canvas entries to render their portion of the waveform\n               *\n               * @param {number[]} peaks Peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               * @param {channelIndex} channelIndex The channel index of the line drawn\n               */\n            }, {\n              key: \"drawLine\",\n              value: function drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex) {\n                var _this6 = this;\n                var _ref3 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n                  waveColor = _ref3.waveColor,\n                  progressColor = _ref3.progressColor;\n                this.canvases.forEach(function (entry, i) {\n                  _this6.setFillStyles(entry, waveColor, progressColor);\n                  entry.drawLines(peaks, absmax, halfH, offsetY, start, end);\n                });\n              }\n              /**\n               * Draw a rectangle on the multi-canvas\n               *\n               * @param {number} x X-position of the rectangle\n               * @param {number} y Y-position of the rectangle\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n            }, {\n              key: \"fillRect\",\n              value: function fillRect(x, y, width, height, radius) {\n                var startCanvas = Math.floor(x / this.maxCanvasWidth);\n                var endCanvas = Math.min(Math.ceil((x + width) / this.maxCanvasWidth) + 1, this.canvases.length);\n                var i = startCanvas;\n                for (i; i < endCanvas; i++) {\n                  var entry = this.canvases[i];\n                  var leftOffset = i * this.maxCanvasWidth;\n                  var intersection = {\n                    x1: Math.max(x, i * this.maxCanvasWidth),\n                    y1: y,\n                    x2: Math.min(x + width, i * this.maxCanvasWidth + entry.wave.width),\n                    y2: y + height\n                  };\n                  if (intersection.x1 < intersection.x2) {\n                    this.setFillStyles(entry);\n                    entry.fillRects(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1, radius);\n                  }\n                }\n              }\n              /**\n               * Returns whether to hide the channel from being drawn based on params.\n               *\n               * @param {number} channelIndex The index of the current channel.\n               * @returns {bool} True to hide the channel, false to draw.\n               */\n            }, {\n              key: \"hideChannel\",\n              value: function hideChannel(channelIndex) {\n                return this.params.splitChannels && this.params.splitChannelsOptions.filterChannels.includes(channelIndex);\n              }\n              /**\n               * Performs preparation tasks and calculations which are shared by `drawBars`\n               * and `drawWave`\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for\n               * split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number?} start The x-offset of the beginning of the area that\n               * should be rendered. If this isn't set only a flat line is rendered\n               * @param {number?} end The x-offset of the end of the area that should be\n               * rendered\n               * @param {function} fn The render function to call, e.g. `drawWave`\n               * @param {number} drawIndex The index of the current channel after filtering.\n               * @returns {void}\n               */\n            }, {\n              key: \"prepareDraw\",\n              value: function prepareDraw(peaks, channelIndex, start, end, fn, drawIndex) {\n                var _this7 = this;\n                return util.frame(function () {\n                  // Split channels and call this function with the channelIndex set\n                  if (peaks[0] instanceof Array) {\n                    var channels = peaks;\n                    if (_this7.params.splitChannels) {\n                      var filteredChannels = channels.filter(function (c, i) {\n                        return !_this7.hideChannel(i);\n                      });\n                      if (!_this7.params.splitChannelsOptions.overlay) {\n                        _this7.setHeight(Math.max(filteredChannels.length, 1) * _this7.params.height * _this7.params.pixelRatio);\n                      }\n                      return channels.forEach(function (channelPeaks, i) {\n                        return _this7.prepareDraw(channelPeaks, i, start, end, fn, filteredChannels.indexOf(channelPeaks));\n                      });\n                    }\n                    peaks = channels[0];\n                  } // Return and do not draw channel peaks if hidden.\n\n                  if (_this7.hideChannel(channelIndex)) {\n                    return;\n                  } // calculate maximum modulation value, either from the barHeight\n                  // parameter or if normalize=true from the largest value in the peak\n                  // set\n\n                  var absmax = 1 / _this7.params.barHeight;\n                  if (_this7.params.normalize) {\n                    var max = util.max(peaks);\n                    var min = util.min(peaks);\n                    absmax = -min > max ? -min : max;\n                  } // Bar wave draws the bottom only as a reflection of the top,\n                  // so we don't need negative values\n\n                  var hasMinVals = [].some.call(peaks, function (val) {\n                    return val < 0;\n                  });\n                  var height = _this7.params.height * _this7.params.pixelRatio;\n                  var offsetY = height * drawIndex || 0;\n                  var halfH = height / 2;\n                  return fn({\n                    absmax: absmax,\n                    hasMinVals: hasMinVals,\n                    height: height,\n                    offsetY: offsetY,\n                    halfH: halfH,\n                    peaks: peaks,\n                    channelIndex: channelIndex\n                  });\n                })();\n              }\n              /**\n               * Set the fill styles for a certain entry (wave and progress)\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {string} waveColor Wave color to draw this entry\n               * @param {string} progressColor Progress color to draw this entry\n               */\n            }, {\n              key: \"setFillStyles\",\n              value: function setFillStyles(entry) {\n                var waveColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.params.waveColor;\n                var progressColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.params.progressColor;\n                entry.setFillStyles(waveColor, progressColor);\n              }\n              /**\n               * Return image data of the multi-canvas\n               *\n               * When using a `type` of `'blob'`, this will return a `Promise`.\n               *\n               * @param {string} format='image/png' An optional value of a format type.\n               * @param {number} quality=0.92 An optional value between 0 and 1.\n               * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n               * @return {string|string[]|Promise} When using the default `'dataURL'`\n               * `type` this returns a single data URL or an array of data URLs,\n               * one for each canvas. When using the `'blob'` `type` this returns a\n               * `Promise` that resolves with an array of `Blob` instances, one for each\n               * canvas.\n               */\n            }, {\n              key: \"getImage\",\n              value: function getImage(format, quality, type) {\n                if (type === 'blob') {\n                  return Promise.all(this.canvases.map(function (entry) {\n                    return entry.getImage(format, quality, type);\n                  }));\n                } else if (type === 'dataURL') {\n                  var images = this.canvases.map(function (entry) {\n                    return entry.getImage(format, quality, type);\n                  });\n                  return images.length > 1 ? images : images[0];\n                }\n              }\n              /**\n               * Render the new progress\n               *\n               * @param {number} position X-offset of progress position in pixels\n               */\n            }, {\n              key: \"updateProgress\",\n              value: function updateProgress(position) {\n                this.style(this.progressWave, {\n                  width: position + 'px'\n                });\n              }\n            }]);\n            return MultiCanvas;\n          }(_drawer.default);\n          exports.default = MultiCanvas;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/mediaelement-webaudio.js\":\n        /*!**************************************!*\\\n          !*** ./src/mediaelement-webaudio.js ***!\n          \\**************************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var _mediaelement = _interopRequireDefault(__webpack_require__( /*! ./mediaelement */\"./src/mediaelement.js\"));\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n            return _typeof(obj);\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          function _get(target, property, receiver) {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              _get = Reflect.get;\n            } else {\n              _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n                if (desc.get) {\n                  return desc.get.call(receiver);\n                }\n                return desc.value;\n              };\n            }\n            return _get(target, property, receiver || target);\n          }\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = _getPrototypeOf(object);\n              if (object === null) break;\n            }\n            return object;\n          }\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n            return _setPrototypeOf(o, p);\n          }\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                result;\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n            return _assertThisInitialized(self);\n          }\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n            return self;\n          }\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n            try {\n              Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          /**\n           * MediaElementWebAudio backend: load audio via an HTML5 audio tag, but playback with the WebAudio API.\n           * The advantage here is that the html5 <audio> tag can perform range requests on the server and not\n           * buffer the entire file in one request, and you still get the filtering and scripting functionality\n           * of the webaudio API.\n           * Note that in order to use range requests and prevent buffering, you must provide peak data.\n           *\n           * @since 3.2.0\n           */\n          var MediaElementWebAudio = /*#__PURE__*/function (_MediaElement) {\n            _inherits(MediaElementWebAudio, _MediaElement);\n            var _super = _createSuper(MediaElementWebAudio);\n\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n            function MediaElementWebAudio(params) {\n              var _this;\n              _classCallCheck(this, MediaElementWebAudio);\n              _this = _super.call(this, params);\n              /** @private */\n\n              _this.params = params;\n              /** @private */\n\n              _this.sourceMediaElement = null;\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n            _createClass(MediaElementWebAudio, [{\n              key: \"init\",\n              value: function init() {\n                this.setPlaybackRate(this.params.audioRate);\n                this.createTimer();\n                this.createVolumeNode();\n                this.createScriptNode();\n                this.createAnalyserNode();\n              }\n              /**\n               * Private method called by both `load` (from url)\n               * and `loadElt` (existing media element) methods.\n               *\n               * @param {HTMLMediaElement} media HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @private\n               */\n            }, {\n              key: \"_load\",\n              value: function _load(media, peaks, preload) {\n                _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"_load\", this).call(this, media, peaks, preload);\n                this.createMediaElementSource(media);\n              }\n              /**\n               * Create MediaElementSource node\n               *\n               * @since 3.2.0\n               * @param {HTMLMediaElement} mediaElement HTML5 Audio to load\n               */\n            }, {\n              key: \"createMediaElementSource\",\n              value: function createMediaElementSource(mediaElement) {\n                this.sourceMediaElement = this.ac.createMediaElementSource(mediaElement);\n                this.sourceMediaElement.connect(this.analyser);\n              }\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                this.resumeAudioContext();\n                return _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"play\", this).call(this, start, end);\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               *\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"destroy\", this).call(this);\n                this.destroyWebAudio();\n              }\n            }]);\n            return MediaElementWebAudio;\n          }(_mediaelement.default);\n          exports.default = MediaElementWebAudio;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/mediaelement.js\":\n        /*!*****************************!*\\\n          !*** ./src/mediaelement.js ***!\n          \\*****************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var _webaudio = _interopRequireDefault(__webpack_require__( /*! ./webaudio */\"./src/webaudio.js\"));\n          var util = _interopRequireWildcard(__webpack_require__( /*! ./util */\"./src/util/index.js\"));\n          function _getRequireWildcardCache() {\n            if (typeof WeakMap !== \"function\") return null;\n            var cache = new WeakMap();\n            _getRequireWildcardCache = function _getRequireWildcardCache() {\n              return cache;\n            };\n            return cache;\n          }\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            }\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n            var cache = _getRequireWildcardCache();\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n            for (var key in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n            newObj.default = obj;\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n            return newObj;\n          }\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n            return _typeof(obj);\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          function _get(target, property, receiver) {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              _get = Reflect.get;\n            } else {\n              _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n                if (desc.get) {\n                  return desc.get.call(receiver);\n                }\n                return desc.value;\n              };\n            }\n            return _get(target, property, receiver || target);\n          }\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = _getPrototypeOf(object);\n              if (object === null) break;\n            }\n            return object;\n          }\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n            return _setPrototypeOf(o, p);\n          }\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                result;\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n            return _assertThisInitialized(self);\n          }\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n            return self;\n          }\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n            try {\n              Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          /**\n           * MediaElement backend\n           */\n          var MediaElement = /*#__PURE__*/function (_WebAudio) {\n            _inherits(MediaElement, _WebAudio);\n            var _super = _createSuper(MediaElement);\n\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n            function MediaElement(params) {\n              var _this;\n              _classCallCheck(this, MediaElement);\n              _this = _super.call(this, params);\n              /** @private */\n\n              _this.params = params;\n              /**\n               * Initially a dummy media element to catch errors. Once `_load` is\n               * called, this will contain the actual `HTMLMediaElement`.\n               * @private\n               */\n\n              _this.media = {\n                currentTime: 0,\n                duration: 0,\n                paused: true,\n                playbackRate: 1,\n                play: function play() {},\n                pause: function pause() {},\n                volume: 0\n              };\n              /** @private */\n\n              _this.mediaType = params.mediaType.toLowerCase();\n              /** @private */\n\n              _this.elementPosition = params.elementPosition;\n              /** @private */\n\n              _this.peaks = null;\n              /** @private */\n\n              _this.playbackRate = 1;\n              /** @private */\n\n              _this.volume = 1;\n              /** @private */\n\n              _this.isMuted = false;\n              /** @private */\n\n              _this.buffer = null;\n              /** @private */\n\n              _this.onPlayEnd = null;\n              /** @private */\n\n              _this.mediaListeners = {};\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n            _createClass(MediaElement, [{\n              key: \"init\",\n              value: function init() {\n                this.setPlaybackRate(this.params.audioRate);\n                this.createTimer();\n              }\n              /**\n               * Attach event listeners to media element.\n               */\n            }, {\n              key: \"_setupMediaListeners\",\n              value: function _setupMediaListeners() {\n                var _this2 = this;\n                this.mediaListeners.error = function () {\n                  _this2.fireEvent('error', 'Error loading media element');\n                };\n                this.mediaListeners.canplay = function () {\n                  _this2.fireEvent('canplay');\n                };\n                this.mediaListeners.ended = function () {\n                  _this2.fireEvent('finish');\n                }; // listen to and relay play, pause and seeked events to enable\n                // playback control from the external media element\n\n                this.mediaListeners.play = function () {\n                  _this2.fireEvent('play');\n                };\n                this.mediaListeners.pause = function () {\n                  _this2.fireEvent('pause');\n                };\n                this.mediaListeners.seeked = function (event) {\n                  _this2.fireEvent('seek');\n                };\n                this.mediaListeners.volumechange = function (event) {\n                  _this2.isMuted = _this2.media.muted;\n                  if (_this2.isMuted) {\n                    _this2.volume = 0;\n                  } else {\n                    _this2.volume = _this2.media.volume;\n                  }\n                  _this2.fireEvent('volume');\n                }; // reset event listeners\n\n                Object.keys(this.mediaListeners).forEach(function (id) {\n                  _this2.media.removeEventListener(id, _this2.mediaListeners[id]);\n                  _this2.media.addEventListener(id, _this2.mediaListeners[id]);\n                });\n              }\n              /**\n               * Create a timer to provide a more precise `audioprocess` event.\n               */\n            }, {\n              key: \"createTimer\",\n              value: function createTimer() {\n                var _this3 = this;\n                var onAudioProcess = function onAudioProcess() {\n                  if (_this3.isPaused()) {\n                    return;\n                  }\n                  _this3.fireEvent('audioprocess', _this3.getCurrentTime()); // Call again in the next frame\n\n                  util.frame(onAudioProcess)();\n                };\n                this.on('play', onAudioProcess); // Update the progress one more time to prevent it from being stuck in\n                // case of lower framerates\n\n                this.on('pause', function () {\n                  _this3.fireEvent('audioprocess', _this3.getCurrentTime());\n                });\n              }\n              /**\n               * Create media element with url as its source,\n               * and append to container element.\n               *\n               * @param {string} url Path to media file\n               * @param {HTMLElement} container HTML element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @throws Will throw an error if the `url` argument is not a valid media\n               * element.\n               */\n            }, {\n              key: \"load\",\n              value: function load(url, container, peaks, preload) {\n                var media = document.createElement(this.mediaType);\n                media.controls = this.params.mediaControls;\n                media.autoplay = this.params.autoplay || false;\n                media.preload = preload == null ? 'auto' : preload;\n                media.src = url;\n                media.style.width = '100%';\n                var prevMedia = container.querySelector(this.mediaType);\n                if (prevMedia) {\n                  container.removeChild(prevMedia);\n                }\n                container.appendChild(media);\n                this._load(media, peaks, preload);\n              }\n              /**\n               * Load existing media element.\n               *\n               * @param {HTMLMediaElement} elt HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               */\n            }, {\n              key: \"loadElt\",\n              value: function loadElt(elt, peaks) {\n                elt.controls = this.params.mediaControls;\n                elt.autoplay = this.params.autoplay || false;\n                this._load(elt, peaks, elt.preload);\n              }\n              /**\n               * Method called by both `load` (from url)\n               * and `loadElt` (existing media element) methods.\n               *\n               * @param {HTMLMediaElement} media HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @throws Will throw an error if the `media` argument is not a valid media\n               * element.\n               * @private\n               */\n            }, {\n              key: \"_load\",\n              value: function _load(media, peaks, preload) {\n                // verify media element is valid\n                if (!(media instanceof HTMLMediaElement) || typeof media.addEventListener === 'undefined') {\n                  throw new Error('media parameter is not a valid media element');\n                } // load must be called manually on iOS, otherwise peaks won't draw\n                // until a user interaction triggers load --> 'ready' event\n                //\n                // note that we avoid calling media.load here when given peaks and preload == 'none'\n                // as this almost always triggers some browser fetch of the media.\n\n                if (typeof media.load == 'function' && !(peaks && preload == 'none')) {\n                  // Resets the media element and restarts the media resource. Any\n                  // pending events are discarded. How much media data is fetched is\n                  // still affected by the preload attribute.\n                  media.load();\n                }\n                this.media = media;\n                this._setupMediaListeners();\n                this.peaks = peaks;\n                this.onPlayEnd = null;\n                this.buffer = null;\n                this.isMuted = media.muted;\n                this.setPlaybackRate(this.playbackRate);\n                this.setVolume(this.volume);\n              }\n              /**\n               * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n               *\n               * @return {boolean} Media paused or not\n               */\n            }, {\n              key: \"isPaused\",\n              value: function isPaused() {\n                return !this.media || this.media.paused;\n              }\n              /**\n               * Used by `wavesurfer.getDuration()`\n               *\n               * @return {number} Duration\n               */\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                if (this.explicitDuration) {\n                  return this.explicitDuration;\n                }\n                var duration = (this.buffer || this.media).duration;\n                if (duration >= Infinity) {\n                  // streaming audio\n                  duration = this.media.seekable.end(0);\n                }\n                return duration;\n              }\n              /**\n               * Returns the current time in seconds relative to the audio-clip's\n               * duration.\n               *\n               * @return {number} Current time\n               */\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.media && this.media.currentTime;\n              }\n              /**\n               * Get the position from 0 to 1\n               *\n               * @return {number} Current position\n               */\n            }, {\n              key: \"getPlayedPercents\",\n              value: function getPlayedPercents() {\n                return this.getCurrentTime() / this.getDuration() || 0;\n              }\n              /**\n               * Get the audio source playback rate.\n               *\n               * @return {number} Playback rate\n               */\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.playbackRate || this.media.playbackRate;\n              }\n              /**\n               * Set the audio source playback rate.\n               *\n               * @param {number} value Playback rate\n               */\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(value) {\n                this.playbackRate = value || 1;\n                this.media.playbackRate = this.playbackRate;\n              }\n              /**\n               * Used by `wavesurfer.seekTo()`\n               *\n               * @param {number} start Position to start at in seconds\n               */\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(start) {\n                if (start != null) {\n                  this.media.currentTime = start;\n                }\n                this.clearPlayEnd();\n              }\n              /**\n               * Plays the loaded audio region.\n               *\n               * @param {number} start Start offset in seconds, relative to the beginning\n               * of a clip.\n               * @param {number} end When to stop, relative to the beginning of a clip.\n               * @emits MediaElement#play\n               * @return {Promise} Result\n               */\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                this.seekTo(start);\n                var promise = this.media.play();\n                end && this.setPlayEnd(end);\n                return promise;\n              }\n              /**\n               * Pauses the loaded audio.\n               *\n               * @emits MediaElement#pause\n               * @return {Promise} Result\n               */\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                var promise;\n                if (this.media) {\n                  promise = this.media.pause();\n                }\n                this.clearPlayEnd();\n                return promise;\n              }\n              /**\n               * Set the play end\n               *\n               * @param {number} end Where to end\n               */\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(end) {\n                var _this4 = this;\n                this.clearPlayEnd();\n                this._onPlayEnd = function (time) {\n                  if (time >= end) {\n                    _this4.pause();\n                    _this4.seekTo(end);\n                  }\n                };\n                this.on('audioprocess', this._onPlayEnd);\n              }\n              /** @private */\n            }, {\n              key: \"clearPlayEnd\",\n              value: function clearPlayEnd() {\n                if (this._onPlayEnd) {\n                  this.un('audioprocess', this._onPlayEnd);\n                  this._onPlayEnd = null;\n                }\n              }\n              /**\n               * Compute the max and min value of the waveform when broken into\n               * <length> subranges.\n               *\n               * @param {number} length How many subranges to break the waveform into.\n               * @param {number} first First sample in the required range.\n               * @param {number} last Last sample in the required range.\n               * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of\n               * arrays of peaks consisting of (max, min) values for each subrange.\n               */\n            }, {\n              key: \"getPeaks\",\n              value: function getPeaks(length, first, last) {\n                if (this.buffer) {\n                  return _get(_getPrototypeOf(MediaElement.prototype), \"getPeaks\", this).call(this, length, first, last);\n                }\n                return this.peaks || [];\n              }\n              /**\n               * Set the sink id for the media player\n               *\n               * @param {string} deviceId String value representing audio device id.\n               * @returns {Promise} A Promise that resolves to `undefined` when there\n               * are no errors.\n               */\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                if (deviceId) {\n                  if (!this.media.setSinkId) {\n                    return Promise.reject(new Error('setSinkId is not supported in your browser'));\n                  }\n                  return this.media.setSinkId(deviceId);\n                }\n                return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n              }\n              /**\n               * Get the current volume\n               *\n               * @return {number} value A floating point value between 0 and 1.\n               */\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.volume;\n              }\n              /**\n               * Set the audio volume\n               *\n               * @param {number} value A floating point value between 0 and 1.\n               */\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(value) {\n                this.volume = value; // no need to change when it's already at that volume\n\n                if (this.media.volume !== this.volume) {\n                  this.media.volume = this.volume;\n                }\n              }\n              /**\n               * Enable or disable muted audio\n               *\n               * @since 4.0.0\n               * @param {boolean} muted Specify `true` to mute audio.\n               */\n            }, {\n              key: \"setMute\",\n              value: function setMute(muted) {\n                // This causes a volume change to be emitted too through the\n                // volumechange event listener.\n                this.isMuted = this.media.muted = muted;\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               *\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                var _this5 = this;\n                this.pause();\n                this.unAll();\n                this.destroyed = true; // cleanup media event listeners\n\n                Object.keys(this.mediaListeners).forEach(function (id) {\n                  if (_this5.media) {\n                    _this5.media.removeEventListener(id, _this5.mediaListeners[id]);\n                  }\n                });\n                if (this.params.removeMediaElementOnDestroy && this.media && this.media.parentNode) {\n                  this.media.parentNode.removeChild(this.media);\n                }\n                this.media = null;\n              }\n            }]);\n            return MediaElement;\n          }(_webaudio.default);\n          exports.default = MediaElement;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/peakcache.js\":\n        /*!**************************!*\\\n          !*** ./src/peakcache.js ***!\n          \\**************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          /**\n           * Caches the decoded peaks data to improve rendering speed for large audio\n           *\n           * Is used if the option parameter `partialRender` is set to `true`\n           */\n          var PeakCache = /*#__PURE__*/function () {\n            /**\n             * Instantiate cache\n             */\n            function PeakCache() {\n              _classCallCheck(this, PeakCache);\n              this.clearPeakCache();\n            }\n            /**\n             * Empty the cache\n             */\n\n            _createClass(PeakCache, [{\n              key: \"clearPeakCache\",\n              value: function clearPeakCache() {\n                /**\n                 * Flat array with entries that are always in pairs to mark the\n                 * beginning and end of each subrange.  This is a convenience so we can\n                 * iterate over the pairs for easy set difference operations.\n                 * @private\n                 */\n                this.peakCacheRanges = [];\n                /**\n                 * Length of the entire cachable region, used for resetting the cache\n                 * when this changes (zoom events, for instance).\n                 * @private\n                 */\n\n                this.peakCacheLength = -1;\n              }\n              /**\n               * Add a range of peaks to the cache\n               *\n               * @param {number} length The length of the range\n               * @param {number} start The x offset of the start of the range\n               * @param {number} end The x offset of the end of the range\n               * @return {Number.<Array[]>} Array with arrays of numbers\n               */\n            }, {\n              key: \"addRangeToPeakCache\",\n              value: function addRangeToPeakCache(length, start, end) {\n                if (length != this.peakCacheLength) {\n                  this.clearPeakCache();\n                  this.peakCacheLength = length;\n                } // Return ranges that weren't in the cache before the call.\n\n                var uncachedRanges = [];\n                var i = 0; // Skip ranges before the current start.\n\n                while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] < start) {\n                  i++;\n                } // If |i| is even, |start| falls after an existing range.  Otherwise,\n                // |start| falls between an existing range, and the uncached region\n                // starts when we encounter the next node in |peakCacheRanges| or\n                // |end|, whichever comes first.\n\n                if (i % 2 == 0) {\n                  uncachedRanges.push(start);\n                }\n                while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] <= end) {\n                  uncachedRanges.push(this.peakCacheRanges[i]);\n                  i++;\n                } // If |i| is even, |end| is after all existing ranges.\n\n                if (i % 2 == 0) {\n                  uncachedRanges.push(end);\n                } // Filter out the 0-length ranges.\n\n                uncachedRanges = uncachedRanges.filter(function (item, pos, arr) {\n                  if (pos == 0) {\n                    return item != arr[pos + 1];\n                  } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                  }\n                  return item != arr[pos - 1] && item != arr[pos + 1];\n                }); // Merge the two ranges together, uncachedRanges will either contain\n                // wholly new points, or duplicates of points in peakCacheRanges.  If\n                // duplicates are detected, remove both and extend the range.\n\n                this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);\n                this.peakCacheRanges = this.peakCacheRanges.sort(function (a, b) {\n                  return a - b;\n                }).filter(function (item, pos, arr) {\n                  if (pos == 0) {\n                    return item != arr[pos + 1];\n                  } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                  }\n                  return item != arr[pos - 1] && item != arr[pos + 1];\n                }); // Push the uncached ranges into an array of arrays for ease of\n                // iteration in the functions that call this.\n\n                var uncachedRangePairs = [];\n                for (i = 0; i < uncachedRanges.length; i += 2) {\n                  uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);\n                }\n                return uncachedRangePairs;\n              }\n              /**\n               * For testing\n               *\n               * @return {Number.<Array[]>} Array with arrays of numbers\n               */\n            }, {\n              key: \"getCacheRanges\",\n              value: function getCacheRanges() {\n                var peakCacheRangePairs = [];\n                var i;\n                for (i = 0; i < this.peakCacheRanges.length; i += 2) {\n                  peakCacheRangePairs.push([this.peakCacheRanges[i], this.peakCacheRanges[i + 1]]);\n                }\n                return peakCacheRangePairs;\n              }\n            }]);\n            return PeakCache;\n          }();\n          exports.default = PeakCache;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/clamp.js\":\n        /*!***************************!*\\\n          !*** ./src/util/clamp.js ***!\n          \\***************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = clamp;\n\n          /**\n           * Returns a number limited to the given range.\n           *\n           * @param {number} val The number to be limited to a range\n           * @param {number} min The lower boundary of the limit range\n           * @param {number} max The upper boundary of the limit range\n           * @returns {number} A number in the range [min, max]\n           */\n          function clamp(val, min, max) {\n            return Math.min(Math.max(min, val), max);\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/fetch.js\":\n        /*!***************************!*\\\n          !*** ./src/util/fetch.js ***!\n          \\***************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = fetchFile;\n          var _observer = _interopRequireDefault(__webpack_require__( /*! ./observer */\"./src/util/observer.js\"));\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          var ProgressHandler = /*#__PURE__*/function () {\n            /**\n             * Instantiate ProgressHandler\n             *\n             * @param {Observer} instance The `fetchFile` observer instance.\n             * @param {Number} contentLength Content length.\n             * @param {Response} response Response object.\n             */\n            function ProgressHandler(instance, contentLength, response) {\n              _classCallCheck(this, ProgressHandler);\n              this.instance = instance;\n              this.instance._reader = response.body.getReader();\n              this.total = parseInt(contentLength, 10);\n              this.loaded = 0;\n            }\n            /**\n             * A method that is called once, immediately after the `ReadableStream``\n             * is constructed.\n             *\n             * @param {ReadableStreamDefaultController} controller Controller instance\n             *     used to control the stream.\n             */\n\n            _createClass(ProgressHandler, [{\n              key: \"start\",\n              value: function start(controller) {\n                var _this = this;\n                var read = function read() {\n                  // instance._reader.read() returns a promise that resolves\n                  // when a value has been received\n                  _this.instance._reader.read().then(function (_ref) {\n                    var done = _ref.done,\n                      value = _ref.value;\n\n                    // result objects contain two properties:\n                    // done  - true if the stream has already given you all its data.\n                    // value - some data. Always undefined when done is true.\n                    if (done) {\n                      // ensure onProgress called when content-length=0\n                      if (_this.total === 0) {\n                        _this.instance.onProgress.call(_this.instance, {\n                          loaded: _this.loaded,\n                          total: _this.total,\n                          lengthComputable: false\n                        });\n                      } // no more data needs to be consumed, close the stream\n\n                      controller.close();\n                      return;\n                    }\n                    _this.loaded += value.byteLength;\n                    _this.instance.onProgress.call(_this.instance, {\n                      loaded: _this.loaded,\n                      total: _this.total,\n                      lengthComputable: !(_this.total === 0)\n                    }); // enqueue the next data chunk into our target stream\n\n                    controller.enqueue(value);\n                    read();\n                  }).catch(function (error) {\n                    controller.error(error);\n                  });\n                };\n                read();\n              }\n            }]);\n            return ProgressHandler;\n          }();\n          /**\n           * Load a file using `fetch`.\n           *\n           * @param {object} options Request options to use. See example below.\n           * @returns {Observer} Observer instance\n           * @example\n           * // default options\n           * let options = {\n           *     url: undefined,\n           *     method: 'GET',\n           *     mode: 'cors',\n           *     credentials: 'same-origin',\n           *     cache: 'default',\n           *     responseType: 'json',\n           *     requestHeaders: [],\n           *     redirect: 'follow',\n           *     referrer: 'client'\n           * };\n           *\n           * // override some options\n           * options.url = '../media/demo.wav';\n          \n           * // available types: 'arraybuffer', 'blob', 'json' or 'text'\n           * options.responseType = 'arraybuffer';\n           *\n           * // make fetch call\n           * let request = util.fetchFile(options);\n           *\n           * // listen for events\n           * request.on('progress', e => {\n           *     console.log('progress', e);\n           * });\n           *\n           * request.on('success', data => {\n           *     console.log('success!', data);\n           * });\n           *\n           * request.on('error', e => {\n           *     console.warn('fetchFile error: ', e);\n           * });\n           */\n\n          function fetchFile(options) {\n            if (!options) {\n              throw new Error('fetch options missing');\n            } else if (!options.url) {\n              throw new Error('fetch url missing');\n            }\n            var instance = new _observer.default();\n            var fetchHeaders = new Headers();\n            var fetchRequest = new Request(options.url); // add ability to abort\n\n            instance.controller = new AbortController(); // check if headers have to be added\n\n            if (options && options.requestHeaders) {\n              // add custom request headers\n              options.requestHeaders.forEach(function (header) {\n                fetchHeaders.append(header.key, header.value);\n              });\n            } // parse fetch options\n\n            var responseType = options.responseType || 'json';\n            var fetchOptions = {\n              method: options.method || 'GET',\n              headers: fetchHeaders,\n              mode: options.mode || 'cors',\n              credentials: options.credentials || 'same-origin',\n              cache: options.cache || 'default',\n              redirect: options.redirect || 'follow',\n              referrer: options.referrer || 'client',\n              signal: instance.controller.signal\n            };\n            fetch(fetchRequest, fetchOptions).then(function (response) {\n              // store response reference\n              instance.response = response;\n              var progressAvailable = true;\n              if (!response.body) {\n                // ReadableStream is not yet supported in this browser\n                // see https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n                progressAvailable = false;\n              } // Server must send CORS header \"Access-Control-Expose-Headers: content-length\"\n\n              var contentLength = response.headers.get('content-length');\n              if (contentLength === null) {\n                // Content-Length server response header missing.\n                // Don't evaluate download progress if we can't compare against a total size\n                // see https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\n                progressAvailable = false;\n              }\n              if (!progressAvailable) {\n                // not able to check download progress so skip it\n                return response;\n              } // fire progress event when during load\n\n              instance.onProgress = function (e) {\n                instance.fireEvent('progress', e);\n              };\n              return new Response(new ReadableStream(new ProgressHandler(instance, contentLength, response)), fetchOptions);\n            }).then(function (response) {\n              var errMsg;\n              if (response.ok) {\n                switch (responseType) {\n                  case 'arraybuffer':\n                    return response.arrayBuffer();\n                  case 'json':\n                    return response.json();\n                  case 'blob':\n                    return response.blob();\n                  case 'text':\n                    return response.text();\n                  default:\n                    errMsg = 'Unknown responseType: ' + responseType;\n                    break;\n                }\n              }\n              if (!errMsg) {\n                errMsg = 'HTTP error status: ' + response.status;\n              }\n              throw new Error(errMsg);\n            }).then(function (response) {\n              instance.fireEvent('success', response);\n            }).catch(function (error) {\n              instance.fireEvent('error', error);\n            }); // return the fetch request\n\n            instance.fetchRequest = fetchRequest;\n            return instance;\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/frame.js\":\n        /*!***************************!*\\\n          !*** ./src/util/frame.js ***!\n          \\***************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = frame;\n          var _requestAnimationFrame = _interopRequireDefault(__webpack_require__( /*! ./request-animation-frame */\"./src/util/request-animation-frame.js\"));\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          /**\n           * Create a function which will be called at the next requestAnimationFrame\n           * cycle\n           *\n           * @param {function} func The function to call\n           *\n           * @return {func} The function wrapped within a requestAnimationFrame\n           */\n          function frame(func) {\n            return function () {\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              return (0, _requestAnimationFrame.default)(function () {\n                return func.apply(void 0, args);\n              });\n            };\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/get-id.js\":\n        /*!****************************!*\\\n          !*** ./src/util/get-id.js ***!\n          \\****************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = getId;\n\n          /**\n           * Get a random prefixed ID\n           *\n           * @param {String} prefix Prefix to use. Default is `'wavesurfer_'`.\n           * @returns {String} Random prefixed ID\n           * @example\n           * console.log(getId()); // logs 'wavesurfer_b5pors4ru6g'\n           *\n           * let prefix = 'foo-';\n           * console.log(getId(prefix)); // logs 'foo-b5pors4ru6g'\n           */\n          function getId(prefix) {\n            if (prefix === undefined) {\n              prefix = 'wavesurfer_';\n            }\n            return prefix + Math.random().toString(32).substring(2);\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/index.js\":\n        /*!***************************!*\\\n          !*** ./src/util/index.js ***!\n          \\***************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          Object.defineProperty(exports, \"getId\", {\n            enumerable: true,\n            get: function get() {\n              return _getId.default;\n            }\n          });\n          Object.defineProperty(exports, \"max\", {\n            enumerable: true,\n            get: function get() {\n              return _max.default;\n            }\n          });\n          Object.defineProperty(exports, \"min\", {\n            enumerable: true,\n            get: function get() {\n              return _min.default;\n            }\n          });\n          Object.defineProperty(exports, \"Observer\", {\n            enumerable: true,\n            get: function get() {\n              return _observer.default;\n            }\n          });\n          Object.defineProperty(exports, \"style\", {\n            enumerable: true,\n            get: function get() {\n              return _style.default;\n            }\n          });\n          Object.defineProperty(exports, \"requestAnimationFrame\", {\n            enumerable: true,\n            get: function get() {\n              return _requestAnimationFrame.default;\n            }\n          });\n          Object.defineProperty(exports, \"frame\", {\n            enumerable: true,\n            get: function get() {\n              return _frame.default;\n            }\n          });\n          Object.defineProperty(exports, \"debounce\", {\n            enumerable: true,\n            get: function get() {\n              return _debounce.default;\n            }\n          });\n          Object.defineProperty(exports, \"preventClick\", {\n            enumerable: true,\n            get: function get() {\n              return _preventClick.default;\n            }\n          });\n          Object.defineProperty(exports, \"fetchFile\", {\n            enumerable: true,\n            get: function get() {\n              return _fetch.default;\n            }\n          });\n          Object.defineProperty(exports, \"clamp\", {\n            enumerable: true,\n            get: function get() {\n              return _clamp.default;\n            }\n          });\n          var _getId = _interopRequireDefault(__webpack_require__( /*! ./get-id */\"./src/util/get-id.js\"));\n          var _max = _interopRequireDefault(__webpack_require__( /*! ./max */\"./src/util/max.js\"));\n          var _min = _interopRequireDefault(__webpack_require__( /*! ./min */\"./src/util/min.js\"));\n          var _observer = _interopRequireDefault(__webpack_require__( /*! ./observer */\"./src/util/observer.js\"));\n          var _style = _interopRequireDefault(__webpack_require__( /*! ./style */\"./src/util/style.js\"));\n          var _requestAnimationFrame = _interopRequireDefault(__webpack_require__( /*! ./request-animation-frame */\"./src/util/request-animation-frame.js\"));\n          var _frame = _interopRequireDefault(__webpack_require__( /*! ./frame */\"./src/util/frame.js\"));\n          var _debounce = _interopRequireDefault(__webpack_require__( /*! debounce */\"./node_modules/debounce/index.js\"));\n          var _preventClick = _interopRequireDefault(__webpack_require__( /*! ./prevent-click */\"./src/util/prevent-click.js\"));\n          var _fetch = _interopRequireDefault(__webpack_require__( /*! ./fetch */\"./src/util/fetch.js\"));\n          var _clamp = _interopRequireDefault(__webpack_require__( /*! ./clamp */\"./src/util/clamp.js\"));\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          /***/\n        },\n\n        /***/\"./src/util/max.js\":\n        /*!*************************!*\\\n          !*** ./src/util/max.js ***!\n          \\*************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = max;\n\n          /**\n           * Get the largest value\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Largest number found\n           * @example console.log(max([1, 2, 3])); // logs 3\n           */\n          function max(values) {\n            var largest = -Infinity;\n            Object.keys(values).forEach(function (i) {\n              if (values[i] > largest) {\n                largest = values[i];\n              }\n            });\n            return largest;\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/min.js\":\n        /*!*************************!*\\\n          !*** ./src/util/min.js ***!\n          \\*************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = min;\n\n          /**\n           * Get the smallest value\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Smallest number found\n           * @example console.log(min([1, 2, 3])); // logs 1\n           */\n          function min(values) {\n            var smallest = Number(Infinity);\n            Object.keys(values).forEach(function (i) {\n              if (values[i] < smallest) {\n                smallest = values[i];\n              }\n            });\n            return smallest;\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/observer.js\":\n        /*!******************************!*\\\n          !*** ./src/util/observer.js ***!\n          \\******************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          /**\n           * @typedef {Object} ListenerDescriptor\n           * @property {string} name The name of the event\n           * @property {function} callback The callback\n           * @property {function} un The function to call to remove the listener\n           */\n\n          /**\n           * Observer class\n           */\n          var Observer = /*#__PURE__*/function () {\n            /**\n             * Instantiate Observer\n             */\n            function Observer() {\n              _classCallCheck(this, Observer);\n\n              /**\n               * @private\n               * @todo Initialise the handlers here already and remove the conditional\n               * assignment in `on()`\n               */\n              this._disabledEventEmissions = [];\n              this.handlers = null;\n            }\n            /**\n             * Attach a handler function for an event.\n             *\n             * @param {string} event Name of the event to listen to\n             * @param {function} fn The callback to trigger when the event is fired\n             * @return {ListenerDescriptor} The event descriptor\n             */\n\n            _createClass(Observer, [{\n              key: \"on\",\n              value: function on(event, fn) {\n                var _this = this;\n                if (!this.handlers) {\n                  this.handlers = {};\n                }\n                var handlers = this.handlers[event];\n                if (!handlers) {\n                  handlers = this.handlers[event] = [];\n                }\n                handlers.push(fn); // Return an event descriptor\n\n                return {\n                  name: event,\n                  callback: fn,\n                  un: function un(e, fn) {\n                    return _this.un(e, fn);\n                  }\n                };\n              }\n              /**\n               * Remove an event handler.\n               *\n               * @param {string} event Name of the event the listener that should be\n               * removed listens to\n               * @param {function} fn The callback that should be removed\n               */\n            }, {\n              key: \"un\",\n              value: function un(event, fn) {\n                if (!this.handlers) {\n                  return;\n                }\n                var handlers = this.handlers[event];\n                var i;\n                if (handlers) {\n                  if (fn) {\n                    for (i = handlers.length - 1; i >= 0; i--) {\n                      if (handlers[i] == fn) {\n                        handlers.splice(i, 1);\n                      }\n                    }\n                  } else {\n                    handlers.length = 0;\n                  }\n                }\n              }\n              /**\n               * Remove all event handlers.\n               */\n            }, {\n              key: \"unAll\",\n              value: function unAll() {\n                this.handlers = null;\n              }\n              /**\n               * Attach a handler to an event. The handler is executed at most once per\n               * event type.\n               *\n               * @param {string} event The event to listen to\n               * @param {function} handler The callback that is only to be called once\n               * @return {ListenerDescriptor} The event descriptor\n               */\n            }, {\n              key: \"once\",\n              value: function once(event, handler) {\n                var _this2 = this;\n                var fn = function fn() {\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n\n                  /*  eslint-disable no-invalid-this */\n                  handler.apply(_this2, args);\n                  /*  eslint-enable no-invalid-this */\n\n                  setTimeout(function () {\n                    _this2.un(event, fn);\n                  }, 0);\n                };\n                return this.on(event, fn);\n              }\n              /**\n               * Disable firing a list of events by name. When specified, event handlers for any event type\n               * passed in here will not be called.\n               *\n               * @since 4.0.0\n               * @param {string[]} eventNames an array of event names to disable emissions for\n               * @example\n               * // disable seek and interaction events\n               * wavesurfer.setDisabledEventEmissions(['seek', 'interaction']);\n               */\n            }, {\n              key: \"setDisabledEventEmissions\",\n              value: function setDisabledEventEmissions(eventNames) {\n                this._disabledEventEmissions = eventNames;\n              }\n              /**\n               * plugins borrow part of this class without calling the constructor,\n               * so we have to be careful about _disabledEventEmissions\n               */\n            }, {\n              key: \"_isDisabledEventEmission\",\n              value: function _isDisabledEventEmission(event) {\n                return this._disabledEventEmissions && this._disabledEventEmissions.includes(event);\n              }\n              /**\n               * Manually fire an event\n               *\n               * @param {string} event The event to fire manually\n               * @param {...any} args The arguments with which to call the listeners\n               */\n            }, {\n              key: \"fireEvent\",\n              value: function fireEvent(event) {\n                for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                  args[_key2 - 1] = arguments[_key2];\n                }\n                if (!this.handlers || this._isDisabledEventEmission(event)) {\n                  return;\n                }\n                var handlers = this.handlers[event];\n                handlers && handlers.forEach(function (fn) {\n                  fn.apply(void 0, args);\n                });\n              }\n            }]);\n            return Observer;\n          }();\n          exports.default = Observer;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/prevent-click.js\":\n        /*!***********************************!*\\\n          !*** ./src/util/prevent-click.js ***!\n          \\***********************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = preventClick;\n\n          /**\n           * Stops propagation of click event and removes event listener\n           *\n           * @private\n           * @param {object} event The click event\n           */\n          function preventClickHandler(event) {\n            event.stopPropagation();\n            document.body.removeEventListener('click', preventClickHandler, true);\n          }\n          /**\n           * Starts listening for click event and prevent propagation\n           *\n           * @param {object} values Values\n           */\n\n          function preventClick(values) {\n            document.body.addEventListener('click', preventClickHandler, true);\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/request-animation-frame.js\":\n        /*!*********************************************!*\\\n          !*** ./src/util/request-animation-frame.js ***!\n          \\*********************************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          /* eslint-disable valid-jsdoc */\n\n          /**\n           * Returns the `requestAnimationFrame` function for the browser, or a shim with\n           * `setTimeout` if the function is not found\n           *\n           * @return {function} Available `requestAnimationFrame` function for the browser\n           */\n          var _default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {\n            return setTimeout(callback, 1000 / 60);\n          }).bind(window);\n          exports.default = _default;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/util/style.js\":\n        /*!***************************!*\\\n          !*** ./src/util/style.js ***!\n          \\***************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = style;\n\n          /**\n           * Apply a map of styles to an element\n           *\n           * @param {HTMLElement} el The element that the styles will be applied to\n           * @param {Object} styles The map of propName: attribute, both are used as-is\n           *\n           * @return {HTMLElement} el\n           */\n          function style(el, styles) {\n            Object.keys(styles).forEach(function (prop) {\n              if (el.style[prop] !== styles[prop]) {\n                el.style[prop] = styles[prop];\n              }\n            });\n            return el;\n          }\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/wavesurfer.js\":\n        /*!***************************!*\\\n          !*** ./src/wavesurfer.js ***!\n          \\***************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var util = _interopRequireWildcard(__webpack_require__( /*! ./util */\"./src/util/index.js\"));\n          var _drawer = _interopRequireDefault(__webpack_require__( /*! ./drawer.multicanvas */\"./src/drawer.multicanvas.js\"));\n          var _webaudio = _interopRequireDefault(__webpack_require__( /*! ./webaudio */\"./src/webaudio.js\"));\n          var _mediaelement = _interopRequireDefault(__webpack_require__( /*! ./mediaelement */\"./src/mediaelement.js\"));\n          var _peakcache = _interopRequireDefault(__webpack_require__( /*! ./peakcache */\"./src/peakcache.js\"));\n          var _mediaelementWebaudio = _interopRequireDefault(__webpack_require__( /*! ./mediaelement-webaudio */\"./src/mediaelement-webaudio.js\"));\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          function _getRequireWildcardCache() {\n            if (typeof WeakMap !== \"function\") return null;\n            var cache = new WeakMap();\n            _getRequireWildcardCache = function _getRequireWildcardCache() {\n              return cache;\n            };\n            return cache;\n          }\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            }\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n            var cache = _getRequireWildcardCache();\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n            for (var key in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n            newObj.default = obj;\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n            return newObj;\n          }\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n            return _typeof(obj);\n          }\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n            return _setPrototypeOf(o, p);\n          }\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                result;\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n            return _assertThisInitialized(self);\n          }\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n            return self;\n          }\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n            try {\n              Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          /**\n           * WaveSurfer core library class\n           *\n           * @extends {Observer}\n           * @example\n           * const params = {\n           *   container: '#waveform',\n           *   waveColor: 'violet',\n           *   progressColor: 'purple'\n           * };\n           *\n           * // initialise like this\n           * const wavesurfer = WaveSurfer.create(params);\n           *\n           * // or like this ...\n           * const wavesurfer = new WaveSurfer(params);\n           * wavesurfer.init();\n           *\n           * // load audio file\n           * wavesurfer.load('example/media/demo.wav');\n           */\n\n          var WaveSurfer = /*#__PURE__*/function (_util$Observer) {\n            _inherits(WaveSurfer, _util$Observer);\n            var _super = _createSuper(WaveSurfer);\n            _createClass(WaveSurfer, null, [{\n              key: \"create\",\n              /** @private */\n\n              /** @private */\n\n              /**\n               * Instantiate this class, call its `init` function and returns it\n               *\n               * @param {WavesurferParams} params The wavesurfer parameters\n               * @return {Object} WaveSurfer instance\n               * @example const wavesurfer = WaveSurfer.create(params);\n               */\n              value: function create(params) {\n                var wavesurfer = new WaveSurfer(params);\n                return wavesurfer.init();\n              }\n              /**\n               * The library version number is available as a static property of the\n               * WaveSurfer class\n               *\n               * @type {String}\n               * @example\n               * console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);\n               */\n            }]);\n\n            /**\n             * Initialise wavesurfer instance\n             *\n             * @param {WavesurferParams} params Instantiation options for wavesurfer\n             * @example\n             * const wavesurfer = new WaveSurfer(params);\n             * @returns {this} Wavesurfer instance\n             */\n            function WaveSurfer(params) {\n              var _this;\n              _classCallCheck(this, WaveSurfer);\n              _this = _super.call(this);\n              /**\n               * Extract relevant parameters (or defaults)\n               * @private\n               */\n\n              _this.defaultParams = {\n                audioContext: null,\n                audioScriptProcessor: null,\n                audioRate: 1,\n                autoCenter: true,\n                autoCenterRate: 5,\n                autoCenterImmediately: false,\n                backend: 'WebAudio',\n                backgroundColor: null,\n                barHeight: 1,\n                barRadius: 0,\n                barGap: null,\n                barMinHeight: null,\n                container: null,\n                cursorColor: '#333',\n                cursorWidth: 1,\n                dragSelection: true,\n                drawingContextAttributes: {\n                  // Boolean that hints the user agent to reduce the latency\n                  // by desynchronizing the canvas paint cycle from the event\n                  // loop\n                  desynchronized: false\n                },\n                duration: null,\n                fillParent: true,\n                forceDecode: false,\n                height: 128,\n                hideScrollbar: false,\n                interact: true,\n                loopSelection: true,\n                maxCanvasWidth: 4000,\n                mediaContainer: null,\n                mediaControls: false,\n                mediaType: 'audio',\n                minPxPerSec: 20,\n                normalize: false,\n                partialRender: false,\n                pixelRatio: window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,\n                plugins: [],\n                progressColor: '#555',\n                removeMediaElementOnDestroy: true,\n                renderer: _drawer.default,\n                responsive: false,\n                rtl: false,\n                scrollParent: false,\n                skipLength: 2,\n                splitChannels: false,\n                splitChannelsOptions: {\n                  overlay: false,\n                  channelColors: {},\n                  filterChannels: []\n                },\n                waveColor: '#999',\n                xhr: {}\n              };\n              _this.backends = {\n                MediaElement: _mediaelement.default,\n                WebAudio: _webaudio.default,\n                MediaElementWebAudio: _mediaelementWebaudio.default\n              };\n              _this.util = util;\n              _this.params = Object.assign({}, _this.defaultParams, params);\n              /** @private */\n\n              _this.container = 'string' == typeof params.container ? document.querySelector(_this.params.container) : _this.params.container;\n              if (!_this.container) {\n                throw new Error('Container element not found');\n              }\n              if (_this.params.mediaContainer == null) {\n                /** @private */\n                _this.mediaContainer = _this.container;\n              } else if (typeof _this.params.mediaContainer == 'string') {\n                /** @private */\n                _this.mediaContainer = document.querySelector(_this.params.mediaContainer);\n              } else {\n                /** @private */\n                _this.mediaContainer = _this.params.mediaContainer;\n              }\n              if (!_this.mediaContainer) {\n                throw new Error('Media Container element not found');\n              }\n              if (_this.params.maxCanvasWidth <= 1) {\n                throw new Error('maxCanvasWidth must be greater than 1');\n              } else if (_this.params.maxCanvasWidth % 2 == 1) {\n                throw new Error('maxCanvasWidth must be an even number');\n              }\n              if (_this.params.rtl === true) {\n                util.style(_this.container, {\n                  transform: 'rotateY(180deg)'\n                });\n              }\n              if (_this.params.backgroundColor) {\n                _this.setBackgroundColor(_this.params.backgroundColor);\n              }\n              /**\n               * @private Used to save the current volume when muting so we can\n               * restore once unmuted\n               * @type {number}\n               */\n\n              _this.savedVolume = 0;\n              /**\n               * @private The current muted state\n               * @type {boolean}\n               */\n\n              _this.isMuted = false;\n              /**\n               * @private Will hold a list of event descriptors that need to be\n               * canceled on subsequent loads of audio\n               * @type {Object[]}\n               */\n\n              _this.tmpEvents = [];\n              /**\n               * @private Holds any running audio downloads\n               * @type {Observer}\n               */\n\n              _this.currentRequest = null;\n              /** @private */\n\n              _this.arraybuffer = null;\n              /** @private */\n\n              _this.drawer = null;\n              /** @private */\n\n              _this.backend = null;\n              /** @private */\n\n              _this.peakCache = null; // cache constructor objects\n\n              if (typeof _this.params.renderer !== 'function') {\n                throw new Error('Renderer parameter is invalid');\n              }\n              /**\n               * @private The uninitialised Drawer class\n               */\n\n              _this.Drawer = _this.params.renderer;\n              /**\n               * @private The uninitialised Backend class\n               */\n              // Back compat\n\n              if (_this.params.backend == 'AudioElement') {\n                _this.params.backend = 'MediaElement';\n              }\n              if ((_this.params.backend == 'WebAudio' || _this.params.backend === 'MediaElementWebAudio') && !_webaudio.default.prototype.supportsWebAudio.call(null)) {\n                _this.params.backend = 'MediaElement';\n              }\n              _this.Backend = _this.backends[_this.params.backend];\n              /**\n               * @private map of plugin names that are currently initialised\n               */\n\n              _this.initialisedPluginList = {};\n              /** @private */\n\n              _this.isDestroyed = false;\n              /**\n               * Get the current ready status.\n               *\n               * @example const isReady = wavesurfer.isReady;\n               * @return {boolean}\n               */\n\n              _this.isReady = false; // responsive debounced event listener. If this.params.responsive is not\n              // set, this is never called. Use 100ms or this.params.responsive as\n              // timeout for the debounce function.\n\n              var prevWidth = 0;\n              _this._onResize = util.debounce(function () {\n                if (prevWidth != _this.drawer.wrapper.clientWidth && !_this.params.scrollParent) {\n                  prevWidth = _this.drawer.wrapper.clientWidth;\n                  _this.drawer.fireEvent('redraw');\n                }\n              }, typeof _this.params.responsive === 'number' ? _this.params.responsive : 100);\n              return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n            }\n            /**\n             * Initialise the wave\n             *\n             * @example\n             * var wavesurfer = new WaveSurfer(params);\n             * wavesurfer.init();\n             * @return {this} The wavesurfer instance\n             */\n\n            _createClass(WaveSurfer, [{\n              key: \"init\",\n              value: function init() {\n                this.registerPlugins(this.params.plugins);\n                this.createDrawer();\n                this.createBackend();\n                this.createPeakCache();\n                return this;\n              }\n              /**\n               * Add and initialise array of plugins (if `plugin.deferInit` is falsey),\n               * this function is called in the init function of wavesurfer\n               *\n               * @param {PluginDefinition[]} plugins An array of plugin definitions\n               * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions\n               * @return {this} The wavesurfer instance\n               */\n            }, {\n              key: \"registerPlugins\",\n              value: function registerPlugins(plugins) {\n                var _this2 = this;\n\n                // first instantiate all the plugins\n                plugins.forEach(function (plugin) {\n                  return _this2.addPlugin(plugin);\n                }); // now run the init functions\n\n                plugins.forEach(function (plugin) {\n                  // call init function of the plugin if deferInit is falsey\n                  // in that case you would manually use initPlugins()\n                  if (!plugin.deferInit) {\n                    _this2.initPlugin(plugin.name);\n                  }\n                });\n                this.fireEvent('plugins-registered', plugins);\n                return this;\n              }\n              /**\n               * Get a map of plugin names that are currently initialised\n               *\n               * @example wavesurfer.getPlugins();\n               * @return {Object} Object with plugin names\n               */\n            }, {\n              key: \"getActivePlugins\",\n              value: function getActivePlugins() {\n                return this.initialisedPluginList;\n              }\n              /**\n               * Add a plugin object to wavesurfer\n               *\n               * @param {PluginDefinition} plugin A plugin definition\n               * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added\n               * @example wavesurfer.addPlugin(WaveSurfer.minimap());\n               * @return {this} The wavesurfer instance\n               */\n            }, {\n              key: \"addPlugin\",\n              value: function addPlugin(plugin) {\n                var _this3 = this;\n                if (!plugin.name) {\n                  throw new Error('Plugin does not have a name!');\n                }\n                if (!plugin.instance) {\n                  throw new Error(\"Plugin \".concat(plugin.name, \" does not have an instance property!\"));\n                } // staticProps properties are applied to wavesurfer instance\n\n                if (plugin.staticProps) {\n                  Object.keys(plugin.staticProps).forEach(function (pluginStaticProp) {\n                    /**\n                     * Properties defined in a plugin definition's `staticProps` property are added as\n                     * staticProps properties of the WaveSurfer instance\n                     */\n                    _this3[pluginStaticProp] = plugin.staticProps[pluginStaticProp];\n                  });\n                }\n                var Instance = plugin.instance; // turn the plugin instance into an observer\n\n                var observerPrototypeKeys = Object.getOwnPropertyNames(util.Observer.prototype);\n                observerPrototypeKeys.forEach(function (key) {\n                  Instance.prototype[key] = util.Observer.prototype[key];\n                });\n                /**\n                 * Instantiated plugin classes are added as a property of the wavesurfer\n                 * instance\n                 * @type {Object}\n                 */\n\n                this[plugin.name] = new Instance(plugin.params || {}, this);\n                this.fireEvent('plugin-added', plugin.name);\n                return this;\n              }\n              /**\n               * Initialise a plugin\n               *\n               * @param {string} name A plugin name\n               * @emits WaveSurfer#plugin-initialised\n               * @example wavesurfer.initPlugin('minimap');\n               * @return {this} The wavesurfer instance\n               */\n            }, {\n              key: \"initPlugin\",\n              value: function initPlugin(name) {\n                if (!this[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" has not been added yet!\"));\n                }\n                if (this.initialisedPluginList[name]) {\n                  // destroy any already initialised plugins\n                  this.destroyPlugin(name);\n                }\n                this[name].init();\n                this.initialisedPluginList[name] = true;\n                this.fireEvent('plugin-initialised', name);\n                return this;\n              }\n              /**\n               * Destroy a plugin\n               *\n               * @param {string} name A plugin name\n               * @emits WaveSurfer#plugin-destroyed\n               * @example wavesurfer.destroyPlugin('minimap');\n               * @returns {this} The wavesurfer instance\n               */\n            }, {\n              key: \"destroyPlugin\",\n              value: function destroyPlugin(name) {\n                if (!this[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" has not been added yet and cannot be destroyed!\"));\n                }\n                if (!this.initialisedPluginList[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" is not active and cannot be destroyed!\"));\n                }\n                if (typeof this[name].destroy !== 'function') {\n                  throw new Error(\"Plugin \".concat(name, \" does not have a destroy function!\"));\n                }\n                this[name].destroy();\n                delete this.initialisedPluginList[name];\n                this.fireEvent('plugin-destroyed', name);\n                return this;\n              }\n              /**\n               * Destroy all initialised plugins. Convenience function to use when\n               * wavesurfer is removed\n               *\n               * @private\n               */\n            }, {\n              key: \"destroyAllPlugins\",\n              value: function destroyAllPlugins() {\n                var _this4 = this;\n                Object.keys(this.initialisedPluginList).forEach(function (name) {\n                  return _this4.destroyPlugin(name);\n                });\n              }\n              /**\n               * Create the drawer and draw the waveform\n               *\n               * @private\n               * @emits WaveSurfer#drawer-created\n               */\n            }, {\n              key: \"createDrawer\",\n              value: function createDrawer() {\n                var _this5 = this;\n                this.drawer = new this.Drawer(this.container, this.params);\n                this.drawer.init();\n                this.fireEvent('drawer-created', this.drawer);\n                if (this.params.responsive !== false) {\n                  window.addEventListener('resize', this._onResize, true);\n                  window.addEventListener('orientationchange', this._onResize, true);\n                }\n                this.drawer.on('redraw', function () {\n                  _this5.drawBuffer();\n                  _this5.drawer.progress(_this5.backend.getPlayedPercents());\n                }); // Click-to-seek\n\n                this.drawer.on('click', function (e, progress) {\n                  setTimeout(function () {\n                    return _this5.seekTo(progress);\n                  }, 0);\n                }); // Relay the scroll event from the drawer\n\n                this.drawer.on('scroll', function (e) {\n                  if (_this5.params.partialRender) {\n                    _this5.drawBuffer();\n                  }\n                  _this5.fireEvent('scroll', e);\n                });\n              }\n              /**\n               * Create the backend\n               *\n               * @private\n               * @emits WaveSurfer#backend-created\n               */\n            }, {\n              key: \"createBackend\",\n              value: function createBackend() {\n                var _this6 = this;\n                if (this.backend) {\n                  this.backend.destroy();\n                }\n                this.backend = new this.Backend(this.params);\n                this.backend.init();\n                this.fireEvent('backend-created', this.backend);\n                this.backend.on('finish', function () {\n                  _this6.drawer.progress(_this6.backend.getPlayedPercents());\n                  _this6.fireEvent('finish');\n                });\n                this.backend.on('play', function () {\n                  return _this6.fireEvent('play');\n                });\n                this.backend.on('pause', function () {\n                  return _this6.fireEvent('pause');\n                });\n                this.backend.on('audioprocess', function (time) {\n                  _this6.drawer.progress(_this6.backend.getPlayedPercents());\n                  _this6.fireEvent('audioprocess', time);\n                }); // only needed for MediaElement and MediaElementWebAudio backend\n\n                if (this.params.backend === 'MediaElement' || this.params.backend === 'MediaElementWebAudio') {\n                  this.backend.on('seek', function () {\n                    _this6.drawer.progress(_this6.backend.getPlayedPercents());\n                  });\n                  this.backend.on('volume', function () {\n                    var newVolume = _this6.getVolume();\n                    _this6.fireEvent('volume', newVolume);\n                    if (_this6.backend.isMuted !== _this6.isMuted) {\n                      _this6.isMuted = _this6.backend.isMuted;\n                      _this6.fireEvent('mute', _this6.isMuted);\n                    }\n                  });\n                }\n              }\n              /**\n               * Create the peak cache\n               *\n               * @private\n               */\n            }, {\n              key: \"createPeakCache\",\n              value: function createPeakCache() {\n                if (this.params.partialRender) {\n                  this.peakCache = new _peakcache.default();\n                }\n              }\n              /**\n               * Get the duration of the audio clip\n               *\n               * @example const duration = wavesurfer.getDuration();\n               * @return {number} Duration in seconds\n               */\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                return this.backend.getDuration();\n              }\n              /**\n               * Get the current playback position\n               *\n               * @example const currentTime = wavesurfer.getCurrentTime();\n               * @return {number} Playback position in seconds\n               */\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.backend.getCurrentTime();\n              }\n              /**\n               * Set the current play time in seconds.\n               *\n               * @param {number} seconds A positive number in seconds. E.g. 10 means 10\n               * seconds, 60 means 1 minute\n               */\n            }, {\n              key: \"setCurrentTime\",\n              value: function setCurrentTime(seconds) {\n                if (seconds >= this.getDuration()) {\n                  this.seekTo(1);\n                } else {\n                  this.seekTo(seconds / this.getDuration());\n                }\n              }\n              /**\n               * Starts playback from the current position. Optional start and end\n               * measured in seconds can be used to set the range of audio to play.\n               *\n               * @param {?number} start Position to start at\n               * @param {?number} end Position to end at\n               * @emits WaveSurfer#interaction\n               * @return {Promise} Result of the backend play method\n               * @example\n               * // play from second 1 to 5\n               * wavesurfer.play(1, 5);\n               */\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                var _this7 = this;\n                this.fireEvent('interaction', function () {\n                  return _this7.play(start, end);\n                });\n                return this.backend.play(start, end);\n              }\n              /**\n               * Set a point in seconds for playback to stop at.\n               *\n               * @param {number} position Position (in seconds) to stop at\n               * @version 3.3.0\n               */\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(position) {\n                this.backend.setPlayEnd(position);\n              }\n              /**\n               * Stops and pauses playback\n               *\n               * @example wavesurfer.pause();\n               * @return {Promise} Result of the backend pause method\n               */\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                if (!this.backend.isPaused()) {\n                  return this.backend.pause();\n                }\n              }\n              /**\n               * Toggle playback\n               *\n               * @example wavesurfer.playPause();\n               * @return {Promise} Result of the backend play or pause method\n               */\n            }, {\n              key: \"playPause\",\n              value: function playPause() {\n                return this.backend.isPaused() ? this.play() : this.pause();\n              }\n              /**\n               * Get the current playback state\n               *\n               * @example const isPlaying = wavesurfer.isPlaying();\n               * @return {boolean} False if paused, true if playing\n               */\n            }, {\n              key: \"isPlaying\",\n              value: function isPlaying() {\n                return !this.backend.isPaused();\n              }\n              /**\n               * Skip backward\n               *\n               * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n               * is used\n               * @example wavesurfer.skipBackward();\n               */\n            }, {\n              key: \"skipBackward\",\n              value: function skipBackward(seconds) {\n                this.skip(-seconds || -this.params.skipLength);\n              }\n              /**\n               * Skip forward\n               *\n               * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n               * is used\n               * @example wavesurfer.skipForward();\n               */\n            }, {\n              key: \"skipForward\",\n              value: function skipForward(seconds) {\n                this.skip(seconds || this.params.skipLength);\n              }\n              /**\n               * Skip a number of seconds from the current position (use a negative value\n               * to go backwards).\n               *\n               * @param {number} offset Amount to skip back or forwards\n               * @example\n               * // go back 2 seconds\n               * wavesurfer.skip(-2);\n               */\n            }, {\n              key: \"skip\",\n              value: function skip(offset) {\n                var duration = this.getDuration() || 1;\n                var position = this.getCurrentTime() || 0;\n                position = Math.max(0, Math.min(duration, position + (offset || 0)));\n                this.seekAndCenter(position / duration);\n              }\n              /**\n               * Seeks to a position and centers the view\n               *\n               * @param {number} progress Between 0 (=beginning) and 1 (=end)\n               * @example\n               * // seek and go to the middle of the audio\n               * wavesurfer.seekTo(0.5);\n               */\n            }, {\n              key: \"seekAndCenter\",\n              value: function seekAndCenter(progress) {\n                this.seekTo(progress);\n                this.drawer.recenter(progress);\n              }\n              /**\n               * Seeks to a position\n               *\n               * @param {number} progress Between 0 (=beginning) and 1 (=end)\n               * @emits WaveSurfer#interaction\n               * @emits WaveSurfer#seek\n               * @example\n               * // seek to the middle of the audio\n               * wavesurfer.seekTo(0.5);\n               */\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(progress) {\n                var _this8 = this;\n\n                // return an error if progress is not a number between 0 and 1\n                if (typeof progress !== 'number' || !isFinite(progress) || progress < 0 || progress > 1) {\n                  throw new Error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');\n                }\n                this.fireEvent('interaction', function () {\n                  return _this8.seekTo(progress);\n                });\n                var paused = this.backend.isPaused(); // avoid draw wrong position while playing backward seeking\n\n                if (!paused) {\n                  this.backend.pause();\n                } // avoid small scrolls while paused seeking\n\n                var oldScrollParent = this.params.scrollParent;\n                this.params.scrollParent = false;\n                this.backend.seekTo(progress * this.getDuration());\n                this.drawer.progress(progress);\n                if (!paused) {\n                  this.backend.play();\n                }\n                this.params.scrollParent = oldScrollParent;\n                this.fireEvent('seek', progress);\n              }\n              /**\n               * Stops and goes to the beginning.\n               *\n               * @example wavesurfer.stop();\n               */\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this.pause();\n                this.seekTo(0);\n                this.drawer.progress(0);\n              }\n              /**\n               * Sets the ID of the audio device to use for output and returns a Promise.\n               *\n               * @param {string} deviceId String value representing underlying output\n               * device\n               * @returns {Promise} `Promise` that resolves to `undefined` when there are\n               * no errors detected.\n               */\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                return this.backend.setSinkId(deviceId);\n              }\n              /**\n               * Set the playback volume.\n               *\n               * @param {number} newVolume A value between 0 and 1, 0 being no\n               * volume and 1 being full volume.\n               * @emits WaveSurfer#volume\n               */\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(newVolume) {\n                this.backend.setVolume(newVolume);\n                this.fireEvent('volume', newVolume);\n              }\n              /**\n               * Get the playback volume.\n               *\n               * @return {number} A value between 0 and 1, 0 being no\n               * volume and 1 being full volume.\n               */\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.backend.getVolume();\n              }\n              /**\n               * Set the playback rate.\n               *\n               * @param {number} rate A positive number. E.g. 0.5 means half the normal\n               * speed, 2 means double speed and so on.\n               * @example wavesurfer.setPlaybackRate(2);\n               */\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(rate) {\n                this.backend.setPlaybackRate(rate);\n              }\n              /**\n               * Get the playback rate.\n               *\n               * @return {number} The current playback rate.\n               */\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.backend.getPlaybackRate();\n              }\n              /**\n               * Toggle the volume on and off. If not currently muted it will save the\n               * current volume value and turn the volume off. If currently muted then it\n               * will restore the volume to the saved value, and then rest the saved\n               * value.\n               *\n               * @example wavesurfer.toggleMute();\n               */\n            }, {\n              key: \"toggleMute\",\n              value: function toggleMute() {\n                this.setMute(!this.isMuted);\n              }\n              /**\n               * Enable or disable muted audio\n               *\n               * @param {boolean} mute Specify `true` to mute audio.\n               * @emits WaveSurfer#volume\n               * @emits WaveSurfer#mute\n               * @example\n               * // unmute\n               * wavesurfer.setMute(false);\n               * console.log(wavesurfer.getMute()) // logs false\n               */\n            }, {\n              key: \"setMute\",\n              value: function setMute(mute) {\n                // ignore all muting requests if the audio is already in that state\n                if (mute === this.isMuted) {\n                  this.fireEvent('mute', this.isMuted);\n                  return;\n                }\n                if (this.backend.setMute) {\n                  // Backends such as the MediaElement backend have their own handling\n                  // of mute, let them handle it.\n                  this.backend.setMute(mute);\n                  this.isMuted = mute;\n                } else {\n                  if (mute) {\n                    // If currently not muted then save current volume,\n                    // turn off the volume and update the mute properties\n                    this.savedVolume = this.backend.getVolume();\n                    this.backend.setVolume(0);\n                    this.isMuted = true;\n                    this.fireEvent('volume', 0);\n                  } else {\n                    // If currently muted then restore to the saved volume\n                    // and update the mute properties\n                    this.backend.setVolume(this.savedVolume);\n                    this.isMuted = false;\n                    this.fireEvent('volume', this.savedVolume);\n                  }\n                }\n                this.fireEvent('mute', this.isMuted);\n              }\n              /**\n               * Get the current mute status.\n               *\n               * @example const isMuted = wavesurfer.getMute();\n               * @return {boolean} Current mute status\n               */\n            }, {\n              key: \"getMute\",\n              value: function getMute() {\n                return this.isMuted;\n              }\n              /**\n               * Get the list of current set filters as an array.\n               *\n               * Filters must be set with setFilters method first\n               *\n               * @return {array} List of enabled filters\n               */\n            }, {\n              key: \"getFilters\",\n              value: function getFilters() {\n                return this.backend.filters || [];\n              }\n              /**\n               * Toggles `scrollParent` and redraws\n               *\n               * @example wavesurfer.toggleScroll();\n               */\n            }, {\n              key: \"toggleScroll\",\n              value: function toggleScroll() {\n                this.params.scrollParent = !this.params.scrollParent;\n                this.drawBuffer();\n              }\n              /**\n               * Toggle mouse interaction\n               *\n               * @example wavesurfer.toggleInteraction();\n               */\n            }, {\n              key: \"toggleInteraction\",\n              value: function toggleInteraction() {\n                this.params.interact = !this.params.interact;\n              }\n              /**\n               * Get the fill color of the waveform after the cursor.\n               *\n               * @return {string} A CSS color string.\n               */\n            }, {\n              key: \"getWaveColor\",\n              value: function getWaveColor() {\n                return this.params.waveColor;\n              }\n              /**\n               * Set the fill color of the waveform after the cursor.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setWaveColor('#ddd');\n               */\n            }, {\n              key: \"setWaveColor\",\n              value: function setWaveColor(color) {\n                this.params.waveColor = color;\n                this.drawBuffer();\n              }\n              /**\n               * Get the fill color of the waveform behind the cursor.\n               *\n               * @return {string} A CSS color string.\n               */\n            }, {\n              key: \"getProgressColor\",\n              value: function getProgressColor() {\n                return this.params.progressColor;\n              }\n              /**\n               * Set the fill color of the waveform behind the cursor.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setProgressColor('#400');\n               */\n            }, {\n              key: \"setProgressColor\",\n              value: function setProgressColor(color) {\n                this.params.progressColor = color;\n                this.drawBuffer();\n              }\n              /**\n               * Get the background color of the waveform container.\n               *\n               * @return {string} A CSS color string.\n               */\n            }, {\n              key: \"getBackgroundColor\",\n              value: function getBackgroundColor() {\n                return this.params.backgroundColor;\n              }\n              /**\n               * Set the background color of the waveform container.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setBackgroundColor('#FF00FF');\n               */\n            }, {\n              key: \"setBackgroundColor\",\n              value: function setBackgroundColor(color) {\n                this.params.backgroundColor = color;\n                util.style(this.container, {\n                  background: this.params.backgroundColor\n                });\n              }\n              /**\n               * Get the fill color of the cursor indicating the playhead\n               * position.\n               *\n               * @return {string} A CSS color string.\n               */\n            }, {\n              key: \"getCursorColor\",\n              value: function getCursorColor() {\n                return this.params.cursorColor;\n              }\n              /**\n               * Set the fill color of the cursor indicating the playhead\n               * position.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setCursorColor('#222');\n               */\n            }, {\n              key: \"setCursorColor\",\n              value: function setCursorColor(color) {\n                this.params.cursorColor = color;\n                this.drawer.updateCursor();\n              }\n              /**\n               * Get the height of the waveform.\n               *\n               * @return {number} Height measured in pixels.\n               */\n            }, {\n              key: \"getHeight\",\n              value: function getHeight() {\n                return this.params.height;\n              }\n              /**\n               * Set the height of the waveform.\n               *\n               * @param {number} height Height measured in pixels.\n               * @example wavesurfer.setHeight(200);\n               */\n            }, {\n              key: \"setHeight\",\n              value: function setHeight(height) {\n                this.params.height = height;\n                this.drawer.setHeight(height * this.params.pixelRatio);\n                this.drawBuffer();\n              }\n              /**\n               * Hide channels from being drawn on the waveform if splitting channels.\n               *\n               * For example, if we want to draw only the peaks for the right stereo channel:\n               *\n               * const wavesurfer = new WaveSurfer.create({...splitChannels: true});\n               * wavesurfer.load('stereo_audio.mp3');\n               *\n               * wavesurfer.setFilteredChannel([0]); <-- hide left channel peaks.\n               *\n               * @param {array} channelIndices Channels to be filtered out from drawing.\n               * @version 4.0.0\n               */\n            }, {\n              key: \"setFilteredChannels\",\n              value: function setFilteredChannels(channelIndices) {\n                this.params.splitChannelsOptions.filterChannels = channelIndices;\n                this.drawBuffer();\n              }\n              /**\n               * Get the correct peaks for current wave view-port and render wave\n               *\n               * @private\n               * @emits WaveSurfer#redraw\n               */\n            }, {\n              key: \"drawBuffer\",\n              value: function drawBuffer() {\n                var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec * this.params.pixelRatio);\n                var parentWidth = this.drawer.getWidth();\n                var width = nominalWidth; // always start at 0 after zooming for scrolling : issue redraw left part\n\n                var start = 0;\n                var end = Math.max(start + parentWidth, width); // Fill container\n\n                if (this.params.fillParent && (!this.params.scrollParent || nominalWidth < parentWidth)) {\n                  width = parentWidth;\n                  start = 0;\n                  end = width;\n                }\n                var peaks;\n                if (this.params.partialRender) {\n                  var newRanges = this.peakCache.addRangeToPeakCache(width, start, end);\n                  var i;\n                  for (i = 0; i < newRanges.length; i++) {\n                    peaks = this.backend.getPeaks(width, newRanges[i][0], newRanges[i][1]);\n                    this.drawer.drawPeaks(peaks, width, newRanges[i][0], newRanges[i][1]);\n                  }\n                } else {\n                  peaks = this.backend.getPeaks(width, start, end);\n                  this.drawer.drawPeaks(peaks, width, start, end);\n                }\n                this.fireEvent('redraw', peaks, width);\n              }\n              /**\n               * Horizontally zooms the waveform in and out. It also changes the parameter\n               * `minPxPerSec` and enables the `scrollParent` option. Calling the function\n               * with a falsey parameter will reset the zoom state.\n               *\n               * @param {?number} pxPerSec Number of horizontal pixels per second of\n               * audio, if none is set the waveform returns to unzoomed state\n               * @emits WaveSurfer#zoom\n               * @example wavesurfer.zoom(20);\n               */\n            }, {\n              key: \"zoom\",\n              value: function zoom(pxPerSec) {\n                if (!pxPerSec) {\n                  this.params.minPxPerSec = this.defaultParams.minPxPerSec;\n                  this.params.scrollParent = false;\n                } else {\n                  this.params.minPxPerSec = pxPerSec;\n                  this.params.scrollParent = true;\n                }\n                this.drawBuffer();\n                this.drawer.progress(this.backend.getPlayedPercents());\n                this.drawer.recenter(this.getCurrentTime() / this.getDuration());\n                this.fireEvent('zoom', pxPerSec);\n              }\n              /**\n               * Decode buffer and load\n               *\n               * @private\n               * @param {ArrayBuffer} arraybuffer Buffer to process\n               */\n            }, {\n              key: \"loadArrayBuffer\",\n              value: function loadArrayBuffer(arraybuffer) {\n                var _this9 = this;\n                this.decodeArrayBuffer(arraybuffer, function (data) {\n                  if (!_this9.isDestroyed) {\n                    _this9.loadDecodedBuffer(data);\n                  }\n                });\n              }\n              /**\n               * Directly load an externally decoded AudioBuffer\n               *\n               * @private\n               * @param {AudioBuffer} buffer Buffer to process\n               * @emits WaveSurfer#ready\n               */\n            }, {\n              key: \"loadDecodedBuffer\",\n              value: function loadDecodedBuffer(buffer) {\n                this.backend.load(buffer);\n                this.drawBuffer();\n                this.isReady = true;\n                this.fireEvent('ready');\n              }\n              /**\n               * Loads audio data from a Blob or File object\n               *\n               * @param {Blob|File} blob Audio data\n               * @example\n               */\n            }, {\n              key: \"loadBlob\",\n              value: function loadBlob(blob) {\n                var _this10 = this;\n\n                // Create file reader\n                var reader = new FileReader();\n                reader.addEventListener('progress', function (e) {\n                  return _this10.onProgress(e);\n                });\n                reader.addEventListener('load', function (e) {\n                  return _this10.loadArrayBuffer(e.target.result);\n                });\n                reader.addEventListener('error', function () {\n                  return _this10.fireEvent('error', 'Error reading file');\n                });\n                reader.readAsArrayBuffer(blob);\n                this.empty();\n              }\n              /**\n               * Loads audio and re-renders the waveform.\n               *\n               * @param {string|HTMLMediaElement} url The url of the audio file or the\n               * audio element with the audio\n               * @param {number[]|Number.<Array[]>} peaks Wavesurfer does not have to decode\n               * the audio to render the waveform if this is specified\n               * @param {?string} preload (Use with backend `MediaElement` and `MediaElementWebAudio`)\n               * `'none'|'metadata'|'auto'` Preload attribute for the media element\n               * @param {?number} duration The duration of the audio. This is used to\n               * render the peaks data in the correct size for the audio duration (as\n               * befits the current `minPxPerSec` and zoom value) without having to decode\n               * the audio.\n               * @returns {void}\n               * @throws Will throw an error if the `url` argument is empty.\n               * @example\n               * // uses fetch or media element to load file (depending on backend)\n               * wavesurfer.load('http://example.com/demo.wav');\n               *\n               * // setting preload attribute with media element backend and supplying\n               * // peaks\n               * wavesurfer.load(\n               *   'http://example.com/demo.wav',\n               *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],\n               *   true\n               * );\n               */\n            }, {\n              key: \"load\",\n              value: function load(url, peaks, preload, duration) {\n                if (!url) {\n                  throw new Error('url parameter cannot be empty');\n                }\n                this.empty();\n                if (preload) {\n                  // check whether the preload attribute will be usable and if not log\n                  // a warning listing the reasons why not and nullify the variable\n                  var preloadIgnoreReasons = {\n                    \"Preload is not 'auto', 'none' or 'metadata'\": ['auto', 'metadata', 'none'].indexOf(preload) === -1,\n                    'Peaks are not provided': !peaks,\n                    \"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'\": ['MediaElement', 'MediaElementWebAudio'].indexOf(this.params.backend) === -1,\n                    'Url is not of type string': typeof url !== 'string'\n                  };\n                  var activeReasons = Object.keys(preloadIgnoreReasons).filter(function (reason) {\n                    return preloadIgnoreReasons[reason];\n                  });\n                  if (activeReasons.length) {\n                    // eslint-disable-next-line no-console\n                    console.warn('Preload parameter of wavesurfer.load will be ignored because:\\n\\t- ' + activeReasons.join('\\n\\t- ')); // stop invalid values from being used\n\n                    preload = null;\n                  }\n                }\n                switch (this.params.backend) {\n                  case 'WebAudio':\n                    return this.loadBuffer(url, peaks, duration);\n                  case 'MediaElement':\n                  case 'MediaElementWebAudio':\n                    return this.loadMediaElement(url, peaks, preload, duration);\n                }\n              }\n              /**\n               * Loads audio using Web Audio buffer backend.\n               *\n               * @private\n               * @param {string} url URL of audio file\n               * @param {number[]|Number.<Array[]>} peaks Peaks data\n               * @param {?number} duration Optional duration of audio file\n               * @returns {void}\n               */\n            }, {\n              key: \"loadBuffer\",\n              value: function loadBuffer(url, peaks, duration) {\n                var _this11 = this;\n                var load = function load(action) {\n                  if (action) {\n                    _this11.tmpEvents.push(_this11.once('ready', action));\n                  }\n                  return _this11.getArrayBuffer(url, function (data) {\n                    return _this11.loadArrayBuffer(data);\n                  });\n                };\n                if (peaks) {\n                  this.backend.setPeaks(peaks, duration);\n                  this.drawBuffer();\n                  this.tmpEvents.push(this.once('interaction', load));\n                } else {\n                  return load();\n                }\n              }\n              /**\n               * Either create a media element, or load an existing media element.\n               *\n               * @private\n               * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an\n               * existing HTML5 Audio/Video Element\n               * @param {number[]|Number.<Array[]>} peaks Array of peaks. Required to bypass web audio\n               * dependency\n               * @param {?boolean} preload Set to true if the preload attribute of the\n               * audio element should be enabled\n               * @param {?number} duration Optional duration of audio file\n               */\n            }, {\n              key: \"loadMediaElement\",\n              value: function loadMediaElement(urlOrElt, peaks, preload, duration) {\n                var _this12 = this;\n                var url = urlOrElt;\n                if (typeof urlOrElt === 'string') {\n                  this.backend.load(url, this.mediaContainer, peaks, preload);\n                } else {\n                  var elt = urlOrElt;\n                  this.backend.loadElt(elt, peaks); // If peaks are not provided,\n                  // url = element.src so we can get peaks with web audio\n\n                  url = elt.src;\n                }\n                this.tmpEvents.push(this.backend.once('canplay', function () {\n                  // ignore when backend was already destroyed\n                  if (!_this12.backend.destroyed) {\n                    _this12.drawBuffer();\n                    _this12.isReady = true;\n                    _this12.fireEvent('ready');\n                  }\n                }), this.backend.once('error', function (err) {\n                  return _this12.fireEvent('error', err);\n                }));\n                if (peaks) {\n                  this.backend.setPeaks(peaks, duration);\n                  this.drawBuffer();\n                } // If no pre-decoded peaks are provided, or are provided with\n                // forceDecode flag, attempt to download the audio file and decode it\n                // with Web Audio.\n\n                if ((!peaks || this.params.forceDecode) && this.backend.supportsWebAudio()) {\n                  this.getArrayBuffer(url, function (arraybuffer) {\n                    _this12.decodeArrayBuffer(arraybuffer, function (buffer) {\n                      _this12.backend.buffer = buffer;\n                      _this12.backend.setPeaks(null);\n                      _this12.drawBuffer();\n                      _this12.fireEvent('waveform-ready');\n                    });\n                  });\n                }\n              }\n              /**\n               * Decode an array buffer and pass data to a callback\n               *\n               * @private\n               * @param {Object} arraybuffer The array buffer to decode\n               * @param {function} callback The function to call on complete\n               */\n            }, {\n              key: \"decodeArrayBuffer\",\n              value: function decodeArrayBuffer(arraybuffer, callback) {\n                var _this13 = this;\n                this.arraybuffer = arraybuffer;\n                this.backend.decodeArrayBuffer(arraybuffer, function (data) {\n                  // Only use the decoded data if we haven't been destroyed or\n                  // another decode started in the meantime\n                  if (!_this13.isDestroyed && _this13.arraybuffer == arraybuffer) {\n                    callback(data);\n                    _this13.arraybuffer = null;\n                  }\n                }, function () {\n                  return _this13.fireEvent('error', 'Error decoding audiobuffer');\n                });\n              }\n              /**\n               * Load an array buffer using fetch and pass the result to a callback\n               *\n               * @param {string} url The URL of the file object\n               * @param {function} callback The function to call on complete\n               * @returns {util.fetchFile} fetch call\n               * @private\n               */\n            }, {\n              key: \"getArrayBuffer\",\n              value: function getArrayBuffer(url, callback) {\n                var _this14 = this;\n                var options = Object.assign({\n                  url: url,\n                  responseType: 'arraybuffer'\n                }, this.params.xhr);\n                var request = util.fetchFile(options);\n                this.currentRequest = request;\n                this.tmpEvents.push(request.on('progress', function (e) {\n                  _this14.onProgress(e);\n                }), request.on('success', function (data) {\n                  callback(data);\n                  _this14.currentRequest = null;\n                }), request.on('error', function (e) {\n                  _this14.fireEvent('error', e);\n                  _this14.currentRequest = null;\n                }));\n                return request;\n              }\n              /**\n               * Called while the audio file is loading\n               *\n               * @private\n               * @param {Event} e Progress event\n               * @emits WaveSurfer#loading\n               */\n            }, {\n              key: \"onProgress\",\n              value: function onProgress(e) {\n                var percentComplete;\n                if (e.lengthComputable) {\n                  percentComplete = e.loaded / e.total;\n                } else {\n                  // Approximate progress with an asymptotic\n                  // function, and assume downloads in the 1-3 MB range.\n                  percentComplete = e.loaded / (e.loaded + 1000000);\n                }\n                this.fireEvent('loading', Math.round(percentComplete * 100), e.target);\n              }\n              /**\n               * Exports PCM data into a JSON array and opens in a new window.\n               *\n               * @param {number} length=1024 The scale in which to export the peaks\n               * @param {number} accuracy=10000\n               * @param {?boolean} noWindow Set to true to disable opening a new\n               * window with the JSON\n               * @param {number} start Start index\n               * @param {number} end End index\n               * @return {Promise} Promise that resolves with array of peaks\n               */\n            }, {\n              key: \"exportPCM\",\n              value: function exportPCM(length, accuracy, noWindow, start, end) {\n                length = length || 1024;\n                start = start || 0;\n                accuracy = accuracy || 10000;\n                noWindow = noWindow || false;\n                var peaks = this.backend.getPeaks(length, start, end);\n                var arr = [].map.call(peaks, function (val) {\n                  return Math.round(val * accuracy) / accuracy;\n                });\n                return new Promise(function (resolve, reject) {\n                  var json = JSON.stringify(arr);\n                  if (!noWindow) {\n                    window.open('data:application/json;charset=utf-8,' + encodeURIComponent(json));\n                  }\n                  resolve(json);\n                });\n              }\n              /**\n               * Save waveform image as data URI.\n               *\n               * The default format is `'image/png'`. Other supported types are\n               * `'image/jpeg'` and `'image/webp'`.\n               *\n               * @param {string} format='image/png' A string indicating the image format.\n               * The default format type is `'image/png'`.\n               * @param {number} quality=1 A number between 0 and 1 indicating the image\n               * quality to use for image formats that use lossy compression such as\n               * `'image/jpeg'`` and `'image/webp'`.\n               * @param {string} type Image data type to return. Either 'dataURL' (default)\n               * or 'blob'.\n               * @return {string|string[]|Promise} When using `'dataURL'` type this returns\n               * a single data URL or an array of data URLs, one for each canvas. When using\n               * `'blob'` type this returns a `Promise` resolving with an array of `Blob`\n               * instances, one for each canvas.\n               */\n            }, {\n              key: \"exportImage\",\n              value: function exportImage(format, quality, type) {\n                if (!format) {\n                  format = 'image/png';\n                }\n                if (!quality) {\n                  quality = 1;\n                }\n                if (!type) {\n                  type = 'dataURL';\n                }\n                return this.drawer.getImage(format, quality, type);\n              }\n              /**\n               * Cancel any fetch request currently in progress\n               */\n            }, {\n              key: \"cancelAjax\",\n              value: function cancelAjax() {\n                if (this.currentRequest && this.currentRequest.controller) {\n                  // If the current request has a ProgressHandler, then its ReadableStream might need to be cancelled too\n                  // See: Wavesurfer issue #2042\n                  // See Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n                  if (this.currentRequest._reader) {\n                    // Ignoring exceptions thrown by call to cancel()\n                    this.currentRequest._reader.cancel().catch(function (err) {});\n                  }\n                  this.currentRequest.controller.abort();\n                  this.currentRequest = null;\n                }\n              }\n              /**\n               * @private\n               */\n            }, {\n              key: \"clearTmpEvents\",\n              value: function clearTmpEvents() {\n                this.tmpEvents.forEach(function (e) {\n                  return e.un();\n                });\n              }\n              /**\n               * Display empty waveform.\n               */\n            }, {\n              key: \"empty\",\n              value: function empty() {\n                if (!this.backend.isPaused()) {\n                  this.stop();\n                  this.backend.disconnectSource();\n                }\n                this.isReady = false;\n                this.cancelAjax();\n                this.clearTmpEvents(); // empty drawer\n\n                this.drawer.progress(0);\n                this.drawer.setWidth(0);\n                this.drawer.drawPeaks({\n                  length: this.drawer.getWidth()\n                }, 0);\n              }\n              /**\n               * Remove events, elements and disconnect WebAudio nodes.\n               *\n               * @emits WaveSurfer#destroy\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.destroyAllPlugins();\n                this.fireEvent('destroy');\n                this.cancelAjax();\n                this.clearTmpEvents();\n                this.unAll();\n                if (this.params.responsive !== false) {\n                  window.removeEventListener('resize', this._onResize, true);\n                  window.removeEventListener('orientationchange', this._onResize, true);\n                }\n                if (this.backend) {\n                  this.backend.destroy();\n                }\n                if (this.drawer) {\n                  this.drawer.destroy();\n                }\n                this.isDestroyed = true;\n                this.isReady = false;\n                this.arraybuffer = null;\n              }\n            }]);\n            return WaveSurfer;\n          }(util.Observer);\n          exports.default = WaveSurfer;\n          WaveSurfer.VERSION = \"4.1.1\";\n          WaveSurfer.util = util;\n          module.exports = exports.default;\n\n          /***/\n        },\n\n        /***/\"./src/webaudio.js\":\n        /*!*************************!*\\\n          !*** ./src/webaudio.js ***!\n          \\*************************/\n        /*! no static exports found */\n        /***/\n        function (module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var util = _interopRequireWildcard(__webpack_require__( /*! ./util */\"./src/util/index.js\"));\n          function _getRequireWildcardCache() {\n            if (typeof WeakMap !== \"function\") return null;\n            var cache = new WeakMap();\n            _getRequireWildcardCache = function _getRequireWildcardCache() {\n              return cache;\n            };\n            return cache;\n          }\n          function _interopRequireWildcard(obj) {\n            if (obj && obj.__esModule) {\n              return obj;\n            }\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n            var cache = _getRequireWildcardCache();\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n            for (var key in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n            newObj.default = obj;\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n            return newObj;\n          }\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n            return _typeof(obj);\n          }\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n              });\n            } else {\n              obj[key] = value;\n            }\n            return obj;\n          }\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n            return _setPrototypeOf(o, p);\n          }\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                result;\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n            return _assertThisInitialized(self);\n          }\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n            return self;\n          }\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n            try {\n              Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          // using constants to prevent someone writing the string wrong\n          var PLAYING = 'playing';\n          var PAUSED = 'paused';\n          var FINISHED = 'finished';\n          /**\n           * WebAudio backend\n           *\n           * @extends {Observer}\n           */\n\n          var WebAudio = /*#__PURE__*/function (_util$Observer) {\n            _inherits(WebAudio, _util$Observer);\n            var _super = _createSuper(WebAudio);\n            _createClass(WebAudio, [{\n              key: \"supportsWebAudio\",\n              /** scriptBufferSize: size of the processing buffer */\n\n              /** audioContext: allows to process audio with WebAudio API */\n\n              /** @private */\n\n              /** @private */\n\n              /**\n               * Does the browser support this backend\n               *\n               * @return {boolean} Whether or not this browser supports this backend\n               */\n              value: function supportsWebAudio() {\n                return !!(window.AudioContext || window.webkitAudioContext);\n              }\n              /**\n               * Get the audio context used by this backend or create one\n               *\n               * @return {AudioContext} Existing audio context, or creates a new one\n               */\n            }, {\n              key: \"getAudioContext\",\n              value: function getAudioContext() {\n                if (!window.WaveSurferAudioContext) {\n                  window.WaveSurferAudioContext = new (window.AudioContext || window.webkitAudioContext)();\n                }\n                return window.WaveSurferAudioContext;\n              }\n              /**\n               * Get the offline audio context used by this backend or create one\n               *\n               * @param {number} sampleRate The sample rate to use\n               * @return {OfflineAudioContext} Existing offline audio context, or creates\n               * a new one\n               */\n            }, {\n              key: \"getOfflineAudioContext\",\n              value: function getOfflineAudioContext(sampleRate) {\n                if (!window.WaveSurferOfflineAudioContext) {\n                  window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 2, sampleRate);\n                }\n                return window.WaveSurferOfflineAudioContext;\n              }\n              /**\n               * Construct the backend\n               *\n               * @param {WavesurferParams} params Wavesurfer parameters\n               */\n            }]);\n\n            function WebAudio(params) {\n              var _this$stateBehaviors, _this$states;\n              var _this;\n              _classCallCheck(this, WebAudio);\n              _this = _super.call(this);\n              /** @private */\n\n              _this.audioContext = null;\n              _this.offlineAudioContext = null;\n              _this.stateBehaviors = (_this$stateBehaviors = {}, _defineProperty(_this$stateBehaviors, PLAYING, {\n                init: function init() {\n                  this.addOnAudioProcess();\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  var duration = this.getDuration();\n                  return this.getCurrentTime() / duration || 0;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.startPosition + this.getPlayedTime();\n                }\n              }), _defineProperty(_this$stateBehaviors, PAUSED, {\n                init: function init() {\n                  this.removeOnAudioProcess();\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  var duration = this.getDuration();\n                  return this.getCurrentTime() / duration || 0;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.startPosition;\n                }\n              }), _defineProperty(_this$stateBehaviors, FINISHED, {\n                init: function init() {\n                  this.removeOnAudioProcess();\n                  this.fireEvent('finish');\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  return 1;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.getDuration();\n                }\n              }), _this$stateBehaviors);\n              _this.params = params;\n              /** ac: Audio Context instance */\n\n              _this.ac = params.audioContext || (_this.supportsWebAudio() ? _this.getAudioContext() : {});\n              /**@private */\n\n              _this.lastPlay = _this.ac.currentTime;\n              /** @private */\n\n              _this.startPosition = 0;\n              /** @private */\n\n              _this.scheduledPause = null;\n              /** @private */\n\n              _this.states = (_this$states = {}, _defineProperty(_this$states, PLAYING, Object.create(_this.stateBehaviors[PLAYING])), _defineProperty(_this$states, PAUSED, Object.create(_this.stateBehaviors[PAUSED])), _defineProperty(_this$states, FINISHED, Object.create(_this.stateBehaviors[FINISHED])), _this$states);\n              /** @private */\n\n              _this.buffer = null;\n              /** @private */\n\n              _this.filters = [];\n              /** gainNode: allows to control audio volume */\n\n              _this.gainNode = null;\n              /** @private */\n\n              _this.mergedPeaks = null;\n              /** @private */\n\n              _this.offlineAc = null;\n              /** @private */\n\n              _this.peaks = null;\n              /** @private */\n\n              _this.playbackRate = 1;\n              /** analyser: provides audio analysis information */\n\n              _this.analyser = null;\n              /** scriptNode: allows processing audio */\n\n              _this.scriptNode = null;\n              /** @private */\n\n              _this.source = null;\n              /** @private */\n\n              _this.splitPeaks = [];\n              /** @private */\n\n              _this.state = null;\n              /** @private */\n\n              _this.explicitDuration = params.duration;\n              /**\n               * Boolean indicating if the backend was destroyed.\n               */\n\n              _this.destroyed = false;\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n            _createClass(WebAudio, [{\n              key: \"init\",\n              value: function init() {\n                this.createVolumeNode();\n                this.createScriptNode();\n                this.createAnalyserNode();\n                this.setState(PAUSED);\n                this.setPlaybackRate(this.params.audioRate);\n                this.setLength(0);\n              }\n              /** @private */\n            }, {\n              key: \"disconnectFilters\",\n              value: function disconnectFilters() {\n                if (this.filters) {\n                  this.filters.forEach(function (filter) {\n                    filter && filter.disconnect();\n                  });\n                  this.filters = null; // Reconnect direct path\n\n                  this.analyser.connect(this.gainNode);\n                }\n              }\n              /**\n               * @private\n               *\n               * @param {string} state The new state\n               */\n            }, {\n              key: \"setState\",\n              value: function setState(state) {\n                if (this.state !== this.states[state]) {\n                  this.state = this.states[state];\n                  this.state.init.call(this);\n                }\n              }\n              /**\n               * Unpacked `setFilters()`\n               *\n               * @param {...AudioNode} filters One or more filters to set\n               */\n            }, {\n              key: \"setFilter\",\n              value: function setFilter() {\n                for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n                  filters[_key] = arguments[_key];\n                }\n                this.setFilters(filters);\n              }\n              /**\n               * Insert custom Web Audio nodes into the graph\n               *\n               * @param {AudioNode[]} filters Packed filters array\n               * @example\n               * const lowpass = wavesurfer.backend.ac.createBiquadFilter();\n               * wavesurfer.backend.setFilter(lowpass);\n               */\n            }, {\n              key: \"setFilters\",\n              value: function setFilters(filters) {\n                // Remove existing filters\n                this.disconnectFilters(); // Insert filters if filter array not empty\n\n                if (filters && filters.length) {\n                  this.filters = filters; // Disconnect direct path before inserting filters\n\n                  this.analyser.disconnect(); // Connect each filter in turn\n\n                  filters.reduce(function (prev, curr) {\n                    prev.connect(curr);\n                    return curr;\n                  }, this.analyser).connect(this.gainNode);\n                }\n              }\n              /** Create ScriptProcessorNode to process audio */\n            }, {\n              key: \"createScriptNode\",\n              value: function createScriptNode() {\n                if (this.params.audioScriptProcessor) {\n                  this.scriptNode = this.params.audioScriptProcessor;\n                } else {\n                  if (this.ac.createScriptProcessor) {\n                    this.scriptNode = this.ac.createScriptProcessor(WebAudio.scriptBufferSize);\n                  } else {\n                    this.scriptNode = this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);\n                  }\n                }\n                this.scriptNode.connect(this.ac.destination);\n              }\n              /** @private */\n            }, {\n              key: \"addOnAudioProcess\",\n              value: function addOnAudioProcess() {\n                var _this2 = this;\n                this.scriptNode.onaudioprocess = function () {\n                  var time = _this2.getCurrentTime();\n                  if (time >= _this2.getDuration()) {\n                    _this2.setState(FINISHED);\n                    _this2.fireEvent('pause');\n                  } else if (time >= _this2.scheduledPause) {\n                    _this2.pause();\n                  } else if (_this2.state === _this2.states[PLAYING]) {\n                    _this2.fireEvent('audioprocess', time);\n                  }\n                };\n              }\n              /** @private */\n            }, {\n              key: \"removeOnAudioProcess\",\n              value: function removeOnAudioProcess() {\n                this.scriptNode.onaudioprocess = function () {};\n              }\n              /** Create analyser node to perform audio analysis */\n            }, {\n              key: \"createAnalyserNode\",\n              value: function createAnalyserNode() {\n                this.analyser = this.ac.createAnalyser();\n                this.analyser.connect(this.gainNode);\n              }\n              /**\n               * Create the gain node needed to control the playback volume.\n               *\n               */\n            }, {\n              key: \"createVolumeNode\",\n              value: function createVolumeNode() {\n                // Create gain node using the AudioContext\n                if (this.ac.createGain) {\n                  this.gainNode = this.ac.createGain();\n                } else {\n                  this.gainNode = this.ac.createGainNode();\n                } // Add the gain node to the graph\n\n                this.gainNode.connect(this.ac.destination);\n              }\n              /**\n               * Set the sink id for the media player\n               *\n               * @param {string} deviceId String value representing audio device id.\n               * @returns {Promise} A Promise that resolves to `undefined` when there\n               * are no errors.\n               */\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                if (deviceId) {\n                  /**\n                   * The webaudio API doesn't currently support setting the device\n                   * output. Here we create an HTMLAudioElement, connect the\n                   * webaudio stream to that element and setSinkId there.\n                   */\n                  var audio = new window.Audio();\n                  if (!audio.setSinkId) {\n                    return Promise.reject(new Error('setSinkId is not supported in your browser'));\n                  }\n                  audio.autoplay = true;\n                  var dest = this.ac.createMediaStreamDestination();\n                  this.gainNode.disconnect();\n                  this.gainNode.connect(dest);\n                  audio.srcObject = dest.stream;\n                  return audio.setSinkId(deviceId);\n                } else {\n                  return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n                }\n              }\n              /**\n               * Set the audio volume\n               *\n               * @param {number} value A floating point value between 0 and 1.\n               */\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(value) {\n                this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);\n              }\n              /**\n               * Get the current volume\n               *\n               * @return {number} value A floating point value between 0 and 1.\n               */\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.gainNode.gain.value;\n              }\n              /**\n               * Decode an array buffer and pass data to a callback\n               *\n               * @private\n               * @param {ArrayBuffer} arraybuffer The array buffer to decode\n               * @param {function} callback The function to call on complete.\n               * @param {function} errback The function to call on error.\n               */\n            }, {\n              key: \"decodeArrayBuffer\",\n              value: function decodeArrayBuffer(arraybuffer, callback, errback) {\n                if (!this.offlineAc) {\n                  this.offlineAc = this.getOfflineAudioContext(this.ac && this.ac.sampleRate ? this.ac.sampleRate : 44100);\n                }\n                this.offlineAc.decodeAudioData(arraybuffer, function (data) {\n                  return callback(data);\n                }, errback);\n              }\n              /**\n               * Set pre-decoded peaks\n               *\n               * @param {number[]|Number.<Array[]>} peaks Peaks data\n               * @param {?number} duration Explicit duration\n               */\n            }, {\n              key: \"setPeaks\",\n              value: function setPeaks(peaks, duration) {\n                if (duration != null) {\n                  this.explicitDuration = duration;\n                }\n                this.peaks = peaks;\n              }\n              /**\n               * Set the rendered length (different from the length of the audio)\n               *\n               * @param {number} length The rendered length\n               */\n            }, {\n              key: \"setLength\",\n              value: function setLength(length) {\n                // No resize, we can preserve the cached peaks.\n                if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {\n                  return;\n                }\n                this.splitPeaks = [];\n                this.mergedPeaks = []; // Set the last element of the sparse array so the peak arrays are\n                // appropriately sized for other calculations.\n\n                var channels = this.buffer ? this.buffer.numberOfChannels : 1;\n                var c;\n                for (c = 0; c < channels; c++) {\n                  this.splitPeaks[c] = [];\n                  this.splitPeaks[c][2 * (length - 1)] = 0;\n                  this.splitPeaks[c][2 * (length - 1) + 1] = 0;\n                }\n                this.mergedPeaks[2 * (length - 1)] = 0;\n                this.mergedPeaks[2 * (length - 1) + 1] = 0;\n              }\n              /**\n               * Compute the max and min value of the waveform when broken into <length> subranges.\n               *\n               * @param {number} length How many subranges to break the waveform into.\n               * @param {number} first First sample in the required range.\n               * @param {number} last Last sample in the required range.\n               * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of arrays of\n               * peaks consisting of (max, min) values for each subrange.\n               */\n            }, {\n              key: \"getPeaks\",\n              value: function getPeaks(length, first, last) {\n                if (this.peaks) {\n                  return this.peaks;\n                }\n                if (!this.buffer) {\n                  return [];\n                }\n                first = first || 0;\n                last = last || length - 1;\n                this.setLength(length);\n                if (!this.buffer) {\n                  return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n                }\n                /**\n                 * The following snippet fixes a buffering data issue on the Safari\n                 * browser which returned undefined It creates the missing buffer based\n                 * on 1 channel, 4096 samples and the sampleRate from the current\n                 * webaudio context 4096 samples seemed to be the best fit for rendering\n                 * will review this code once a stable version of Safari TP is out\n                 */\n\n                if (!this.buffer.length) {\n                  var newBuffer = this.createBuffer(1, 4096, this.sampleRate);\n                  this.buffer = newBuffer.buffer;\n                }\n                var sampleSize = this.buffer.length / length;\n                var sampleStep = ~~(sampleSize / 10) || 1;\n                var channels = this.buffer.numberOfChannels;\n                var c;\n                for (c = 0; c < channels; c++) {\n                  var peaks = this.splitPeaks[c];\n                  var chan = this.buffer.getChannelData(c);\n                  var i = void 0;\n                  for (i = first; i <= last; i++) {\n                    var start = ~~(i * sampleSize);\n                    var end = ~~(start + sampleSize);\n                    /**\n                     * Initialize the max and min to the first sample of this\n                     * subrange, so that even if the samples are entirely\n                     * on one side of zero, we still return the true max and\n                     * min values in the subrange.\n                     */\n\n                    var min = chan[start];\n                    var max = min;\n                    var j = void 0;\n                    for (j = start; j < end; j += sampleStep) {\n                      var value = chan[j];\n                      if (value > max) {\n                        max = value;\n                      }\n                      if (value < min) {\n                        min = value;\n                      }\n                    }\n                    peaks[2 * i] = max;\n                    peaks[2 * i + 1] = min;\n                    if (c == 0 || max > this.mergedPeaks[2 * i]) {\n                      this.mergedPeaks[2 * i] = max;\n                    }\n                    if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {\n                      this.mergedPeaks[2 * i + 1] = min;\n                    }\n                  }\n                }\n                return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n              }\n              /**\n               * Get the position from 0 to 1\n               *\n               * @return {number} Position\n               */\n            }, {\n              key: \"getPlayedPercents\",\n              value: function getPlayedPercents() {\n                return this.state.getPlayedPercents.call(this);\n              }\n              /** @private */\n            }, {\n              key: \"disconnectSource\",\n              value: function disconnectSource() {\n                if (this.source) {\n                  this.source.disconnect();\n                }\n              }\n              /**\n               * Destroy all references with WebAudio, disconnecting audio nodes and closing Audio Context\n               */\n            }, {\n              key: \"destroyWebAudio\",\n              value: function destroyWebAudio() {\n                this.disconnectFilters();\n                this.disconnectSource();\n                this.gainNode.disconnect();\n                this.scriptNode.disconnect();\n                this.analyser.disconnect(); // close the audioContext if closeAudioContext option is set to true\n\n                if (this.params.closeAudioContext) {\n                  // check if browser supports AudioContext.close()\n                  if (typeof this.ac.close === 'function' && this.ac.state != 'closed') {\n                    this.ac.close();\n                  } // clear the reference to the audiocontext\n\n                  this.ac = null; // clear the actual audiocontext, either passed as param or the\n                  // global singleton\n\n                  if (!this.params.audioContext) {\n                    window.WaveSurferAudioContext = null;\n                  } else {\n                    this.params.audioContext = null;\n                  } // clear the offlineAudioContext\n\n                  window.WaveSurferOfflineAudioContext = null;\n                }\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                if (!this.isPaused()) {\n                  this.pause();\n                }\n                this.unAll();\n                this.buffer = null;\n                this.destroyed = true;\n                this.destroyWebAudio();\n              }\n              /**\n               * Loaded a decoded audio buffer\n               *\n               * @param {Object} buffer Decoded audio buffer to load\n               */\n            }, {\n              key: \"load\",\n              value: function load(buffer) {\n                this.startPosition = 0;\n                this.lastPlay = this.ac.currentTime;\n                this.buffer = buffer;\n                this.createSource();\n              }\n              /** @private */\n            }, {\n              key: \"createSource\",\n              value: function createSource() {\n                this.disconnectSource();\n                this.source = this.ac.createBufferSource(); // adjust for old browsers\n\n                this.source.start = this.source.start || this.source.noteGrainOn;\n                this.source.stop = this.source.stop || this.source.noteOff;\n                this.source.playbackRate.setValueAtTime(this.playbackRate, this.ac.currentTime);\n                this.source.buffer = this.buffer;\n                this.source.connect(this.analyser);\n              }\n              /**\n               * @private\n               *\n               * some browsers require an explicit call to #resume before they will play back audio\n               */\n            }, {\n              key: \"resumeAudioContext\",\n              value: function resumeAudioContext() {\n                if (this.ac.state == 'suspended') {\n                  this.ac.resume && this.ac.resume();\n                }\n              }\n              /**\n               * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n               *\n               * @return {boolean} Whether or not this backend is currently paused\n               */\n            }, {\n              key: \"isPaused\",\n              value: function isPaused() {\n                return this.state !== this.states[PLAYING];\n              }\n              /**\n               * Used by `wavesurfer.getDuration()`\n               *\n               * @return {number} Duration of loaded buffer\n               */\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                if (this.explicitDuration) {\n                  return this.explicitDuration;\n                }\n                if (!this.buffer) {\n                  return 0;\n                }\n                return this.buffer.duration;\n              }\n              /**\n               * Used by `wavesurfer.seekTo()`\n               *\n               * @param {number} start Position to start at in seconds\n               * @param {number} end Position to end at in seconds\n               * @return {{start: number, end: number}} Object containing start and end\n               * positions\n               */\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(start, end) {\n                if (!this.buffer) {\n                  return;\n                }\n                this.scheduledPause = null;\n                if (start == null) {\n                  start = this.getCurrentTime();\n                  if (start >= this.getDuration()) {\n                    start = 0;\n                  }\n                }\n                if (end == null) {\n                  end = this.getDuration();\n                }\n                this.startPosition = start;\n                this.lastPlay = this.ac.currentTime;\n                if (this.state === this.states[FINISHED]) {\n                  this.setState(PAUSED);\n                }\n                return {\n                  start: start,\n                  end: end\n                };\n              }\n              /**\n               * Get the playback position in seconds\n               *\n               * @return {number} The playback position in seconds\n               */\n            }, {\n              key: \"getPlayedTime\",\n              value: function getPlayedTime() {\n                return (this.ac.currentTime - this.lastPlay) * this.playbackRate;\n              }\n              /**\n               * Plays the loaded audio region.\n               *\n               * @param {number} start Start offset in seconds, relative to the beginning\n               * of a clip.\n               * @param {number} end When to stop relative to the beginning of a clip.\n               */\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                if (!this.buffer) {\n                  return;\n                } // need to re-create source on each playback\n\n                this.createSource();\n                var adjustedTime = this.seekTo(start, end);\n                start = adjustedTime.start;\n                end = adjustedTime.end;\n                this.scheduledPause = end;\n                this.source.start(0, start);\n                this.resumeAudioContext();\n                this.setState(PLAYING);\n                this.fireEvent('play');\n              }\n              /**\n               * Pauses the loaded audio.\n               */\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.scheduledPause = null;\n                this.startPosition += this.getPlayedTime();\n                this.source && this.source.stop(0);\n                this.setState(PAUSED);\n                this.fireEvent('pause');\n              }\n              /**\n               * Returns the current time in seconds relative to the audio-clip's\n               * duration.\n               *\n               * @return {number} The current time in seconds\n               */\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.state.getCurrentTime.call(this);\n              }\n              /**\n               * Returns the current playback rate. (0=no playback, 1=normal playback)\n               *\n               * @return {number} The current playback rate\n               */\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.playbackRate;\n              }\n              /**\n               * Set the audio source playback rate.\n               *\n               * @param {number} value The playback rate to use\n               */\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(value) {\n                value = value || 1;\n                if (this.isPaused()) {\n                  this.playbackRate = value;\n                } else {\n                  this.pause();\n                  this.playbackRate = value;\n                  this.play();\n                }\n              }\n              /**\n               * Set a point in seconds for playback to stop at.\n               *\n               * @param {number} end Position to end at\n               * @version 3.3.0\n               */\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(end) {\n                this.scheduledPause = end;\n              }\n            }]);\n            return WebAudio;\n          }(util.Observer);\n          exports.default = WebAudio;\n          WebAudio.scriptBufferSize = 256;\n          module.exports = exports.default;\n\n          /***/\n        }\n\n        /******/\n      })\n    );\n  });\n});\n\nvar WaveSurfer = unwrapExports(wavesurfer);\n\n/**\n * @typedef {Object} MicrophonePluginParams\n * @property {MediaStreamConstraints} constraints The constraints parameter is a\n * MediaStreamConstaints object with two members: video and audio, describing\n * the media types requested. Either or both must be specified.\n * @property {number} bufferSize=4096 The buffer size in units of sample-frames.\n * If specified, the bufferSize must be one of the following values: `256`,\n * `512`, `1024`, `2048`, `4096`, `8192`, `16384`\n * @property {number} numberOfInputChannels=1 Integer specifying the number of\n * channels for this node's input. Values of up to 32 are supported.\n * @property {number} numberOfOutputChannels=1 Integer specifying the number of\n * channels for this node's output.\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('microphone')`\n */\n\n/**\n * Visualize microphone input in a wavesurfer instance.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import MicrophonePlugin from 'wavesurfer.microphone.js';\n *\n * // commonjs\n * var MicrophonePlugin = require('wavesurfer.microphone.js');\n *\n * // if you are using <script> tags\n * var MicrophonePlugin = window.WaveSurfer.microphone;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     MicrophonePlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nclass MicrophonePlugin {\n  /**\n   * Microphone plugin definition factory\n   *\n   * This function must be used to create a plugin definition which can be\n   * used by wavesurfer to correctly instantiate the plugin.\n   *\n   * @param  {MicrophonePluginParams} params parameters use to initialise the plugin\n   * @return {PluginDefinition} an object representing the plugin\n   */\n  static create(params) {\n    return {\n      name: 'microphone',\n      deferInit: params && params.deferInit ? params.deferInit : false,\n      params: params,\n      instance: MicrophonePlugin\n    };\n  }\n  constructor(params, ws) {\n    this.params = params;\n    this.wavesurfer = ws;\n    this.active = false;\n    this.paused = false;\n    this.browser = this.detectBrowser();\n    this.reloadBufferFunction = e => this.reloadBuffer(e);\n\n    // cross-browser getUserMedia\n    const promisifiedOldGUM = (constraints, successCallback, errorCallback) => {\n      // get a hold of getUserMedia, if present\n      const getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n      // Some browsers just don't implement it - return a rejected\n      // promise with an error to keep a consistent interface\n      if (!getUserMedia) {\n        return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n      }\n      // otherwise, wrap the call to the old navigator.getUserMedia with\n      // a Promise\n      return new Promise((successCallback, errorCallback) => {\n        getUserMedia.call(navigator, constraints, successCallback, errorCallback);\n      });\n    };\n    // Older browsers might not implement mediaDevices at all, so we set an\n    // empty object first\n    if (navigator.mediaDevices === undefined) {\n      navigator.mediaDevices = {};\n    }\n    // Some browsers partially implement mediaDevices. We can't just assign\n    // an object with getUserMedia as it would overwrite existing\n    // properties. Here, we will just add the getUserMedia property if it's\n    // missing.\n    if (navigator.mediaDevices.getUserMedia === undefined) {\n      navigator.mediaDevices.getUserMedia = promisifiedOldGUM;\n    }\n    this.constraints = this.params.constraints || {\n      video: false,\n      audio: true\n    };\n    this.bufferSize = this.params.bufferSize || 4096;\n    this.numberOfInputChannels = this.params.numberOfInputChannels || 1;\n    this.numberOfOutputChannels = this.params.numberOfOutputChannels || 1;\n    this._onBackendCreated = () => {\n      // wavesurfer's AudioContext where we'll route the mic signal to\n      this.micContext = this.wavesurfer.backend.getAudioContext();\n    };\n  }\n  init() {\n    this.wavesurfer.on('backend-created', this._onBackendCreated);\n    if (this.wavesurfer.backend) {\n      this._onBackendCreated();\n    }\n  }\n\n  /**\n   * Destroy the microphone plugin.\n   */\n  destroy() {\n    // make sure the buffer is not redrawn during\n    // cleanup and demolition of this plugin.\n    this.paused = true;\n    this.wavesurfer.un('backend-created', this._onBackendCreated);\n    this.stop();\n  }\n\n  /**\n   * Allow user to select audio input device, e.g. microphone, and\n   * start the visualization.\n   */\n  start() {\n    navigator.mediaDevices.getUserMedia(this.constraints).then(data => this.gotStream(data)).catch(data => this.deviceError(data));\n  }\n\n  /**\n   * Pause/resume visualization.\n   */\n  togglePlay() {\n    if (!this.active) {\n      // start it first\n      this.start();\n    } else {\n      // toggle paused\n      this.paused = !this.paused;\n      if (this.paused) {\n        this.pause();\n      } else {\n        this.play();\n      }\n    }\n  }\n\n  /**\n   * Play visualization.\n   */\n  play() {\n    this.paused = false;\n    this.connect();\n  }\n\n  /**\n   * Pause visualization.\n   */\n  pause() {\n    this.paused = true;\n\n    // disconnect sources so they can be used elsewhere\n    // (eg. during audio playback)\n    this.disconnect();\n  }\n\n  /**\n   * Stop the device stream and remove any remaining waveform drawing from\n   * the wavesurfer canvas.\n   */\n  stop() {\n    if (this.active) {\n      // stop visualization and device\n      this.stopDevice();\n\n      // empty last frame\n      this.wavesurfer.empty();\n    }\n  }\n\n  /**\n   * Stop the device and the visualization.\n   */\n  stopDevice() {\n    this.active = false;\n\n    // stop visualization\n    this.disconnect();\n\n    // stop stream from device\n    if (this.stream) {\n      // MediaStream.stop is deprecated since:\n      // - Firefox 44 (https://www.fxsitecompat.com/en-US/docs/2015/mediastream-stop-has-been-deprecated/)\n      // - Chrome 45 (https://developers.google.com/web/updates/2015/07/mediastream-deprecations)\n      if (this.browser.browser === 'chrome' && this.browser.version >= 45 || this.browser.browser === 'firefox' && this.browser.version >= 44 || this.browser.browser === 'edge' || this.browser.browser === 'safari') {\n        if (this.stream.getTracks) {\n          // note that this should not be a call\n          this.stream.getTracks().forEach(stream => stream.stop());\n          return;\n        }\n      }\n      this.stream.stop();\n    }\n  }\n\n  /**\n   * Connect the media sources that feed the visualization.\n   */\n  connect() {\n    if (this.stream !== undefined) {\n      // Create a local buffer for data to be copied to the Wavesurfer buffer for Edge\n      if (this.browser.browser === 'edge') {\n        this.localAudioBuffer = this.micContext.createBuffer(this.numberOfInputChannels, this.bufferSize, this.micContext.sampleRate);\n      }\n\n      // Create an AudioNode from the stream.\n      this.mediaStreamSource = this.micContext.createMediaStreamSource(this.stream);\n      this.levelChecker = this.micContext.createScriptProcessor(this.bufferSize, this.numberOfInputChannels, this.numberOfOutputChannels);\n      this.mediaStreamSource.connect(this.levelChecker);\n      this.levelChecker.connect(this.micContext.destination);\n      this.levelChecker.onaudioprocess = this.reloadBufferFunction;\n    }\n  }\n\n  /**\n   * Disconnect the media sources that feed the visualization.\n   */\n  disconnect() {\n    if (this.mediaStreamSource !== undefined) {\n      this.mediaStreamSource.disconnect();\n    }\n    if (this.levelChecker !== undefined) {\n      this.levelChecker.disconnect();\n      this.levelChecker.onaudioprocess = undefined;\n    }\n    if (this.localAudioBuffer !== undefined) {\n      this.localAudioBuffer = undefined;\n    }\n  }\n\n  /**\n   * Redraw the waveform.\n   *\n   * @param {object} event Audioprocess event\n   */\n  reloadBuffer(event) {\n    if (!this.paused) {\n      this.wavesurfer.empty();\n      if (this.browser.browser === 'edge') {\n        // copy audio data to a local audio buffer,\n        // from https://github.com/audiojs/audio-buffer-utils\n        let channel, l;\n        for (channel = 0, l = Math.min(this.localAudioBuffer.numberOfChannels, event.inputBuffer.numberOfChannels); channel < l; channel++) {\n          this.localAudioBuffer.getChannelData(channel).set(event.inputBuffer.getChannelData(channel));\n        }\n        this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer);\n      } else {\n        this.wavesurfer.loadDecodedBuffer(event.inputBuffer);\n      }\n    }\n  }\n\n  /**\n   * Audio input device is ready.\n   *\n   * @param {MediaStream} stream The microphone's media stream.\n   */\n  gotStream(stream) {\n    this.stream = stream;\n    this.active = true;\n\n    // start visualization\n    this.play();\n\n    // notify listeners\n    this.fireEvent('deviceReady', stream);\n  }\n\n  /**\n   * Device error callback.\n   *\n   * @param {string} code Error message\n   */\n  deviceError(code) {\n    // notify listeners\n    this.fireEvent('deviceError', code);\n  }\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion(uastring, expr, pos) {\n    const match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  }\n\n  /**\n   * Browser detector.\n   * @return {object} result containing browser, version and minVersion\n   *     properties.\n   */\n  detectBrowser() {\n    // Returned result object.\n    const result = {};\n    result.browser = null;\n    result.version = null;\n    result.minVersion = null;\n\n    // Non supported browser.\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n    if (navigator.mozGetUserMedia) {\n      // Firefox\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n      result.minVersion = 31;\n      return result;\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome/Chromium/Webview/Opera\n      result.browser = 'chrome';\n      result.version = this.extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      result.minVersion = 38;\n      return result;\n    } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n      // Edge\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n      result.minVersion = 10547;\n      return result;\n    } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n      // Safari\n      result.browser = 'safari';\n      result.minVersion = 11;\n      result.version = this.extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n      return result;\n    }\n\n    // Non supported browser default.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n}\n\n/**\n *  @since 4.0.0\n *\n * (Single) Region plugin class\n *\n * Must be turned into an observer before instantiating. This is done in\n * `RegionsPlugin` (main plugin class).\n *\n * @extends {Observer}\n */\nclass Region {\n  constructor(params, regionsUtils, ws) {\n    this.wavesurfer = ws;\n    this.wrapper = ws.drawer.wrapper;\n    this.util = ws.util;\n    this.style = this.util.style;\n    this.regionsUtil = regionsUtils;\n    this.id = params.id == null ? ws.util.getId() : params.id;\n    this.start = Number(params.start) || 0;\n    this.end = params.end == null ?\n    // small marker-like region\n    this.start + 4 / this.wrapper.scrollWidth * this.wavesurfer.getDuration() : Number(params.end);\n    this.resize = params.resize === undefined ? true : Boolean(params.resize);\n    this.drag = params.drag === undefined ? true : Boolean(params.drag);\n    // reflect resize and drag state of region for region-updated listener\n    this.isResizing = false;\n    this.isDragging = false;\n    this.loop = Boolean(params.loop);\n    this.color = params.color || 'rgba(0, 0, 0, 0.1)';\n    // The left and right handleStyle properties can be set to 'none' for\n    // no styling or can be assigned an object containing CSS properties.\n    this.handleStyle = params.handleStyle || {\n      left: {},\n      right: {}\n    };\n    this.handleLeftEl = null;\n    this.handleRightEl = null;\n    this.data = params.data || {};\n    this.attributes = params.attributes || {};\n    this.maxLength = params.maxLength;\n    // It assumes the minLength parameter value, or the regionsMinLength parameter value, if the first one not provided\n    this.minLength = params.minLength;\n    this._onRedraw = () => this.updateRender();\n    this.scroll = params.scroll !== false && ws.params.scrollParent;\n    this.scrollSpeed = params.scrollSpeed || 1;\n    this.scrollThreshold = params.scrollThreshold || 10;\n    // Determines whether the context menu is prevented from being opened.\n    this.preventContextMenu = params.preventContextMenu === undefined ? false : Boolean(params.preventContextMenu);\n\n    // select channel ID to set region\n    let channelIdx = params.channelIdx == null ? -1 : parseInt(params.channelIdx);\n    this.regionHeight = '100%';\n    this.marginTop = '0px';\n    if (channelIdx !== -1) {\n      let channelCount = this.wavesurfer.backend.buffer != null ? this.wavesurfer.backend.buffer.numberOfChannels : -1;\n      if (channelCount >= 0 && channelIdx < channelCount) {\n        this.regionHeight = Math.floor(1 / channelCount * 100) + '%';\n        this.marginTop = this.wavesurfer.getHeight() * channelIdx + 'px';\n      }\n    }\n    this.formatTimeCallback = params.formatTimeCallback;\n    this.edgeScrollWidth = params.edgeScrollWidth;\n    this.bindInOut();\n    this.render();\n    this.wavesurfer.on('zoom', this._onRedraw);\n    this.wavesurfer.on('redraw', this._onRedraw);\n    this.wavesurfer.fireEvent('region-created', this);\n  }\n\n  /* Update region params. */\n  update(params) {\n    if (params.start != null) {\n      this.start = Number(params.start);\n    }\n    if (params.end != null) {\n      this.end = Number(params.end);\n    }\n    if (params.loop != null) {\n      this.loop = Boolean(params.loop);\n    }\n    if (params.color != null) {\n      this.color = params.color;\n    }\n    if (params.handleStyle != null) {\n      this.handleStyle = params.handleStyle;\n    }\n    if (params.data != null) {\n      this.data = params.data;\n    }\n    if (params.resize != null) {\n      this.resize = Boolean(params.resize);\n      this.updateHandlesResize(this.resize);\n    }\n    if (params.drag != null) {\n      this.drag = Boolean(params.drag);\n    }\n    if (params.maxLength != null) {\n      this.maxLength = Number(params.maxLength);\n    }\n    if (params.minLength != null) {\n      this.minLength = Number(params.minLength);\n    }\n    if (params.attributes != null) {\n      this.attributes = params.attributes;\n    }\n    this.updateRender();\n    this.fireEvent('update');\n    this.wavesurfer.fireEvent('region-updated', this);\n  }\n\n  /* Remove a single region. */\n  remove() {\n    if (this.element) {\n      this.wrapper.removeChild(this.element);\n      this.element = null;\n      this.fireEvent('remove');\n      this.wavesurfer.un('zoom', this._onRedraw);\n      this.wavesurfer.un('redraw', this._onRedraw);\n      this.wavesurfer.fireEvent('region-removed', this);\n    }\n  }\n\n  /**\n   * Play the audio region.\n   * @param {number} start Optional offset to start playing at\n   */\n  play(start) {\n    const s = start || this.start;\n    this.wavesurfer.play(s, this.end);\n    this.fireEvent('play');\n    this.wavesurfer.fireEvent('region-play', this);\n  }\n\n  /**\n   * Play the audio region in a loop.\n   * @param {number} start Optional offset to start playing at\n   * */\n  playLoop(start) {\n    this.loop = true;\n    this.play(start);\n  }\n\n  /**\n   * Set looping on/off.\n   * @param {boolean} loop True if should play in loop\n   */\n  setLoop(loop) {\n    this.loop = loop;\n  }\n\n  /* Render a region as a DOM element. */\n  render() {\n    const regionEl = document.createElement('region');\n    regionEl.className = 'wavesurfer-region';\n    regionEl.title = this.formatTime(this.start, this.end);\n    regionEl.setAttribute('data-id', this.id);\n    for (const attrname in this.attributes) {\n      regionEl.setAttribute('data-region-' + attrname, this.attributes[attrname]);\n    }\n    this.style(regionEl, {\n      position: 'absolute',\n      zIndex: 2,\n      height: this.regionHeight,\n      top: this.marginTop\n    });\n\n    /* Resize handles */\n    if (this.resize) {\n      this.handleLeftEl = regionEl.appendChild(document.createElement('handle'));\n      this.handleRightEl = regionEl.appendChild(document.createElement('handle'));\n      this.handleLeftEl.className = 'wavesurfer-handle wavesurfer-handle-start';\n      this.handleRightEl.className = 'wavesurfer-handle wavesurfer-handle-end';\n\n      // Default CSS properties for both handles.\n      const css = {\n        cursor: 'col-resize',\n        position: 'absolute',\n        top: '0px',\n        width: '2px',\n        height: '100%',\n        backgroundColor: 'rgba(0, 0, 0, 1)'\n      };\n\n      // Merge CSS properties per handle.\n      const handleLeftCss = this.handleStyle.left !== 'none' ? Object.assign({\n        left: '0px'\n      }, css, this.handleStyle.left) : null;\n      const handleRightCss = this.handleStyle.right !== 'none' ? Object.assign({\n        right: '0px'\n      }, css, this.handleStyle.right) : null;\n      if (handleLeftCss) {\n        this.style(this.handleLeftEl, handleLeftCss);\n      }\n      if (handleRightCss) {\n        this.style(this.handleRightEl, handleRightCss);\n      }\n    }\n    this.element = this.wrapper.appendChild(regionEl);\n    this.updateRender();\n    this.bindEvents(regionEl);\n  }\n  formatTime(start, end) {\n    if (this.formatTimeCallback) {\n      return this.formatTimeCallback(start, end);\n    }\n    return (start == end ? [start] : [start, end]).map(time => [Math.floor(time % 3600 / 60),\n    // minutes\n    ('00' + Math.floor(time % 60)).slice(-2) // seconds\n    ].join(':')).join('-');\n  }\n  getWidth() {\n    return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n  }\n\n  /* Update element's position, width, color. */\n  updateRender() {\n    // duration varies during loading process, so don't overwrite important data\n    const dur = this.wavesurfer.getDuration();\n    const width = this.getWidth();\n    var startLimited = this.start;\n    var endLimited = this.end;\n    if (startLimited < 0) {\n      startLimited = 0;\n      endLimited = endLimited - startLimited;\n    }\n    if (endLimited > dur) {\n      endLimited = dur;\n      startLimited = dur - (endLimited - startLimited);\n    }\n    if (this.minLength != null) {\n      endLimited = Math.max(startLimited + this.minLength, endLimited);\n    }\n    if (this.maxLength != null) {\n      endLimited = Math.min(startLimited + this.maxLength, endLimited);\n    }\n    if (this.element != null) {\n      // Calculate the left and width values of the region such that\n      // no gaps appear between regions.\n      const left = Math.round(startLimited / dur * width);\n      const regionWidth = Math.round(endLimited / dur * width) - left;\n      this.style(this.element, {\n        left: left + 'px',\n        width: regionWidth + 'px',\n        backgroundColor: this.color,\n        cursor: this.drag ? 'move' : 'default'\n      });\n      for (const attrname in this.attributes) {\n        this.element.setAttribute('data-region-' + attrname, this.attributes[attrname]);\n      }\n      this.element.title = this.formatTime(this.start, this.end);\n    }\n  }\n\n  /* Bind audio events. */\n  bindInOut() {\n    this.firedIn = false;\n    this.firedOut = false;\n    const onProcess = time => {\n      let start = Math.round(this.start * 10) / 10;\n      let end = Math.round(this.end * 10) / 10;\n      time = Math.round(time * 10) / 10;\n      if (!this.firedOut && this.firedIn && (start > time || end <= time)) {\n        this.firedOut = true;\n        this.firedIn = false;\n        this.fireEvent('out');\n        this.wavesurfer.fireEvent('region-out', this);\n      }\n      if (!this.firedIn && start <= time && end > time) {\n        this.firedIn = true;\n        this.firedOut = false;\n        this.fireEvent('in');\n        this.wavesurfer.fireEvent('region-in', this);\n      }\n    };\n    this.wavesurfer.backend.on('audioprocess', onProcess);\n    this.on('remove', () => {\n      this.wavesurfer.backend.un('audioprocess', onProcess);\n    });\n\n    /* Loop playback. */\n    this.on('out', () => {\n      if (this.loop) {\n        const realTime = this.wavesurfer.getCurrentTime();\n        if (realTime >= this.start && realTime <= this.end) {\n          this.wavesurfer.play(this.start);\n        }\n      }\n    });\n  }\n\n  /* Bind DOM events. */\n  bindEvents() {\n    const preventContextMenu = this.preventContextMenu;\n    this.element.addEventListener('mouseenter', e => {\n      this.fireEvent('mouseenter', e);\n      this.wavesurfer.fireEvent('region-mouseenter', this, e);\n    });\n    this.element.addEventListener('mouseleave', e => {\n      this.fireEvent('mouseleave', e);\n      this.wavesurfer.fireEvent('region-mouseleave', this, e);\n    });\n    this.element.addEventListener('click', e => {\n      e.preventDefault();\n      this.fireEvent('click', e);\n      this.wavesurfer.fireEvent('region-click', this, e);\n    });\n    this.element.addEventListener('dblclick', e => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.fireEvent('dblclick', e);\n      this.wavesurfer.fireEvent('region-dblclick', this, e);\n    });\n    this.element.addEventListener('contextmenu', e => {\n      if (preventContextMenu) {\n        e.preventDefault();\n      }\n      this.fireEvent('contextmenu', e);\n      this.wavesurfer.fireEvent('region-contextmenu', this, e);\n    });\n\n    /* Drag or resize on mousemove. */\n    if (this.drag || this.resize) {\n      this.bindDragEvents();\n    }\n  }\n  bindDragEvents() {\n    const container = this.wavesurfer.drawer.container;\n    const scrollSpeed = this.scrollSpeed;\n    const scrollThreshold = this.scrollThreshold;\n    let startTime;\n    let touchId;\n    let drag;\n    let maxScroll;\n    let resize;\n    let updated = false;\n    let scrollDirection;\n    let wrapperRect;\n    let regionLeftHalfTime;\n    let regionRightHalfTime;\n\n    // Scroll when the user is dragging within the threshold\n    const edgeScroll = e => {\n      const duration = this.wavesurfer.getDuration();\n      if (!scrollDirection || !drag && !resize) {\n        return;\n      }\n      const x = e.clientX;\n      let distanceBetweenCursorAndWrapperEdge = 0;\n      let regionHalfTimeWidth = 0;\n      let adjustment = 0;\n\n      // Get the currently selected time according to the mouse position\n      let time = this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(e) * duration);\n      if (drag) {\n        // Considering the point of contact with the region while edgescrolling\n        if (scrollDirection === -1) {\n          regionHalfTimeWidth = regionLeftHalfTime * this.wavesurfer.params.minPxPerSec;\n          distanceBetweenCursorAndWrapperEdge = x - wrapperRect.left;\n        } else {\n          regionHalfTimeWidth = regionRightHalfTime * this.wavesurfer.params.minPxPerSec;\n          distanceBetweenCursorAndWrapperEdge = wrapperRect.right - x;\n        }\n      } else {\n        // Considering minLength while edgescroll\n        let minLength = this.minLength;\n        if (!minLength) {\n          minLength = 0;\n        }\n        if (resize === 'start') {\n          if (time > this.end - minLength) {\n            time = this.end - minLength;\n            adjustment = scrollSpeed * scrollDirection;\n          }\n          if (time < 0) {\n            time = 0;\n          }\n        } else if (resize === 'end') {\n          if (time < this.start + minLength) {\n            time = this.start + minLength;\n            adjustment = scrollSpeed * scrollDirection;\n          }\n          if (time > duration) {\n            time = duration;\n          }\n        }\n      }\n\n      // Don't edgescroll if region has reached min or max limit\n      if (scrollDirection === -1) {\n        if (Math.round(this.wrapper.scrollLeft) === 0) {\n          return;\n        }\n        if (Math.round(this.wrapper.scrollLeft - regionHalfTimeWidth + distanceBetweenCursorAndWrapperEdge) <= 0) {\n          return;\n        }\n      } else {\n        if (Math.round(this.wrapper.scrollLeft) === maxScroll) {\n          return;\n        }\n        if (Math.round(this.wrapper.scrollLeft + regionHalfTimeWidth - distanceBetweenCursorAndWrapperEdge) >= maxScroll) {\n          return;\n        }\n      }\n\n      // Update scroll position\n      let scrollLeft = this.wrapper.scrollLeft - adjustment + scrollSpeed * scrollDirection;\n      if (scrollDirection === -1) {\n        const calculatedLeft = Math.max(0 + regionHalfTimeWidth - distanceBetweenCursorAndWrapperEdge, scrollLeft);\n        this.wrapper.scrollLeft = scrollLeft = calculatedLeft;\n      } else {\n        const calculatedRight = Math.min(maxScroll - regionHalfTimeWidth + distanceBetweenCursorAndWrapperEdge, scrollLeft);\n        this.wrapper.scrollLeft = scrollLeft = calculatedRight;\n      }\n      const delta = time - startTime;\n      startTime = time;\n\n      // Continue dragging or resizing\n      drag ? this.onDrag(delta) : this.onResize(delta, resize);\n\n      // Repeat\n      window.requestAnimationFrame(() => {\n        edgeScroll(e);\n      });\n    };\n    const onDown = e => {\n      const duration = this.wavesurfer.getDuration();\n      if (e.touches && e.touches.length > 1) {\n        return;\n      }\n      touchId = e.targetTouches ? e.targetTouches[0].identifier : null;\n\n      // stop the event propagation, if this region is resizable or draggable\n      // and the event is therefore handled here.\n      if (this.drag || this.resize) {\n        e.stopPropagation();\n      }\n\n      // Store the selected startTime we begun dragging or resizing\n      startTime = this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(e, true) * duration);\n\n      // Store the selected point of contact when we begin dragging\n      regionLeftHalfTime = startTime - this.start;\n      regionRightHalfTime = this.end - startTime;\n\n      // Store for scroll calculations\n      maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n      wrapperRect = this.wrapper.getBoundingClientRect();\n      this.isResizing = false;\n      this.isDragging = false;\n      if (e.target.tagName.toLowerCase() === 'handle') {\n        this.isResizing = true;\n        resize = e.target.classList.contains('wavesurfer-handle-start') ? 'start' : 'end';\n      } else {\n        this.isDragging = true;\n        drag = true;\n        resize = false;\n      }\n    };\n    const onUp = e => {\n      if (e.touches && e.touches.length > 1) {\n        return;\n      }\n      if (drag || resize) {\n        this.isDragging = false;\n        this.isResizing = false;\n        drag = false;\n        scrollDirection = null;\n        resize = false;\n      }\n      if (updated) {\n        updated = false;\n        this.util.preventClick();\n        this.fireEvent('update-end', e);\n        this.wavesurfer.fireEvent('region-update-end', this, e);\n      }\n    };\n    const onMove = e => {\n      const duration = this.wavesurfer.getDuration();\n      if (e.touches && e.touches.length > 1) {\n        return;\n      }\n      if (e.targetTouches && e.targetTouches[0].identifier != touchId) {\n        return;\n      }\n      if (!drag && !resize) {\n        return;\n      }\n      let time = this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(e) * duration);\n      if (drag) {\n        // To maintain relative cursor start point while dragging\n        const maxEnd = this.wavesurfer.getDuration();\n        if (time > maxEnd - regionRightHalfTime) {\n          time = maxEnd - regionRightHalfTime;\n        }\n        if (time - regionLeftHalfTime < 0) {\n          time = regionLeftHalfTime;\n        }\n      }\n      if (resize) {\n        // To maintain relative cursor start point while resizing\n        // we have to handle for minLength\n        let minLength = this.minLength;\n        if (!minLength) {\n          minLength = 0;\n        }\n        if (resize === 'start') {\n          if (time > this.end - minLength) {\n            time = this.end - minLength;\n          }\n          if (time < 0) {\n            time = 0;\n          }\n        } else if (resize === 'end') {\n          if (time < this.start + minLength) {\n            time = this.start + minLength;\n          }\n          if (time > duration) {\n            time = duration;\n          }\n        }\n      }\n      let delta = time - startTime;\n      startTime = time;\n\n      // Drag\n      if (this.drag && drag) {\n        updated = updated || !!delta;\n        this.onDrag(delta);\n      }\n\n      // Resize\n      if (this.resize && resize) {\n        updated = updated || !!delta;\n        this.onResize(delta, resize);\n      }\n      if (this.scroll && container.clientWidth < this.wrapper.scrollWidth) {\n        // Triggering edgescroll from within edgeScrollWidth\n        if (drag) {\n          let x = e.clientX;\n\n          // Check direction\n          if (x < wrapperRect.left + this.edgeScrollWidth) {\n            scrollDirection = -1;\n          } else if (x > wrapperRect.right - this.edgeScrollWidth) {\n            scrollDirection = 1;\n          } else {\n            scrollDirection = null;\n          }\n        } else {\n          let x = e.clientX;\n\n          // Check direction\n          if (x < wrapperRect.left + this.edgeScrollWidth) {\n            scrollDirection = -1;\n          } else if (x > wrapperRect.right - this.edgeScrollWidth) {\n            scrollDirection = 1;\n          } else {\n            scrollDirection = null;\n          }\n        }\n        if (scrollDirection) {\n          edgeScroll(e);\n        }\n      }\n    };\n    this.element.addEventListener('mousedown', onDown);\n    this.element.addEventListener('touchstart', onDown);\n    document.body.addEventListener('mousemove', onMove);\n    document.body.addEventListener('touchmove', onMove);\n    document.body.addEventListener('mouseup', onUp);\n    document.body.addEventListener('touchend', onUp);\n    this.on('remove', () => {\n      document.body.removeEventListener('mouseup', onUp);\n      document.body.removeEventListener('touchend', onUp);\n      document.body.removeEventListener('mousemove', onMove);\n      document.body.removeEventListener('touchmove', onMove);\n    });\n    this.wavesurfer.on('destroy', () => {\n      document.body.removeEventListener('mouseup', onUp);\n      document.body.removeEventListener('touchend', onUp);\n    });\n  }\n  onDrag(delta) {\n    const maxEnd = this.wavesurfer.getDuration();\n    if (this.end + delta > maxEnd) {\n      delta = maxEnd - this.end;\n    }\n    if (this.start + delta < 0) {\n      delta = this.start * -1;\n    }\n    this.update({\n      start: this.start + delta,\n      end: this.end + delta\n    });\n  }\n\n  /**\n   * @example\n   * onResize(-5, 'start') // Moves the start point 5 seconds back\n   * onResize(0.5, 'end') // Moves the end point 0.5 seconds forward\n   *\n   * @param {number} delta How much to add or subtract, given in seconds\n   * @param {string} direction 'start 'or 'end'\n   */\n  onResize(delta, direction) {\n    const duration = this.wavesurfer.getDuration();\n    if (direction === 'start') {\n      // Check if changing the start by the given delta would result in the region being smaller than minLength\n      // Ignore cases where we are making the region wider rather than shrinking it\n      if (delta > 0 && this.end - (this.start + delta) < this.minLength) {\n        delta = this.end - this.minLength - this.start;\n      }\n      if (delta < 0 && this.start + delta < 0) {\n        delta = this.start * -1;\n      }\n      this.update({\n        start: Math.min(this.start + delta, this.end),\n        end: Math.max(this.start + delta, this.end)\n      });\n    } else {\n      // Check if changing the end by the given delta would result in the region being smaller than minLength\n      // Ignore cases where we are making the region wider rather than shrinking it\n      if (delta < 0 && this.end + delta - this.start < this.minLength) {\n        delta = this.start + this.minLength - this.end;\n      }\n      if (delta > 0 && this.end + delta > duration) {\n        delta = duration - this.end;\n      }\n      this.update({\n        start: Math.min(this.end + delta, this.start),\n        end: Math.max(this.end + delta, this.start)\n      });\n    }\n  }\n  updateHandlesResize(resize) {\n    const cursorStyle = resize ? 'col-resize' : 'auto';\n    this.handleLeftEl && this.style(this.handleLeftEl, {\n      cursor: cursorStyle\n    });\n    this.handleRightEl && this.style(this.handleRightEl, {\n      cursor: cursorStyle\n    });\n  }\n}\n\n/**\n *  @since 4.0.0 This class has been split\n *\n * @typedef {Object} RegionsPluginParams\n * @property {?boolean} dragSelection Enable creating regions by dragging with\n * the mouse\n * @property {?RegionParams[]} regions Regions that should be added upon\n * initialisation\n * @property {number} slop=2 The sensitivity of the mouse dragging\n * @property {?number} snapToGridInterval Snap the regions to a grid of the specified multiples in seconds\n * @property {?number} snapToGridOffset Shift the snap-to-grid by the specified seconds. May also be negative.\n * @property {?boolean} deferInit Set to true to manually call\n * @property {number[]} maxRegions Maximum number of regions that may be created by the user at one time.\n * `initPlugin('regions')`\n * @property {function} formatTimeCallback Allows custom formating for region tooltip.\n * @property {?number} edgeScrollWidth='5% from container edges' Optional width for edgeScroll to start\n */\n\n/**\n * Regions are visual overlays on waveform that can be used to play and loop\n * portions of audio. Regions can be dragged and resized.\n *\n * Visual customization is possible via CSS (using the selectors\n * `.wavesurfer-region` and `.wavesurfer-handle`).\n *\n * @implements {PluginClass}\n * @extends {Observer}\n *\n * @example\n * // es6\n * import RegionsPlugin from 'wavesurfer.regions.js';\n *\n * // commonjs\n * var RegionsPlugin = require('wavesurfer.regions.js');\n *\n * // if you are using <script> tags\n * var RegionsPlugin = window.WaveSurfer.regions;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     RegionsPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nclass RegionsPlugin {\n  /**\n   * Regions plugin definition factory\n   *\n   * This function must be used to create a plugin definition which can be\n   * used by wavesurfer to correctly instantiate the plugin.\n   *\n   * @param {RegionsPluginParams} params parameters use to initialise the plugin\n   * @return {PluginDefinition} an object representing the plugin\n   */\n  static create(params) {\n    return {\n      name: 'regions',\n      deferInit: params && params.deferInit ? params.deferInit : false,\n      params: params,\n      staticProps: {\n        addRegion(options) {\n          if (!this.initialisedPluginList.regions) {\n            this.initPlugin('regions');\n          }\n          return this.regions.add(options);\n        },\n        clearRegions() {\n          this.regions && this.regions.clear();\n        },\n        enableDragSelection(options) {\n          if (!this.initialisedPluginList.regions) {\n            this.initPlugin('regions');\n          }\n          this.regions.enableDragSelection(options);\n        },\n        disableDragSelection() {\n          this.regions.disableDragSelection();\n        }\n      },\n      instance: RegionsPlugin\n    };\n  }\n  constructor(params, ws) {\n    this.params = params;\n    this.wavesurfer = ws;\n    this.util = {\n      ...ws.util,\n      getRegionSnapToGridValue: value => {\n        return this.getRegionSnapToGridValue(value, params);\n      }\n    };\n    this.maxRegions = params.maxRegions;\n    this.regionsMinLength = params.regionsMinLength || null;\n\n    // turn the plugin instance into an observer\n    const observerPrototypeKeys = Object.getOwnPropertyNames(this.util.Observer.prototype);\n    observerPrototypeKeys.forEach(key => {\n      Region.prototype[key] = this.util.Observer.prototype[key];\n    });\n    this.wavesurfer.Region = Region;\n    this._onBackendCreated = () => {\n      this.wrapper = this.wavesurfer.drawer.wrapper;\n      if (this.params.regions) {\n        this.params.regions.forEach(region => {\n          region.edgeScrollWidth = this.params.edgeScrollWidth || this.wrapper.clientWidth * 0.05;\n          this.add(region);\n        });\n      }\n    };\n\n    // Id-based hash of regions\n    this.list = {};\n    this._onReady = () => {\n      this.wrapper = this.wavesurfer.drawer.wrapper;\n      if (this.params.dragSelection) {\n        this.enableDragSelection(this.params);\n      }\n      Object.keys(this.list).forEach(id => {\n        this.list[id].updateRender();\n      });\n    };\n  }\n  init() {\n    // Check if ws is ready\n    if (this.wavesurfer.isReady) {\n      this._onBackendCreated();\n      this._onReady();\n    } else {\n      this.wavesurfer.once('ready', this._onReady);\n      this.wavesurfer.once('backend-created', this._onBackendCreated);\n    }\n  }\n  destroy() {\n    this.wavesurfer.un('ready', this._onReady);\n    this.wavesurfer.un('backend-created', this._onBackendCreated);\n    this.disableDragSelection();\n    this.clear();\n  }\n\n  /**\n   * check to see if adding a new region would exceed maxRegions\n   * @return {boolean} whether we should proceed and create a region\n   * @private\n   */\n  wouldExceedMaxRegions() {\n    return this.maxRegions && Object.keys(this.list).length >= this.maxRegions;\n  }\n\n  /**\n   * Add a region\n   *\n   * @param {object} params Region parameters\n   * @return {Region} The created region\n   */\n  add(params) {\n    if (this.wouldExceedMaxRegions()) return null;\n    if (!params.minLength && this.regionsMinLength) {\n      params = {\n        ...params,\n        minLength: this.regionsMinLength\n      };\n    }\n    const region = new this.wavesurfer.Region(params, this.util, this.wavesurfer);\n    this.list[region.id] = region;\n    region.on('remove', () => {\n      delete this.list[region.id];\n    });\n    return region;\n  }\n\n  /**\n   * Remove all regions\n   */\n  clear() {\n    Object.keys(this.list).forEach(id => {\n      this.list[id].remove();\n    });\n  }\n  enableDragSelection(params) {\n    this.disableDragSelection();\n    const slop = params.slop || 2;\n    const container = this.wavesurfer.drawer.container;\n    const scroll = params.scroll !== false && this.wavesurfer.params.scrollParent;\n    const scrollSpeed = params.scrollSpeed || 1;\n    const scrollThreshold = params.scrollThreshold || 10;\n    let drag;\n    let duration = this.wavesurfer.getDuration();\n    let maxScroll;\n    let start;\n    let region;\n    let touchId;\n    let pxMove = 0;\n    let scrollDirection;\n    let wrapperRect;\n\n    // Scroll when the user is dragging within the threshold\n    const edgeScroll = e => {\n      if (!region || !scrollDirection) {\n        return;\n      }\n\n      // Update scroll position\n      let scrollLeft = this.wrapper.scrollLeft + scrollSpeed * scrollDirection;\n      this.wrapper.scrollLeft = scrollLeft = Math.min(maxScroll, Math.max(0, scrollLeft));\n\n      // Update range\n      const end = this.wavesurfer.drawer.handleEvent(e);\n      region.update({\n        start: Math.min(end * duration, start * duration),\n        end: Math.max(end * duration, start * duration)\n      });\n\n      // Check that there is more to scroll and repeat\n      if (scrollLeft < maxScroll && scrollLeft > 0) {\n        window.requestAnimationFrame(() => {\n          edgeScroll(e);\n        });\n      }\n    };\n    const eventDown = e => {\n      if (e.touches && e.touches.length > 1) {\n        return;\n      }\n      duration = this.wavesurfer.getDuration();\n      touchId = e.targetTouches ? e.targetTouches[0].identifier : null;\n\n      // Store for scroll calculations\n      maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n      wrapperRect = this.wrapper.getBoundingClientRect();\n      drag = true;\n      start = this.wavesurfer.drawer.handleEvent(e, true);\n      region = null;\n      scrollDirection = null;\n    };\n    this.wrapper.addEventListener('mousedown', eventDown);\n    this.wrapper.addEventListener('touchstart', eventDown);\n    this.on('disable-drag-selection', () => {\n      this.wrapper.removeEventListener('touchstart', eventDown);\n      this.wrapper.removeEventListener('mousedown', eventDown);\n    });\n    const eventUp = e => {\n      if (e.touches && e.touches.length > 1) {\n        return;\n      }\n      drag = false;\n      pxMove = 0;\n      scrollDirection = null;\n      if (region) {\n        this.util.preventClick();\n        region.fireEvent('update-end', e);\n        this.wavesurfer.fireEvent('region-update-end', region, e);\n      }\n      region = null;\n    };\n    this.wrapper.addEventListener('mouseup', eventUp);\n    this.wrapper.addEventListener('touchend', eventUp);\n    document.body.addEventListener('mouseup', eventUp);\n    document.body.addEventListener('touchend', eventUp);\n    this.on('disable-drag-selection', () => {\n      document.body.removeEventListener('mouseup', eventUp);\n      document.body.removeEventListener('touchend', eventUp);\n      this.wrapper.removeEventListener('touchend', eventUp);\n      this.wrapper.removeEventListener('mouseup', eventUp);\n    });\n    const eventMove = e => {\n      if (!drag) {\n        return;\n      }\n      if (++pxMove <= slop) {\n        return;\n      }\n      if (e.touches && e.touches.length > 1) {\n        return;\n      }\n      if (e.targetTouches && e.targetTouches[0].identifier != touchId) {\n        return;\n      }\n\n      // auto-create a region during mouse drag, unless region-count would exceed \"maxRegions\"\n      if (!region) {\n        region = this.add(params || {});\n        if (!region) return;\n      }\n      const end = this.wavesurfer.drawer.handleEvent(e);\n      const startUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(start * duration);\n      const endUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(end * duration);\n      region.update({\n        start: Math.min(endUpdate, startUpdate),\n        end: Math.max(endUpdate, startUpdate)\n      });\n\n      // If scrolling is enabled\n      if (scroll && container.clientWidth < this.wrapper.scrollWidth) {\n        // Check threshold based on mouse\n        const x = e.clientX - wrapperRect.left;\n        if (x <= scrollThreshold) {\n          scrollDirection = -1;\n        } else if (x >= wrapperRect.right - scrollThreshold) {\n          scrollDirection = 1;\n        } else {\n          scrollDirection = null;\n        }\n        scrollDirection && edgeScroll(e);\n      }\n    };\n    this.wrapper.addEventListener('mousemove', eventMove);\n    this.wrapper.addEventListener('touchmove', eventMove);\n    this.on('disable-drag-selection', () => {\n      this.wrapper.removeEventListener('touchmove', eventMove);\n      this.wrapper.removeEventListener('mousemove', eventMove);\n    });\n    this.wavesurfer.on('region-created', region => {\n      if (this.regionsMinLength) {\n        region.minLength = this.regionsMinLength;\n      }\n    });\n  }\n  disableDragSelection() {\n    this.fireEvent('disable-drag-selection');\n  }\n\n  /**\n   * Get current region\n   *\n   * The smallest region that contains the current time. If several such\n   * regions exist, take the first. Return `null` if none exist.\n   *\n   * @returns {Region} The current region\n   */\n  getCurrentRegion() {\n    const time = this.wavesurfer.getCurrentTime();\n    let min = null;\n    Object.keys(this.list).forEach(id => {\n      const cur = this.list[id];\n      if (cur.start <= time && cur.end >= time) {\n        if (!min || cur.end - cur.start < min.end - min.start) {\n          min = cur;\n        }\n      }\n    });\n    return min;\n  }\n\n  /**\n   * Match the value to the grid, if required\n   *\n   * If the regions plugin params have a snapToGridInterval set, return the\n   * value matching the nearest grid interval. If no snapToGridInterval is set,\n   * the passed value will be returned without modification.\n   *\n   * @param {number} value the value to snap to the grid, if needed\n   * @param {Object} params the regions plugin params\n   * @returns {number} value\n   */\n  getRegionSnapToGridValue(value, params) {\n    if (params.snapToGridInterval) {\n      // the regions should snap to a grid\n      const offset = params.snapToGridOffset || 0;\n      return Math.round((value - offset) / params.snapToGridInterval) * params.snapToGridInterval + offset;\n    }\n\n    // no snap-to-grid\n    return value;\n  }\n}\n\n/* eslint-disable complexity, no-redeclare, no-var, one-var */\n\n/**\n * Calculate FFT - Based on https://github.com/corbanbrook/dsp.js\n *\n * @param {Number} bufferSize Buffer size\n * @param {Number} sampleRate Sample rate\n * @param {Function} windowFunc Window function\n * @param {Number} alpha Alpha channel\n */\nfunction FFT(bufferSize, sampleRate, windowFunc, alpha) {\n  this.bufferSize = bufferSize;\n  this.sampleRate = sampleRate;\n  this.bandwidth = 2 / bufferSize * (sampleRate / 2);\n  this.sinTable = new Float32Array(bufferSize);\n  this.cosTable = new Float32Array(bufferSize);\n  this.windowValues = new Float32Array(bufferSize);\n  this.reverseTable = new Uint32Array(bufferSize);\n  this.peakBand = 0;\n  this.peak = 0;\n  var i;\n  switch (windowFunc) {\n    case 'bartlett':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = 2 / (bufferSize - 1) * ((bufferSize - 1) / 2 - Math.abs(i - (bufferSize - 1) / 2));\n      }\n      break;\n    case 'bartlettHann':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = 0.62 - 0.48 * Math.abs(i / (bufferSize - 1) - 0.5) - 0.38 * Math.cos(Math.PI * 2 * i / (bufferSize - 1));\n      }\n      break;\n    case 'blackman':\n      alpha = alpha || 0.16;\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = (1 - alpha) / 2 - 0.5 * Math.cos(Math.PI * 2 * i / (bufferSize - 1)) + alpha / 2 * Math.cos(4 * Math.PI * i / (bufferSize - 1));\n      }\n      break;\n    case 'cosine':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = Math.cos(Math.PI * i / (bufferSize - 1) - Math.PI / 2);\n      }\n      break;\n    case 'gauss':\n      alpha = alpha || 0.25;\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = Math.pow(Math.E, -0.5 * Math.pow((i - (bufferSize - 1) / 2) / (alpha * (bufferSize - 1) / 2), 2));\n      }\n      break;\n    case 'hamming':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = 0.54 - 0.46 * Math.cos(Math.PI * 2 * i / (bufferSize - 1));\n      }\n      break;\n    case 'hann':\n    case undefined:\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = 0.5 * (1 - Math.cos(Math.PI * 2 * i / (bufferSize - 1)));\n      }\n      break;\n    case 'lanczoz':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = Math.sin(Math.PI * (2 * i / (bufferSize - 1) - 1)) / (Math.PI * (2 * i / (bufferSize - 1) - 1));\n      }\n      break;\n    case 'rectangular':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = 1;\n      }\n      break;\n    case 'triangular':\n      for (i = 0; i < bufferSize; i++) {\n        this.windowValues[i] = 2 / bufferSize * (bufferSize / 2 - Math.abs(i - (bufferSize - 1) / 2));\n      }\n      break;\n    default:\n      throw Error(\"No such window function '\" + windowFunc + \"'\");\n  }\n  var limit = 1;\n  var bit = bufferSize >> 1;\n  var i;\n  while (limit < bufferSize) {\n    for (i = 0; i < limit; i++) {\n      this.reverseTable[i + limit] = this.reverseTable[i] + bit;\n    }\n    limit = limit << 1;\n    bit = bit >> 1;\n  }\n  for (i = 0; i < bufferSize; i++) {\n    this.sinTable[i] = Math.sin(-Math.PI / i);\n    this.cosTable[i] = Math.cos(-Math.PI / i);\n  }\n  this.calculateSpectrum = function (buffer) {\n    // Locally scope variables for speed up\n    var bufferSize = this.bufferSize,\n      cosTable = this.cosTable,\n      sinTable = this.sinTable,\n      reverseTable = this.reverseTable,\n      real = new Float32Array(bufferSize),\n      imag = new Float32Array(bufferSize),\n      bSi = 2 / this.bufferSize,\n      sqrt = Math.sqrt,\n      rval,\n      ival,\n      mag,\n      spectrum = new Float32Array(bufferSize / 2);\n    var k = Math.floor(Math.log(bufferSize) / Math.LN2);\n    if (Math.pow(2, k) !== bufferSize) {\n      throw 'Invalid buffer size, must be a power of 2.';\n    }\n    if (bufferSize !== buffer.length) {\n      throw 'Supplied buffer is not the same size as defined FFT. FFT Size: ' + bufferSize + ' Buffer Size: ' + buffer.length;\n    }\n    var halfSize = 1,\n      phaseShiftStepReal,\n      phaseShiftStepImag,\n      currentPhaseShiftReal,\n      currentPhaseShiftImag,\n      off,\n      tr,\n      ti,\n      tmpReal;\n    for (var i = 0; i < bufferSize; i++) {\n      real[i] = buffer[reverseTable[i]] * this.windowValues[reverseTable[i]];\n      imag[i] = 0;\n    }\n    while (halfSize < bufferSize) {\n      phaseShiftStepReal = cosTable[halfSize];\n      phaseShiftStepImag = sinTable[halfSize];\n      currentPhaseShiftReal = 1;\n      currentPhaseShiftImag = 0;\n      for (var fftStep = 0; fftStep < halfSize; fftStep++) {\n        var i = fftStep;\n        while (i < bufferSize) {\n          off = i + halfSize;\n          tr = currentPhaseShiftReal * real[off] - currentPhaseShiftImag * imag[off];\n          ti = currentPhaseShiftReal * imag[off] + currentPhaseShiftImag * real[off];\n          real[off] = real[i] - tr;\n          imag[off] = imag[i] - ti;\n          real[i] += tr;\n          imag[i] += ti;\n          i += halfSize << 1;\n        }\n        tmpReal = currentPhaseShiftReal;\n        currentPhaseShiftReal = tmpReal * phaseShiftStepReal - currentPhaseShiftImag * phaseShiftStepImag;\n        currentPhaseShiftImag = tmpReal * phaseShiftStepImag + currentPhaseShiftImag * phaseShiftStepReal;\n      }\n      halfSize = halfSize << 1;\n    }\n    for (var i = 0, N = bufferSize / 2; i < N; i++) {\n      rval = real[i];\n      ival = imag[i];\n      mag = bSi * sqrt(rval * rval + ival * ival);\n      if (mag > this.peak) {\n        this.peakBand = i;\n        this.peak = mag;\n      }\n      spectrum[i] = mag;\n    }\n    return spectrum;\n  };\n}\n\n/* eslint-enable complexity, no-redeclare, no-var, one-var */\n\n/**\n * @typedef {Object} SpectrogramPluginParams\n * @property {string|HTMLElement} container Selector of element or element in\n * which to render\n * @property {number} fftSamples=512 Number of samples to fetch to FFT. Must be\n * a power of 2.\n * @property {boolean} labels Set to true to display frequency labels.\n * @property {number} noverlap Size of the overlapping window. Must be <\n * fftSamples. Auto deduced from canvas size by default.\n * @property {string} windowFunc='hann' The window function to be used. One of\n * these: `'bartlett'`, `'bartlettHann'`, `'blackman'`, `'cosine'`, `'gauss'`,\n * `'hamming'`, `'hann'`, `'lanczoz'`, `'rectangular'`, `'triangular'`\n * @property {?number} alpha Some window functions have this extra value.\n * (Between 0 and 1)\n * @property {number} pixelRatio=wavesurfer.params.pixelRatio to control the\n * size of the spectrogram in relation with its canvas. 1 = Draw on the whole\n * canvas. 2 = Draw on a quarter (1/2 the length and 1/2 the width)\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('spectrogram')`\n * @property {?number[][]} colorMap A 256 long array of 4-element arrays.\n * Each entry should contain a float between 0 and 1 and specify\n * r, g, b, and alpha.\n */\n\n/**\n * Render a spectrogram visualisation of the audio.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import SpectrogramPlugin from 'wavesurfer.spectrogram.js';\n *\n * // commonjs\n * var SpectrogramPlugin = require('wavesurfer.spectrogram.js');\n *\n * // if you are using <script> tags\n * var SpectrogramPlugin = window.WaveSurfer.spectrogram;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     SpectrogramPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nclass SpectrogramPlugin {\n  /**\n   * Spectrogram plugin definition factory\n   *\n   * This function must be used to create a plugin definition which can be\n   * used by wavesurfer to correctly instantiate the plugin.\n   *\n   * @param  {SpectrogramPluginParams} params Parameters used to initialise the plugin\n   * @return {PluginDefinition} An object representing the plugin.\n   */\n  static create(params) {\n    return {\n      name: 'spectrogram',\n      deferInit: params && params.deferInit ? params.deferInit : false,\n      params: params,\n      staticProps: {\n        FFT: FFT\n      },\n      instance: SpectrogramPlugin\n    };\n  }\n  constructor(params, ws) {\n    this.params = params;\n    this.wavesurfer = ws;\n    this.util = ws.util;\n    this.frequenciesDataUrl = params.frequenciesDataUrl;\n    this._onScroll = e => {\n      this.updateScroll(e);\n    };\n    this._onRender = () => {\n      this.render();\n    };\n    this._onWrapperClick = e => {\n      this._wrapperClickHandler(e);\n    };\n    this._onReady = () => {\n      const drawer = this.drawer = ws.drawer;\n      this.container = 'string' == typeof params.container ? document.querySelector(params.container) : params.container;\n      if (!this.container) {\n        throw Error('No container for WaveSurfer spectrogram');\n      }\n      if (params.colorMap) {\n        if (params.colorMap.length < 256) {\n          throw new Error('Colormap must contain 256 elements');\n        }\n        for (let i = 0; i < params.colorMap.length; i++) {\n          const cmEntry = params.colorMap[i];\n          if (cmEntry.length !== 4) {\n            throw new Error('ColorMap entries must contain 4 values');\n          }\n        }\n        this.colorMap = params.colorMap;\n      } else {\n        this.colorMap = [];\n        for (let i = 0; i < 256; i++) {\n          const val = (255 - i) / 256;\n          this.colorMap.push([val, val, val, 1]);\n        }\n      }\n      this.width = drawer.width;\n      this.pixelRatio = this.params.pixelRatio || ws.params.pixelRatio;\n      this.fftSamples = this.params.fftSamples || ws.params.fftSamples || 512;\n      this.height = this.fftSamples / 2;\n      this.noverlap = params.noverlap;\n      this.windowFunc = params.windowFunc;\n      this.alpha = params.alpha;\n      this.createWrapper();\n      this.createCanvas();\n      this.render();\n      drawer.wrapper.addEventListener('scroll', this._onScroll);\n      ws.on('redraw', this._onRender);\n    };\n  }\n  init() {\n    // Check if wavesurfer is ready\n    if (this.wavesurfer.isReady) {\n      this._onReady();\n    } else {\n      this.wavesurfer.once('ready', this._onReady);\n    }\n  }\n  destroy() {\n    this.unAll();\n    this.wavesurfer.un('ready', this._onReady);\n    this.wavesurfer.un('redraw', this._onRender);\n    this.drawer && this.drawer.wrapper.removeEventListener('scroll', this._onScroll);\n    this.wavesurfer = null;\n    this.util = null;\n    this.params = null;\n    if (this.wrapper) {\n      this.wrapper.removeEventListener('click', this._onWrapperClick);\n      this.wrapper.parentNode.removeChild(this.wrapper);\n      this.wrapper = null;\n    }\n  }\n  createWrapper() {\n    const prevSpectrogram = this.container.querySelector('spectrogram');\n    if (prevSpectrogram) {\n      this.container.removeChild(prevSpectrogram);\n    }\n    const wsParams = this.wavesurfer.params;\n    this.wrapper = document.createElement('spectrogram');\n    // if labels are active\n    if (this.params.labels) {\n      const labelsEl = this.labelsEl = document.createElement('canvas');\n      labelsEl.classList.add('spec-labels');\n      this.drawer.style(labelsEl, {\n        left: 0,\n        position: 'absolute',\n        zIndex: 9,\n        height: `${this.height / this.pixelRatio}px`,\n        width: `${55 / this.pixelRatio}px`\n      });\n      this.wrapper.appendChild(labelsEl);\n      this.loadLabels('rgba(68,68,68,0.5)', '12px', '10px', '', '#fff', '#f7f7f7', 'center', '#specLabels');\n    }\n    this.drawer.style(this.wrapper, {\n      display: 'block',\n      position: 'relative',\n      userSelect: 'none',\n      webkitUserSelect: 'none',\n      height: `${this.height / this.pixelRatio}px`\n    });\n    if (wsParams.fillParent || wsParams.scrollParent) {\n      this.drawer.style(this.wrapper, {\n        width: '100%',\n        overflowX: 'hidden',\n        overflowY: 'hidden'\n      });\n    }\n    this.container.appendChild(this.wrapper);\n    this.wrapper.addEventListener('click', this._onWrapperClick);\n  }\n  _wrapperClickHandler(event) {\n    event.preventDefault();\n    const relX = 'offsetX' in event ? event.offsetX : event.layerX;\n    this.fireEvent('click', relX / this.width || 0);\n  }\n  createCanvas() {\n    const canvas = this.canvas = this.wrapper.appendChild(document.createElement('canvas'));\n    this.spectrCc = canvas.getContext('2d');\n    this.util.style(canvas, {\n      position: 'absolute',\n      zIndex: 4\n    });\n  }\n  render() {\n    this.updateCanvasStyle();\n    if (this.frequenciesDataUrl) {\n      this.loadFrequenciesData(this.frequenciesDataUrl);\n    } else {\n      this.getFrequencies(this.drawSpectrogram);\n    }\n  }\n  updateCanvasStyle() {\n    const width = Math.round(this.width / this.pixelRatio) + 'px';\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.canvas.style.width = width;\n  }\n  drawSpectrogram(frequenciesData, my) {\n    const spectrCc = my.spectrCc;\n    const length = my.wavesurfer.backend.getDuration();\n    const height = my.height;\n    const pixels = my.resample(frequenciesData);\n    const heightFactor = my.buffer ? 2 / my.buffer.numberOfChannels : 1;\n    let i;\n    let j;\n    for (i = 0; i < pixels.length; i++) {\n      for (j = 0; j < pixels[i].length; j++) {\n        const colorMap = my.colorMap[pixels[i][j]];\n        my.spectrCc.fillStyle = 'rgba(' + colorMap[0] * 256 + ', ' + colorMap[1] * 256 + ', ' + colorMap[2] * 256 + ',' + colorMap[3] + ')';\n        my.spectrCc.fillRect(i, height - j * heightFactor, 1, heightFactor);\n      }\n    }\n  }\n  getFrequencies(callback) {\n    const fftSamples = this.fftSamples;\n    const buffer = this.buffer = this.wavesurfer.backend.buffer;\n    const channelOne = buffer.getChannelData(0);\n    const bufferLength = buffer.length;\n    const sampleRate = buffer.sampleRate;\n    const frequencies = [];\n    if (!buffer) {\n      this.fireEvent('error', 'Web Audio buffer is not available');\n      return;\n    }\n    let noverlap = this.noverlap;\n    if (!noverlap) {\n      const uniqueSamplesPerPx = buffer.length / this.canvas.width;\n      noverlap = Math.max(0, Math.round(fftSamples - uniqueSamplesPerPx));\n    }\n    const fft = new FFT(fftSamples, sampleRate, this.windowFunc, this.alpha);\n    let currentOffset = 0;\n    while (currentOffset + fftSamples < channelOne.length) {\n      const segment = channelOne.slice(currentOffset, currentOffset + fftSamples);\n      const spectrum = fft.calculateSpectrum(segment);\n      const array = new Uint8Array(fftSamples / 2);\n      let j;\n      for (j = 0; j < fftSamples / 2; j++) {\n        array[j] = Math.max(-255, Math.log10(spectrum[j]) * 45);\n      }\n      frequencies.push(array);\n      currentOffset += fftSamples - noverlap;\n    }\n    callback(frequencies, this);\n  }\n  loadFrequenciesData(url) {\n    const request = this.util.fetchFile({\n      url: url\n    });\n    request.on('success', data => this.drawSpectrogram(JSON.parse(data), this));\n    request.on('error', e => this.fireEvent('error', e));\n    return request;\n  }\n  freqType(freq) {\n    return freq >= 1000 ? (freq / 1000).toFixed(1) : Math.round(freq);\n  }\n  unitType(freq) {\n    return freq >= 1000 ? 'KHz' : 'Hz';\n  }\n  loadLabels(bgFill, fontSizeFreq, fontSizeUnit, fontType, textColorFreq, textColorUnit, textAlign, container) {\n    const frequenciesHeight = this.height;\n    bgFill = bgFill || 'rgba(68,68,68,0)';\n    fontSizeFreq = fontSizeFreq || '12px';\n    fontSizeUnit = fontSizeUnit || '10px';\n    fontType = fontType || 'Helvetica';\n    textColorFreq = textColorFreq || '#fff';\n    textColorUnit = textColorUnit || '#fff';\n    textAlign = textAlign || 'center';\n    const bgWidth = 55;\n    const getMaxY = frequenciesHeight || 512;\n    const labelIndex = 5 * (getMaxY / 256);\n    const freqStart = 0;\n    const step = (this.wavesurfer.backend.ac.sampleRate / 2 - freqStart) / labelIndex;\n\n    // prepare canvas element for labels\n    const ctx = this.labelsEl.getContext('2d');\n    this.labelsEl.height = this.height;\n    this.labelsEl.width = bgWidth;\n\n    // fill background\n    ctx.fillStyle = bgFill;\n    ctx.fillRect(0, 0, bgWidth, getMaxY);\n    ctx.fill();\n    let i;\n\n    // render labels\n    for (i = 0; i <= labelIndex; i++) {\n      ctx.textAlign = textAlign;\n      ctx.textBaseline = 'middle';\n      const freq = freqStart + step * i;\n      const index = Math.round(freq / (this.sampleRate / 2) * this.fftSamples);\n      const label = this.freqType(freq);\n      const units = this.unitType(freq);\n      const yLabelOffset = 2;\n      const x = 16;\n      let y;\n      if (i == 0) {\n        y = getMaxY + i - 10;\n        // unit label\n        ctx.fillStyle = textColorUnit;\n        ctx.font = fontSizeUnit + ' ' + fontType;\n        ctx.fillText(units, x + 24, y);\n        // freq label\n        ctx.fillStyle = textColorFreq;\n        ctx.font = fontSizeFreq + ' ' + fontType;\n        ctx.fillText(label, x, y);\n      } else {\n        y = getMaxY - i * 50 + yLabelOffset;\n        // unit label\n        ctx.fillStyle = textColorUnit;\n        ctx.font = fontSizeUnit + ' ' + fontType;\n        ctx.fillText(units, x + 24, y);\n        // freq label\n        ctx.fillStyle = textColorFreq;\n        ctx.font = fontSizeFreq + ' ' + fontType;\n        ctx.fillText(label, x, y);\n      }\n    }\n  }\n  updateScroll(e) {\n    if (this.wrapper) {\n      this.wrapper.scrollLeft = e.target.scrollLeft;\n    }\n  }\n  resample(oldMatrix) {\n    const columnsNumber = this.width;\n    const newMatrix = [];\n    const oldPiece = 1 / oldMatrix.length;\n    const newPiece = 1 / columnsNumber;\n    let i;\n    for (i = 0; i < columnsNumber; i++) {\n      const column = new Array(oldMatrix[0].length);\n      let j;\n      for (j = 0; j < oldMatrix.length; j++) {\n        const oldStart = j * oldPiece;\n        const oldEnd = oldStart + oldPiece;\n        const newStart = i * newPiece;\n        const newEnd = newStart + newPiece;\n        const overlap = oldEnd <= newStart || newEnd <= oldStart ? 0 : Math.min(Math.max(oldEnd, newStart), Math.max(newEnd, oldStart)) - Math.max(Math.min(oldEnd, newStart), Math.min(newEnd, oldStart));\n        let k;\n        /* eslint-disable max-depth */\n        if (overlap > 0) {\n          for (k = 0; k < oldMatrix[0].length; k++) {\n            if (column[k] == null) {\n              column[k] = 0;\n            }\n            column[k] += overlap / newPiece * oldMatrix[j][k];\n          }\n        }\n        /* eslint-enable max-depth */\n      }\n\n      const intColumn = new Uint8Array(oldMatrix[0].length);\n      let m;\n      for (m = 0; m < oldMatrix[0].length; m++) {\n        intColumn[m] = column[m];\n      }\n      newMatrix.push(intColumn);\n    }\n    return newMatrix;\n  }\n}\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/**\n * @typedef {Object} TimelinePluginParams\n * @desc Extends the `WavesurferParams` wavesurfer was initialised with\n * @property {!string|HTMLElement} container CSS selector or HTML element where\n * the timeline should be drawn. This is the only required parameter.\n * @property {number} notchPercentHeight=90 Height of notches in percent\n * @property {string} unlabeledNotchColor='#c0c0c0' The colour of the notches\n * that do not have labels\n * @property {string} primaryColor='#000' The colour of the main notches\n * @property {string} secondaryColor='#c0c0c0' The colour of the secondary\n * notches\n * @property {string} primaryFontColor='#000' The colour of the labels next to\n * the main notches\n * @property {string} secondaryFontColor='#000' The colour of the labels next to\n * the secondary notches\n * @property {number} labelPadding=5 The padding between the label and the notch\n * @property {?number} zoomDebounce A debounce timeout to increase rendering\n * performance for large files\n * @property {string} fontFamily='Arial'\n * @property {number} fontSize=10 Font size of labels in pixels\n * @property {?number} duration Length of the track in seconds. Overrides\n * getDuration() for setting length of timeline\n * @property {function} formatTimeCallback (sec, pxPerSec) -> label\n * @property {function} timeInterval (pxPerSec) -> seconds between notches\n * @property {function} primaryLabelInterval (pxPerSec) -> cadence between\n * labels in primary color\n * @property {function} secondaryLabelInterval (pxPerSec) -> cadence between\n * labels in secondary color\n * @property {?number} offset Offset for the timeline start in seconds. May also be\n * negative.\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('timeline')`\n */\n\n/**\n * Adds a timeline to the waveform.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import TimelinePlugin from 'wavesurfer.timeline.js';\n *\n * // commonjs\n * var TimelinePlugin = require('wavesurfer.timeline.js');\n *\n * // if you are using <script> tags\n * var TimelinePlugin = window.WaveSurfer.timeline;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     TimelinePlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nvar TimelinePlugin = function () {\n  createClass(TimelinePlugin, null, [{\n    key: \"create\",\n    /**\n     * Timeline plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {TimelinePluginParams} params parameters use to initialise the plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    value: function create(params) {\n      return {\n        name: \"timeline\",\n        deferInit: params && params.deferInit ? params.deferInit : false,\n        params: params,\n        instance: TimelinePlugin\n      };\n    }\n\n    // event handlers\n    /** @private */\n\n    /**\n     * @private\n     * @returns {void}\n     */\n\n    /** @private */\n\n    /**\n     * @private\n     * @param {object} e Click event\n     */\n  }]);\n\n  /**\n   * Creates an instance of TimelinePlugin.\n   *\n   * You probably want to use TimelinePlugin.create()\n   *\n   * @param {TimelinePluginParams} params Plugin parameters\n   * @param {object} ws Wavesurfer instance\n   */\n  function TimelinePlugin(params, ws) {\n    var _this = this;\n    classCallCheck(this, TimelinePlugin);\n    _initialiseProps.call(this);\n\n    /** @private */\n    this.container = \"string\" == typeof params.container ? document.querySelector(params.container) : params.container;\n    if (!this.container) {\n      throw new Error(\"No container for wavesurfer timeline\");\n    }\n    /** @private */\n    this.wavesurfer = ws;\n    /** @private */\n    this.util = ws.util;\n    /** @private */\n    this.params = Object.assign({}, {\n      height: 20,\n      notchPercentHeight: 90,\n      labelPadding: 5,\n      unlabeledNotchColor: \"#c0c0c0\",\n      primaryColor: \"#000\",\n      secondaryColor: \"#c0c0c0\",\n      primaryFontColor: \"#000\",\n      secondaryFontColor: \"#000\",\n      fontFamily: \"Arial\",\n      fontSize: 10,\n      duration: null,\n      zoomDebounce: false,\n      formatTimeCallback: this.defaultFormatTimeCallback,\n      timeInterval: this.defaultTimeInterval,\n      primaryLabelInterval: this.defaultPrimaryLabelInterval,\n      secondaryLabelInterval: this.defaultSecondaryLabelInterval,\n      offset: 0\n    }, params);\n\n    /** @private */\n    this.canvases = [];\n    /** @private */\n    this.wrapper = null;\n    /** @private */\n    this.drawer = null;\n    /** @private */\n    this.pixelRatio = null;\n    /** @private */\n    this.maxCanvasWidth = null;\n    /** @private */\n    this.maxCanvasElementWidth = null;\n    /**\n     * This event handler has to be in the constructor function because it\n     * relies on the debounce function which is only available after\n     * instantiation\n     *\n     * Use a debounced function if `params.zoomDebounce` is defined\n     *\n     * @private\n     * @returns {void}\n     */\n    this._onZoom = this.params.zoomDebounce ? this.wavesurfer.util.debounce(function () {\n      return _this.render();\n    }, this.params.zoomDebounce) : function () {\n      return _this.render();\n    };\n  }\n\n  /**\n   * Initialisation function used by the plugin API\n   */\n\n  createClass(TimelinePlugin, [{\n    key: \"init\",\n    value: function init() {\n      // Check if ws is ready\n      if (this.wavesurfer.isReady) {\n        this._onReady();\n      } else {\n        this.wavesurfer.once(\"ready\", this._onReady);\n      }\n    }\n\n    /**\n     * Destroy function used by the plugin API\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.unAll();\n      this.wavesurfer.un(\"redraw\", this._onRedraw);\n      this.wavesurfer.un(\"zoom\", this._onZoom);\n      this.wavesurfer.un(\"ready\", this._onReady);\n      this.wavesurfer.drawer.wrapper.removeEventListener(\"scroll\", this._onScroll);\n      if (this.wrapper && this.wrapper.parentNode) {\n        this.wrapper.removeEventListener(\"click\", this._onWrapperClick);\n        this.wrapper.parentNode.removeChild(this.wrapper);\n        this.wrapper = null;\n      }\n    }\n\n    /**\n     * Create a timeline element to wrap the canvases drawn by this plugin\n     *\n     * @private\n     */\n  }, {\n    key: \"createWrapper\",\n    value: function createWrapper() {\n      var wsParams = this.wavesurfer.params;\n      this.container.innerHTML = \"\";\n      this.wrapper = this.container.appendChild(document.createElement(\"timeline\"));\n      this.util.style(this.wrapper, {\n        display: \"block\",\n        position: \"relative\",\n        userSelect: \"none\",\n        webkitUserSelect: \"none\",\n        height: this.params.height + \"px\"\n      });\n      if (wsParams.fillParent || wsParams.scrollParent) {\n        this.util.style(this.wrapper, {\n          width: \"100%\",\n          overflowX: \"hidden\",\n          overflowY: \"hidden\"\n        });\n      }\n      this.wrapper.addEventListener(\"click\", this._onWrapperClick);\n    }\n\n    /**\n     * Render the timeline (also updates the already rendered timeline)\n     *\n     * @private\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.wrapper) {\n        this.createWrapper();\n      }\n      this.updateCanvases();\n      this.updateCanvasesPositioning();\n      this.renderCanvases();\n    }\n\n    /**\n     * Add new timeline canvas\n     *\n     * @private\n     */\n  }, {\n    key: \"addCanvas\",\n    value: function addCanvas() {\n      var canvas = this.wrapper.appendChild(document.createElement(\"canvas\"));\n      this.canvases.push(canvas);\n      this.util.style(canvas, {\n        position: \"absolute\",\n        zIndex: 4\n      });\n    }\n\n    /**\n     * Remove timeline canvas\n     *\n     * @private\n     */\n  }, {\n    key: \"removeCanvas\",\n    value: function removeCanvas() {\n      var canvas = this.canvases.pop();\n      canvas.parentElement.removeChild(canvas);\n    }\n\n    /**\n     * Make sure the correct of timeline canvas elements exist and are cached in\n     * this.canvases\n     *\n     * @private\n     */\n  }, {\n    key: \"updateCanvases\",\n    value: function updateCanvases() {\n      var totalWidth = Math.round(this.drawer.wrapper.scrollWidth);\n      var requiredCanvases = Math.ceil(totalWidth / this.maxCanvasElementWidth);\n      while (this.canvases.length < requiredCanvases) {\n        this.addCanvas();\n      }\n      while (this.canvases.length > requiredCanvases) {\n        this.removeCanvas();\n      }\n    }\n\n    /**\n     * Update the dimensions and positioning style for all the timeline canvases\n     *\n     * @private\n     */\n  }, {\n    key: \"updateCanvasesPositioning\",\n    value: function updateCanvasesPositioning() {\n      var _this2 = this;\n\n      // cache length for performance\n      var canvasesLength = this.canvases.length;\n      this.canvases.forEach(function (canvas, i) {\n        // canvas width is the max element width, or if it is the last the\n        // required width\n        var canvasWidth = i === canvasesLength - 1 ? _this2.drawer.wrapper.scrollWidth - _this2.maxCanvasElementWidth * (canvasesLength - 1) : _this2.maxCanvasElementWidth;\n        // set dimensions and style\n        canvas.width = canvasWidth * _this2.pixelRatio;\n        // on certain pixel ratios the canvas appears cut off at the bottom,\n        // therefore leave 1px extra\n        canvas.height = (_this2.params.height + 1) * _this2.pixelRatio;\n        _this2.util.style(canvas, {\n          width: canvasWidth + \"px\",\n          height: _this2.params.height + \"px\",\n          left: i * _this2.maxCanvasElementWidth + \"px\"\n        });\n      });\n    }\n\n    /**\n     * Render the timeline labels and notches\n     *\n     * @private\n     */\n  }, {\n    key: \"renderCanvases\",\n    value: function renderCanvases() {\n      var _this3 = this;\n      var duration = this.wavesurfer.timeline.params.duration || this.wavesurfer.backend.getDuration();\n      if (duration <= 0) {\n        return;\n      }\n      var wsParams = this.wavesurfer.params;\n      var fontSize = this.params.fontSize * wsParams.pixelRatio;\n      var totalSeconds = parseInt(duration, 10) + 1;\n      var width = wsParams.fillParent && !wsParams.scrollParent ? this.drawer.getWidth() : this.drawer.wrapper.scrollWidth * wsParams.pixelRatio;\n      var height1 = this.params.height * this.pixelRatio;\n      var height2 = this.params.height * (this.params.notchPercentHeight / 100) * this.pixelRatio;\n      var pixelsPerSecond = width / duration;\n      var formatTime = this.params.formatTimeCallback;\n      // if parameter is function, call the function with\n      // pixelsPerSecond, otherwise simply take the value as-is\n      var intervalFnOrVal = function intervalFnOrVal(option) {\n        return typeof option === \"function\" ? option(pixelsPerSecond) : option;\n      };\n      var timeInterval = intervalFnOrVal(this.params.timeInterval);\n      var primaryLabelInterval = intervalFnOrVal(this.params.primaryLabelInterval);\n      var secondaryLabelInterval = intervalFnOrVal(this.params.secondaryLabelInterval);\n      var curPixel = pixelsPerSecond * this.params.offset;\n      var curSeconds = 0;\n      var i = void 0;\n      // build an array of position data with index, second and pixel data,\n      // this is then used multiple times below\n      var positioning = [];\n      for (i = 0; i < totalSeconds / timeInterval; i++) {\n        positioning.push([i, curSeconds, curPixel]);\n        curSeconds += timeInterval;\n        curPixel += pixelsPerSecond * timeInterval;\n      }\n\n      // iterate over each position\n      var renderPositions = function renderPositions(cb) {\n        positioning.forEach(function (pos) {\n          cb(pos[0], pos[1], pos[2]);\n        });\n      };\n\n      // render primary labels\n      this.setFillStyles(this.params.primaryColor);\n      this.setFonts(fontSize + \"px \" + this.params.fontFamily);\n      this.setFillStyles(this.params.primaryFontColor);\n      renderPositions(function (i, curSeconds, curPixel) {\n        if (i % primaryLabelInterval === 0) {\n          _this3.fillRect(curPixel, 0, 1, height1);\n          _this3.fillText(formatTime(curSeconds, pixelsPerSecond), curPixel + _this3.params.labelPadding * _this3.pixelRatio, height1);\n        }\n      });\n\n      // render secondary labels\n      this.setFillStyles(this.params.secondaryColor);\n      this.setFonts(fontSize + \"px \" + this.params.fontFamily);\n      this.setFillStyles(this.params.secondaryFontColor);\n      renderPositions(function (i, curSeconds, curPixel) {\n        if (i % secondaryLabelInterval === 0) {\n          console.log();\n          _this3.fillRect(curPixel, 0, 1, height1);\n          _this3.fillText(formatTime(curSeconds, pixelsPerSecond), curPixel + _this3.params.labelPadding * _this3.pixelRatio, height1);\n        }\n      });\n\n      // render the actual notches (when no labels are used)\n      this.setFillStyles(this.params.unlabeledNotchColor);\n      renderPositions(function (i, curSeconds, curPixel) {\n        if (i % secondaryLabelInterval !== 0 && i % primaryLabelInterval !== 0) {\n          _this3.fillRect(curPixel, 0, 1, height2);\n        }\n      });\n    }\n\n    /**\n     * Set the canvas fill style\n     *\n     * @param {DOMString|CanvasGradient|CanvasPattern} fillStyle Fill style to\n     * use\n     * @private\n     */\n  }, {\n    key: \"setFillStyles\",\n    value: function setFillStyles(fillStyle) {\n      this.canvases.forEach(function (canvas) {\n        canvas.getContext(\"2d\").fillStyle = fillStyle;\n      });\n    }\n\n    /**\n     * Set the canvas font\n     *\n     * @param {DOMString} font Font to use\n     * @private\n     */\n  }, {\n    key: \"setFonts\",\n    value: function setFonts(font) {\n      this.canvases.forEach(function (canvas) {\n        canvas.getContext(\"2d\").font = font;\n      });\n    }\n\n    /**\n     * Draw a rectangle on the canvases\n     *\n     * (it figures out the offset for each canvas)\n     *\n     * @param {number} x X-position\n     * @param {number} y Y-position\n     * @param {number} width Width\n     * @param {number} height Height\n     * @private\n     */\n  }, {\n    key: \"fillRect\",\n    value: function fillRect(x, y, width, height) {\n      var _this4 = this;\n      this.canvases.forEach(function (canvas, i) {\n        var leftOffset = i * _this4.maxCanvasWidth;\n        var intersection = {\n          x1: Math.max(x, i * _this4.maxCanvasWidth),\n          y1: y,\n          x2: Math.min(x + width, i * _this4.maxCanvasWidth + canvas.width),\n          y2: y + height\n        };\n        if (intersection.x1 < intersection.x2) {\n          canvas.getContext(\"2d\").fillRect(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1);\n        }\n      });\n    }\n\n    /**\n     * Fill a given text on the canvases\n     *\n     * @param {string} text Text to render\n     * @param {number} x X-position\n     * @param {number} y Y-position\n     * @private\n     */\n  }, {\n    key: \"fillText\",\n    value: function fillText(text, x, y) {\n      var textWidth = void 0;\n      var xOffset = 0;\n      this.canvases.forEach(function (canvas) {\n        var context = canvas.getContext(\"2d\");\n        var canvasWidth = context.canvas.width;\n        if (xOffset > x + textWidth) {\n          return;\n        }\n        if (xOffset + canvasWidth > x) {\n          textWidth = context.measureText(text).width;\n          context.fillText(text, x - xOffset, y);\n        }\n        xOffset += canvasWidth;\n      });\n    }\n\n    /**\n     * Turn the time into a suitable label for the time.\n     *\n     * @param {number} seconds Seconds to format\n     * @param {number} pxPerSec Pixels per second\n     * @returns {number} Time\n     */\n  }, {\n    key: \"defaultFormatTimeCallback\",\n    value: function defaultFormatTimeCallback(seconds, pxPerSec) {\n      if (seconds / 60 > 1) {\n        // calculate minutes and seconds from seconds count\n        var minutes = parseInt(seconds / 60, 10);\n        seconds = parseInt(seconds % 60, 10);\n        // fill up seconds with zeroes\n        seconds = seconds < 10 ? \"0\" + seconds : seconds;\n        return minutes + \":\" + seconds;\n      }\n      return Math.round(seconds * 1000) / 1000;\n    }\n\n    /**\n     * Return how many seconds should be between each notch\n     *\n     * @param {number} pxPerSec Pixels per second\n     * @returns {number} Time\n     */\n  }, {\n    key: \"defaultTimeInterval\",\n    value: function defaultTimeInterval(pxPerSec) {\n      if (pxPerSec >= 25) {\n        return 1;\n      } else if (pxPerSec * 5 >= 25) {\n        return 5;\n      } else if (pxPerSec * 15 >= 25) {\n        return 15;\n      }\n      return Math.ceil(0.5 / pxPerSec) * 60;\n    }\n\n    /**\n     * Return the cadence of notches that get labels in the primary color.\n     *\n     * @param {number} pxPerSec Pixels per second\n     * @returns {number} Cadence\n     */\n  }, {\n    key: \"defaultPrimaryLabelInterval\",\n    value: function defaultPrimaryLabelInterval(pxPerSec) {\n      if (pxPerSec >= 25) {\n        return 10;\n      } else if (pxPerSec * 5 >= 25) {\n        return 6;\n      } else if (pxPerSec * 15 >= 25) {\n        return 4;\n      }\n      return 4;\n    }\n\n    /**\n     * Return the cadence of notches that get labels in the secondary color.\n     *\n     * @param {number} pxPerSec Pixels per second\n     * @returns {number} Cadence\n     */\n  }, {\n    key: \"defaultSecondaryLabelInterval\",\n    value: function defaultSecondaryLabelInterval(pxPerSec) {\n      if (pxPerSec >= 25) {\n        return 5;\n      } else if (pxPerSec * 5 >= 25) {\n        return 2;\n      } else if (pxPerSec * 15 >= 25) {\n        return 2;\n      }\n      return 2;\n    }\n  }]);\n  return TimelinePlugin;\n}();\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n  this._onScroll = function () {\n    if (_this5.wrapper && _this5.drawer.wrapper) {\n      _this5.wrapper.scrollLeft = _this5.drawer.wrapper.scrollLeft;\n    }\n  };\n  this._onRedraw = function () {\n    return _this5.render();\n  };\n  this._onReady = function () {\n    var ws = _this5.wavesurfer;\n    _this5.drawer = ws.drawer;\n    _this5.pixelRatio = ws.drawer.params.pixelRatio;\n    _this5.maxCanvasWidth = ws.drawer.maxCanvasWidth || ws.drawer.width;\n    _this5.maxCanvasElementWidth = ws.drawer.maxCanvasElementWidth || Math.round(_this5.maxCanvasWidth / _this5.pixelRatio);\n\n    // add listeners\n    ws.drawer.wrapper.addEventListener(\"scroll\", _this5._onScroll);\n    ws.on(\"redraw\", _this5._onRedraw);\n    ws.on(\"zoom\", _this5._onZoom);\n    _this5.render();\n  };\n  this._onWrapperClick = function (e) {\n    e.preventDefault();\n    var relX = \"offsetX\" in e ? e.offsetX : e.layerX;\n    _this5.fireEvent(\"click\", relX / _this5.wrapper.scrollWidth || 0);\n  };\n};\n\n/**\n * @description Register event function\n */\nfunction registerEvent(wavesurfer, event, func) {\n  wavesurfer.on(event, func);\n}\n\n/**\n * @description Pass audio data to wavesurfer\n */\nfunction loadAudio(wavesurfer, audioFileOrElt, audioPeaks) {\n  if (audioFileOrElt instanceof window.HTMLElement) {\n    // media element\n    wavesurfer.loadMediaElement(audioFileOrElt, audioPeaks);\n  } else if (typeof audioFileOrElt === 'string') {\n    // bog-standard string is handled by load method and ajax call\n    wavesurfer.load(audioFileOrElt, audioPeaks);\n  } else if (audioFileOrElt instanceof window.Blob || audioFileOrElt instanceof window.File) {\n    // blob or file is loaded with loadBlob method\n    wavesurfer.loadBlob(audioFileOrElt, audioPeaks);\n  } else {\n    throw new Error('Wavesurfer._loadAudio expects prop audioFile\\n        to be either HTMLElement, string or file/blob');\n  }\n}\n\n/**\n * @description Capitalise the first letter of a string\n */\nfunction capitalizeFirstLetter(string) {\n  return string.split('-').map(function (part) {\n    return part.charAt(0).toUpperCase() + part.slice(1);\n  }).join('');\n}\n\n/**\n * @description Throws an error if the prop is defined and not an integer or not positive\n */\nfunction positiveIntegerProptype(props, propName, componentName) {\n  var n = props[propName];\n  if (n !== undefined && (typeof n !== 'number' || n !== parseInt(n, 10) || n < 0)) {\n    return new Error('Invalid ' + propName + ' supplied to ' + componentName + ',\\n      expected a positive integer');\n  }\n  return null;\n}\n\n/**\n * @description Receives seconds and transforms this to the position as a float 0-1\n */\nfunction _secToPos(duration, sec) {\n  return 1 / duration * sec;\n}\n\n/**\n * @description Seek to the position (in seconds)\n */\nfunction seekTo(wavesurfer, props) {\n  var duration = wavesurfer.getDuration() || props.duration;\n  var pos = _secToPos(duration, props.pos);\n  if (pos && !isNaN(pos)) {\n    if (props.autoCenter) {\n      wavesurfer.seekAndCenter(pos);\n    } else {\n      wavesurfer.seekTo(pos);\n    }\n  } else if (duration && props.pos) {\n    wavesurfer.seekTo(props.pos);\n  }\n}\n\n/**\n * @description load a media element selector or HTML element\n *              if selector, get the HTML element for it\n *              and pass to _loadAudio\n */\nfunction loadMediaElt(wavesurfer, selectorOrElt, audioPeaks) {\n  if (selectorOrElt instanceof window.HTMLElement) {\n    loadAudio(wavesurfer, selectorOrElt, audioPeaks);\n  } else {\n    if (!window.document.querySelector(selectorOrElt)) {\n      throw new Error('Media Element not found!');\n    }\n    loadAudio(wavesurfer, window.document.querySelector(selectorOrElt), audioPeaks);\n  }\n}\nvar EVENTS = ['audioprocess', 'destroy', 'error', 'finish', 'interaction', 'loading', 'mute', 'pause', 'play', 'ready', 'scroll', 'seek', 'volume', 'waveform-ready', 'zoom'];\nvar EVENT = {\n  // Fires continuously as the audio plays. Also fires on seeking.\n  AUDIO_PROCESS: EVENTS[0],\n  // When instance is destroyed.\n  DESTROY: EVENTS[1],\n  // Occurs on error. Callback will receive (string) error message.\n  ERROR: EVENTS[2],\n  // When it finishes playing.\n  FINISH: EVENTS[3],\n  // When there's interaction with the waveform.\n  INTERACTION: EVENTS[4],\n  // Fires continuously when loading via XHR or drag'n'drop. Callback will receive (integer) loading progress in percents [0..100] and (object) event target.\n  LOADING: EVENTS[5],\n  // On mute change. Callback will receive (boolean) new mute status.\n  MUTE: EVENTS[6],\n  // When audio is paused.\n  PAUSE: EVENTS[7],\n  // When playback starts.\n  PLAY: EVENTS[8],\n  // When audio is loaded, decoded and the waveform drawn. This fires before the waveform is drawn when using MediaElement, see waveform-ready.\n  READY: EVENTS[9],\n  // When the scrollbar is moved. Callback will receive a ScrollEvent object.\n  SCROLL: EVENTS[10],\n  // On seeking. Callback will receive (float) progress [0..1].\n  SEEK: EVENTS[11],\n  // On volume change. Callback will receive (integer) new volume.\n  VOLUME: EVENTS[12],\n  // Fires after the waveform is drawn when using the MediaElement backend. If you're using the WebAudio backend, you can use ready.\n  WAVEFORM_READY: EVENTS[13],\n  // On zooming. Callback will receive (integer) minPxPerSec.\n  ZOOM: EVENTS[14]\n};\nvar REGIONS_EVENTS = ['region-in', 'region-out', 'region-removed', 'region-updated', 'region-mouseenter', 'region-mouseleave', 'region-click', 'region-dblclick', 'region-update-end', 'region-play'];\nvar REGION_EVENTS = ['in', 'out', 'remove', 'update', 'update-end', 'click', 'dbclick', 'over', 'leave'];\nvar Waveform = function (_React$Component) {\n  inherits(Waveform, _React$Component);\n  function Waveform(props) {\n    classCallCheck(this, Waveform);\n    var _this = possibleConstructorReturn(this, (Waveform.__proto__ || Object.getPrototypeOf(Waveform)).call(this, props));\n    _this.state = {\n      isReady: false\n    };\n    if ((typeof WaveSurfer === \"undefined\" ? \"undefined\" : _typeof(WaveSurfer)) === undefined) {\n      throw new Error(\"WaveSurfer is undefined!\");\n    }\n    return _this;\n  }\n  createClass(Waveform, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var _props = this.props,\n        options = _props.options,\n        spectrogramOptions = _props.spectrogramOptions,\n        timelineOptions = _props.timelineOptions;\n      options.plugins = [RegionsPlugin.create()];\n      if (this.props.micCallback) {\n        options.plugins.push(MicrophonePlugin.create());\n      }\n      if (spectrogramOptions) {\n        options.plugins.push(SpectrogramPlugin.create({\n          container: spectrogramOptions.container,\n          colorMap: spectrogramOptions.colorMap,\n          pixelRatio: spectrogramOptions.pixelRatio,\n          fftSamples: spectrogramOptions.fftSamples,\n          noverlap: spectrogramOptions.noverlap,\n          windowFunc: spectrogramOptions.windowFunc,\n          alpha: spectrogramOptions.alpha,\n          deferInit: spectrogramOptions.deferInit,\n          labels: spectrogramOptions.labels\n        }));\n      }\n      if (timelineOptions) {\n        options.plugins.push(TimelinePlugin.create({\n          container: timelineOptions.container,\n          pixelRatio: timelineOptions.pixelRatio,\n          zoomDebounce: timelineOptions.zoomDebounce,\n          height: timelineOptions.height || 50,\n          duration: timelineOptions.duration,\n          notchPercentHeight: timelineOptions.notchPercentHeight,\n          timeInterval: timelineOptions.timeInterval,\n          primaryLabelInterval: timelineOptions.primaryLabelInterval,\n          secondaryLabelInterval: timelineOptions.secondaryLabelInterval,\n          offset: timelineOptions.offset,\n          primaryColor: timelineOptions.primaryColor,\n          fontSize: timelineOptions.fontSize,\n          fontFamily: timelineOptions.fontFamily,\n          primaryFontColor: timelineOptions.primaryFontColor,\n          labelPadding: timelineOptions.labelPadding,\n          unlabeledNotchColor: timelineOptions.unlabeledNotchColor\n        }));\n      }\n      this._wavesurfer = WaveSurfer.create(_extends({}, options, {\n        container: this.wavesurferEl\n      }));\n      if (this.props.micCallback) {\n        this._wavesurfer.microphone.on(\"deviceReady\", function (stream) {\n          _this2.props.micCallback({\n            stream: stream\n          });\n        });\n        this._wavesurfer.microphone.on(\"deviceError\", function (error) {\n          _this2.props.micCallback({\n            error: error\n          });\n        });\n        this.props.micCallback({\n          micInstance: this._wavesurfer.microphone\n        });\n      }\n      registerEvent(this._wavesurfer, EVENT.AUDIO_PROCESS, function (pos) {\n        if (Math.ceil(pos) !== Math.ceil(_this2.props.pos)) {\n          _this2.props.onPosChange({\n            wavesurfer: _this2._wavesurfer,\n            originalArgs: [Math.ceil(pos)]\n          });\n        }\n      });\n      registerEvent(this._wavesurfer, EVENT.SEEK, function (pos) {\n        var duration = _this2._wavesurfer.getDuration();\n        if (Math.ceil(duration * pos) !== Math.ceil(_this2.props.pos)) {\n          _this2.props.onPosChange({\n            wavesurfer: _this2._wavesurfer,\n            originalArgs: [Math.ceil(duration * pos)]\n          });\n        }\n      });\n\n      // file was loaded, wave was drawn\n      registerEvent(this._wavesurfer, EVENT.READY, function () {\n        _this2.setState({\n          isReady: true\n        });\n        if (!_this2.props.micCallback) {\n          // set initial position\n          seekTo(_this2._wavesurfer, _this2.props);\n        }\n\n        // set initial volume\n        _this2._wavesurfer.setVolume(_this2.props.volume);\n        if (_this2.props.playing) {\n          // set initial playing state\n          _this2._wavesurfer.play();\n        }\n\n        // set initial zoom\n        _this2._wavesurfer.zoom(_this2.props.zoom);\n      });\n      EVENTS.forEach(function (event) {\n        var capLetter = capitalizeFirstLetter(event);\n        var propCallback = _this2.props[\"on\" + capLetter];\n        if (propCallback) {\n          registerEvent(_this2._wavesurfer, event, function () {\n            for (var _len = arguments.length, originalArgs = Array(_len), _key = 0; _key < _len; _key++) {\n              originalArgs[_key] = arguments[_key];\n            }\n            if (event === EVENT.SEEK) {\n              var duration = _this2._wavesurfer.getDuration();\n              propCallback({\n                wavesurfer: _this2._wavesurfer,\n                pos: Math.ceil(duration * originalArgs)\n              });\n            } else {\n              propCallback(_extends({\n                wavesurfer: _this2._wavesurfer\n              }, originalArgs));\n            }\n          });\n        }\n      });\n\n      // if audioFile prop, load file\n      if (this.props.audioFile) {\n        loadAudio(this._wavesurfer, this.props.audioFile, this.props.audioPeaks);\n      }\n\n      // if mediaElt prop, load media Element\n      if (this.props.mediaElt) {\n        loadMediaElt(this._wavesurfer, this.props.mediaElt, this.props.audioPeaks);\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      // update audioFile\n      if (this.props.audioFile !== nextProps.audioFile) {\n        this.setState({\n          isReady: false\n        });\n        loadAudio(this._wavesurfer, nextProps.audioFile, nextProps.audioPeaks);\n      }\n\n      // update mediaElt\n      if (this.props.mediaElt !== nextProps.mediaElt) {\n        this.setState({\n          isReady: false\n        });\n        loadMediaElt(this._wavesurfer, nextProps.mediaElt, nextProps.audioPeaks);\n      }\n\n      // update peaks\n      if (this.props.audioPeaks !== nextProps.audioPeaks) {\n        if (nextProps.mediaElt) {\n          loadMediaElt(this._wavesurfer, nextProps.mediaElt, nextProps.audioPeaks);\n        } else {\n          loadAudio(this._wavesurfer, nextProps.audioFile, nextProps.audioPeaks);\n        }\n      }\n      if (nextProps.playing) {\n        this._wavesurfer.play();\n      } else {\n        this._wavesurfer.pause();\n      }\n\n      // update volume\n      if (this.props.volume !== nextProps.volume) {\n        this._wavesurfer.setVolume(nextProps.volume);\n      }\n\n      // update zoom\n      if (this.props.zoom !== nextProps.zoom) {\n        this._wavesurfer.zoom(nextProps.zoom);\n      }\n\n      // update audioRate\n      if (this.props.options.audioRate !== nextProps.options.audioRate) {\n        this._wavesurfer.setPlaybackRate(nextProps.options.audioRate);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Clear buffer\n      delete this._wavesurfer.backend.buffer;\n\n      // unsubscribe all listeners\n      this._wavesurfer.unAll();\n\n      // destroy wavesurfer instance\n      this._wavesurfer.destroy();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var childrenWithProps = this.props.children ? React.Children.map(this.props.children, function (child) {\n        return React.cloneElement(child, {\n          wavesurfer: _this3._wavesurfer,\n          isReady: _this3.state.isReady\n        });\n      }) : false;\n      return React.createElement(\"div\", {\n        className: \"waveform\"\n      }, React.createElement(\"div\", {\n        className: \"wave\",\n        ref: function ref(c) {\n          _this3.wavesurferEl = c;\n        }\n      }), this._wavesurfer && this.state.isReady && childrenWithProps);\n    }\n  }]);\n  return Waveform;\n}(React.Component);\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\nvar css = \".styles_reactWaves__1M36F {\\n  width: 85%;\\n  display: inline-block;\\n  text-align: center;\\n  margin: 2em auto;\\n  padding: 4px 15px 0 40px;\\n  /* width */\\n  /* Track */\\n  /* Handle */\\n  /* Handle on hover */ }\\n  .styles_reactWaves__1M36F ::-webkit-scrollbar {\\n    margin-top: 20px;\\n    width: 8px;\\n    height: 8px; }\\n  .styles_reactWaves__1M36F ::-webkit-scrollbar-track {\\n    box-shadow: inset 0 0 1px grey;\\n    border-radius: 10px; }\\n  .styles_reactWaves__1M36F ::-webkit-scrollbar-thumb {\\n    background: #4F49E2;\\n    border-radius: 10px; }\\n  .styles_reactWaves__1M36F ::-webkit-scrollbar-thumb:hover {\\n    background: rgba(79, 73, 226, 0.85); }\\n\";\nvar styles = {\n  \"reactWaves\": \"styles_reactWaves__1M36F\"\n};\nstyleInject(css);\nvar Regions = function (_React$Component) {\n  inherits(Regions, _React$Component);\n  function Regions() {\n    classCallCheck(this, Regions);\n    return possibleConstructorReturn(this, (Regions.__proto__ || Object.getPrototypeOf(Regions)).apply(this, arguments));\n  }\n  createClass(Regions, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.isReady) {\n        this._init.call(this);\n      }\n      this.props.wavesurfer.on('ready', this._init.bind(this));\n    }\n  }, {\n    key: 'UNSAFE_componentWillReceiveProps',\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      // only update if the wavesurfer instance has been ready\n      if (!this.props.isReady) {\n        return;\n      }\n\n      // cache reference to old regions\n      var oldRegions = Object.create(this.props.wavesurfer.regions.list);\n      var newRegionId = void 0;\n      var oldRegionId = void 0;\n      for (newRegionId in nextProps.regions) {\n        if ({}.hasOwnProperty.call(nextProps.regions, newRegionId)) {\n          var newRegion = nextProps.regions[newRegionId];\n\n          // remove from oldRegions\n          delete oldRegions[newRegionId];\n\n          // new regions\n          if (!this.props.wavesurfer.regions.list[newRegionId] && nextProps.wavesurfer && nextProps.wavesurfer.addRegion) {\n            this._hookUpRegionEvents(nextProps.wavesurfer.addRegion(newRegion));\n\n            // update regions\n          } else if (oldRegions[newRegionId] && (oldRegions[newRegionId].start !== newRegion.start || oldRegions[newRegionId].end !== newRegion.end)) {\n            nextProps.wavesurfer.regions.list[newRegionId].update({\n              start: newRegion.start,\n              end: newRegion.end\n            });\n          }\n        }\n      }\n\n      // remove any old regions\n      for (oldRegionId in oldRegions) {\n        if ({}.hasOwnProperty.call(oldRegions, oldRegionId)) {\n          nextProps.wavesurfer.regions.list[oldRegionId].remove();\n        }\n      }\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var _this2 = this;\n      REGION_EVENTS.forEach(function (e) {\n        _this2.props.wavesurfer.un(e);\n      });\n    }\n  }, {\n    key: '_init',\n    value: function _init() {\n      var _this3 = this;\n      var _props = this.props,\n        wavesurfer = _props.wavesurfer,\n        regions = _props.regions;\n      var newRegionId = void 0;\n      REGIONS_EVENTS.forEach(function (e) {\n        var propCallback = _this3.props['on' + capitalizeFirstLetter(e)];\n        if (!propCallback) return;\n        wavesurfer.on(e, function () {\n          for (var _len = arguments.length, originalArgs = Array(_len), _key = 0; _key < _len; _key++) {\n            originalArgs[_key] = arguments[_key];\n          }\n          propCallback({\n            wavesurfer: wavesurfer,\n            originalArgs: originalArgs\n          });\n        });\n      });\n\n      // add regions and hook up callbacks to region objects\n      for (newRegionId in regions) {\n        if ({}.hasOwnProperty.call(regions, newRegionId) && wavesurfer && wavesurfer.addRegion) {\n          this._hookUpRegionEvents(wavesurfer.addRegion(regions[newRegionId]));\n        }\n      }\n    }\n  }, {\n    key: '_hookUpRegionEvents',\n    value: function _hookUpRegionEvents(region) {\n      var _this4 = this;\n      REGION_EVENTS.forEach(function (e) {\n        var propCallback = _this4.props['onSingleRegion' + capitalizeFirstLetter(e)];\n        var wavesurfer = _this4.props.wavesurfer;\n        if (propCallback) {\n          region.on(e, function () {\n            for (var _len2 = arguments.length, originalArgs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              originalArgs[_key2] = arguments[_key2];\n            }\n            propCallback({\n              wavesurfer: wavesurfer,\n              originalArgs: originalArgs,\n              region: region\n            });\n          });\n        }\n      });\n      region.on('remove', function () {\n        REGION_EVENTS.forEach(function (e) {\n          region.un(e);\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return false;\n    }\n  }]);\n  return Regions;\n}(React.Component);\nRegions.propTypes = {\n  isReady: PropTypes.bool,\n  regions: PropTypes.object,\n  wavesurfer: PropTypes.object\n};\nRegions.defaultProps = {\n  regions: []\n};\nvar ReactWaves = function (_React$Component) {\n  inherits(ReactWaves, _React$Component);\n  function ReactWaves(props) {\n    classCallCheck(this, ReactWaves);\n    var _this = possibleConstructorReturn(this, (ReactWaves.__proto__ || Object.getPrototypeOf(ReactWaves)).call(this, props));\n    _this.onPosChange = function (e) {\n      var pos = e.originalArgs && e.originalArgs[0];\n      var duration = e.wavesurfer && e.wavesurfer.getDuration();\n      if (_this.props.onPosChange) {\n        _this.props.onPosChange(pos, e.wavesurfer);\n      }\n\n      // We always update this.state.pos, because it is used for comparison in Waveform's AUDIO_PROCESS event handler\n      if (pos && pos !== _this.state.pos) {\n        _this.setState({\n          pos: pos,\n          duration: duration\n        });\n      }\n    };\n    _this.state = {\n      pos: _this.props.pos,\n      duration: _this.props.duration\n    };\n    return _this;\n  }\n  createClass(ReactWaves, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (this.props.audioFile && nextProps.audioFile) {\n        this.setState({\n          pos: nextProps.pos,\n          duration: nextProps.duration\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: styles.reactWaves + (this.props.className ? \" \" + this.props.className : \"\")\n      }, React.createElement(Waveform, _extends({}, this.props, {\n        pos: this.state.pos,\n        duration: this.state.duration,\n        onPosChange: this.onPosChange,\n        playing: this.props.playing\n      })));\n    }\n  }]);\n  return ReactWaves;\n}(React.Component);\nReactWaves.propTypes = {\n  playing: PropTypes.bool,\n  pos: PropTypes.number,\n  audioFile: function audioFile(props, propName, componentName) {\n    var prop = props[propName];\n    if (prop && typeof prop !== \"string\" && !(prop instanceof window.Blob) && !(prop instanceof window.File)) {\n      return new Error(\"Invalid \" + propName + \" supplied to \" + componentName + \"\\n        expected either string or file/blob\");\n    }\n    return null;\n  },\n  mediaElt: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(window.HTMLElement)]),\n  audioPeaks: PropTypes.array,\n  volume: PropTypes.number,\n  zoom: PropTypes.number,\n  onPosChange: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.array]),\n  options: PropTypes.shape({\n    audioRate: PropTypes.number,\n    audioContext: PropTypes.object,\n    audioScriptProcessor: PropTypes.object,\n    autoCenter: PropTypes.bool,\n    backend: PropTypes.oneOf([\"WebAudio\", \"MediaElement\", \"MediaElementWebAudio\"]),\n    barGap: positiveIntegerProptype,\n    barHeight: positiveIntegerProptype,\n    barRadius: positiveIntegerProptype,\n    barWidth: function barWidth(props, propName, componentName) {\n      var prop = props[propName];\n      if (prop !== undefined && typeof prop !== \"number\") {\n        return new Error(\"Invalid \" + propName + \" supplied to \" + componentName + \"\\n          expected either undefined or number\");\n      }\n      return null;\n    },\n    closeAudioContext: PropTypes.bool,\n    cursorColor: PropTypes.string,\n    cursorWidth: positiveIntegerProptype,\n    fillParent: PropTypes.bool,\n    forceDecode: PropTypes.bool,\n    height: positiveIntegerProptype,\n    hideScrollbar: PropTypes.bool,\n    interact: PropTypes.bool,\n    loopSelection: PropTypes.bool,\n    maxCanvasWidth: positiveIntegerProptype,\n    mediaControls: PropTypes.bool,\n    mediaType: PropTypes.oneOf([\"audio\", \"video\"]),\n    minPxPerSec: positiveIntegerProptype,\n    normalize: PropTypes.bool,\n    partialRender: PropTypes.bool,\n    pixelRatio: PropTypes.number,\n    progressColor: PropTypes.string,\n    removeMediaElementOnDestroy: PropTypes.bool,\n    renderer: PropTypes.object,\n    responsive: PropTypes.bool,\n    scrollParent: PropTypes.bool,\n    skipLength: PropTypes.number,\n    splitChannels: PropTypes.bool,\n    waveColor: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(window.CanvasGradient)]),\n    xhr: PropTypes.object\n  }),\n  spectrogramOptions: PropTypes.object,\n  timelineOptions: PropTypes.object\n};\nReactWaves.defaultProps = {\n  audioFile: \"\",\n  volume: 1,\n  zoom: 1,\n  options: {\n    barGap: 0,\n    barHeight: 2,\n    cursorWidth: 0,\n    height: 200,\n    hideScrollbar: true,\n    progressColor: \"#EC407A\",\n    responsive: true,\n    waveColor: \"#D1D6DA\"\n  },\n  pos: 0,\n  playing: false\n};\nexport default ReactWaves;\nexport { Regions };","map":{"version":3,"names":["webpackUniversalModuleDefinition","root","factory","module","exports","commonjsGlobal","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","./node_modules/debounce/index.js","debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","arguments","callNow","clear","clearTimeout","flush","./src/drawer.canvasentry.js","default","_style","_interopRequireDefault","_getId","obj","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","_createClass","protoProps","staticProps","CanvasEntry","wave","waveCtx","progress","progressCtx","start","end","id","constructor","toLowerCase","canvasContextAttributes","initWave","element","getContext","initProgress","updateDimensions","elementWidth","totalWidth","width","height","offsetLeft","elementSize","hasProgressCanvas","clearWave","clearRect","canvas","setFillStyles","waveColor","progressColor","fillStyle","fillRects","x","y","radius","fillRectToContext","ctx","drawRoundedRect","fillRect","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","drawLines","peaks","absmax","halfH","offsetY","drawLineToContext","first","Math","round","canvasStart","canvasEnd","scale","halfOffset","absmaxHalf","peak","h","halfPixel","j","destroy","getImage","format","quality","type","_this","Promise","resolve","toBlob","toDataURL","./src/drawer.js","util","_interopRequireWildcard","_getRequireWildcardCache","WeakMap","cache","_typeof","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","set","iterator","_inherits","subClass","superClass","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","toString","e","getPrototypeOf","Drawer","_util$Observer","_super","container","params","pixelRatio","lastPos","wrapper","style","el","styles","createWrapper","appendChild","document","createElement","display","position","userSelect","webkitUserSelect","fillParent","scrollParent","overflowX","hideScrollbar","overflowY","setupWrapperEvents","handleEvent","noPrevent","preventDefault","clientX","targetTouches","bbox","getBoundingClientRect","nominalWidth","parentWidth","getWidth","rtl","right","left","scrollLeft","scrollWidth","clamp","_this2","addEventListener","scrollbarHeight","offsetHeight","clientHeight","clientY","bottom","interact","fireEvent","drawPeaks","setWidth","barWidth","drawBars","drawWave","resetScroll","recenter","percent","recenterOnPosition","half","clientWidth","maxScroll","offset","rate","autoCenterRate","max","min","getScrollX","updateSize","setHeight","_progress","minPxDelta","pos","autoCenter","newPos","autoCenterImmediately","updateProgress","unAll","parentNode","removeChild","updateCursor","channelIndex","Observer","./src/drawer.multicanvas.js","_drawer","_drawer2","MultiCanvas","_Drawer","maxCanvasWidth","maxCanvasElementWidth","canvases","progressWave","EntryClass","drawingContextAttributes","overlap","ceil","barRadius","init","createElements","zIndex","top","overflow","boxSizing","borderRightStyle","pointerEvents","addCanvas","borderRightWidth","cursorWidth","borderRightColor","cursorColor","requiredCanvases","removeCanvas","canvasWidth","lastCanvas","forEach","entry","leftOffset","push","lastEntry","parentElement","pop","_this3","frame","_this4","prepareDraw","_ref","hasMinVals","undefined","peakIndexScale","bar","gap","barGap","step","floor","barMinHeight","_this5","_ref2","reflectedPeaks","len","drawLine","_this6","_ref3","splitChannelsOptions","channelColors","startCanvas","endCanvas","intersection","x1","y1","x2","y2","hideChannel","splitChannels","filterChannels","includes","fn","drawIndex","_this7","Array","channels","filteredChannels","filter","overlay","channelPeaks","indexOf","barHeight","normalize","some","val","all","map","images","./src/mediaelement-webaudio.js","_mediaelement","_get","receiver","base","_superPropBase","MediaElementWebAudio","_MediaElement","sourceMediaElement","setPlaybackRate","audioRate","createTimer","createVolumeNode","createScriptNode","createAnalyserNode","_load","media","preload","createMediaElementSource","mediaElement","ac","connect","analyser","play","resumeAudioContext","destroyWebAudio","./src/mediaelement.js","_webaudio","MediaElement","_WebAudio","currentTime","duration","paused","playbackRate","pause","volume","mediaType","elementPosition","isMuted","buffer","onPlayEnd","mediaListeners","_setupMediaListeners","error","canplay","ended","seeked","event","volumechange","muted","keys","removeEventListener","onAudioProcess","isPaused","getCurrentTime","on","load","url","controls","mediaControls","autoplay","src","prevMedia","querySelector","loadElt","elt","HTMLMediaElement","Error","setVolume","getDuration","explicitDuration","Infinity","seekable","getPlayedPercents","getPlaybackRate","seekTo","clearPlayEnd","promise","setPlayEnd","_onPlayEnd","time","un","getPeaks","setSinkId","deviceId","reject","getVolume","setMute","destroyed","removeMediaElementOnDestroy","./src/peakcache.js","PeakCache","clearPeakCache","peakCacheRanges","peakCacheLength","addRangeToPeakCache","uncachedRanges","item","arr","concat","sort","a","b","uncachedRangePairs","getCacheRanges","peakCacheRangePairs","./src/util/clamp.js","./src/util/fetch.js","fetchFile","_observer","ProgressHandler","contentLength","response","_reader","body","getReader","total","parseInt","loaded","controller","read","then","done","onProgress","lengthComputable","close","byteLength","enqueue","catch","options","fetchHeaders","Headers","fetchRequest","Request","AbortController","requestHeaders","header","append","responseType","fetchOptions","method","headers","credentials","redirect","referrer","signal","fetch","progressAvailable","Response","ReadableStream","errMsg","ok","arrayBuffer","json","blob","text","status","./src/util/frame.js","_requestAnimationFrame","_len","_key","./src/util/get-id.js","getId","prefix","random","substring","./src/util/index.js","_max","_min","_frame","_debounce","_preventClick","_fetch","_clamp","./src/util/max.js","values","largest","./src/util/min.js","smallest","Number","./src/util/observer.js","_disabledEventEmissions","handlers","callback","splice","once","handler","setDisabledEventEmissions","eventNames","_isDisabledEventEmission","_len2","_key2","./src/util/prevent-click.js","preventClick","preventClickHandler","stopPropagation","./src/util/request-animation-frame.js","_default","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","./src/util/style.js","prop","./src/wavesurfer.js","_peakcache","_mediaelementWebaudio","WaveSurfer","wavesurfer","defaultParams","audioContext","audioScriptProcessor","backend","backgroundColor","dragSelection","desynchronized","forceDecode","loopSelection","mediaContainer","minPxPerSec","partialRender","devicePixelRatio","screen","deviceXDPI","logicalXDPI","plugins","renderer","responsive","skipLength","xhr","backends","WebAudio","assign","transform","setBackgroundColor","savedVolume","tmpEvents","currentRequest","arraybuffer","drawer","peakCache","supportsWebAudio","Backend","initialisedPluginList","isDestroyed","isReady","prevWidth","_onResize","registerPlugins","createDrawer","createBackend","createPeakCache","plugin","addPlugin","deferInit","initPlugin","getActivePlugins","pluginStaticProp","Instance","observerPrototypeKeys","getOwnPropertyNames","destroyPlugin","destroyAllPlugins","drawBuffer","newVolume","setCurrentTime","seconds","playPause","isPlaying","skipBackward","skip","skipForward","seekAndCenter","_this8","isFinite","oldScrollParent","stop","toggleMute","mute","getMute","getFilters","filters","toggleScroll","toggleInteraction","getWaveColor","setWaveColor","color","getProgressColor","setProgressColor","getBackgroundColor","background","getCursorColor","setCursorColor","getHeight","setFilteredChannels","channelIndices","newRanges","zoom","pxPerSec","loadArrayBuffer","_this9","decodeArrayBuffer","data","loadDecodedBuffer","loadBlob","_this10","reader","FileReader","readAsArrayBuffer","empty","preloadIgnoreReasons","activeReasons","reason","console","warn","join","loadBuffer","loadMediaElement","_this11","action","getArrayBuffer","setPeaks","urlOrElt","_this12","err","_this13","_this14","request","percentComplete","exportPCM","accuracy","noWindow","JSON","stringify","open","encodeURIComponent","exportImage","cancelAjax","cancel","abort","clearTmpEvents","disconnectSource","VERSION","./src/webaudio.js","_defineProperty","PLAYING","PAUSED","FINISHED","AudioContext","webkitAudioContext","getAudioContext","WaveSurferAudioContext","getOfflineAudioContext","sampleRate","WaveSurferOfflineAudioContext","OfflineAudioContext","webkitOfflineAudioContext","_this$stateBehaviors","_this$states","offlineAudioContext","stateBehaviors","addOnAudioProcess","startPosition","getPlayedTime","removeOnAudioProcess","lastPlay","scheduledPause","states","gainNode","mergedPeaks","offlineAc","scriptNode","source","splitPeaks","state","setState","setLength","disconnectFilters","disconnect","setFilter","setFilters","reduce","prev","curr","createScriptProcessor","scriptBufferSize","createJavaScriptNode","destination","onaudioprocess","createAnalyser","createGain","createGainNode","audio","Audio","dest","createMediaStreamDestination","srcObject","stream","gain","setValueAtTime","errback","decodeAudioData","numberOfChannels","newBuffer","createBuffer","sampleSize","sampleStep","chan","getChannelData","closeAudioContext","createSource","createBufferSource","noteGrainOn","noteOff","resume","adjustedTime","MicrophonePlugin","ws","active","browser","detectBrowser","reloadBufferFunction","reloadBuffer","promisifiedOldGUM","constraints","successCallback","errorCallback","getUserMedia","navigator","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","video","bufferSize","numberOfInputChannels","numberOfOutputChannels","_onBackendCreated","micContext","gotStream","deviceError","togglePlay","stopDevice","version","getTracks","localAudioBuffer","mediaStreamSource","createMediaStreamSource","levelChecker","channel","inputBuffer","code","extractVersion","uastring","expr","match","minVersion","userAgent","RTCPeerConnection","Region","regionsUtils","regionsUtil","resize","Boolean","drag","isResizing","isDragging","loop","handleStyle","handleLeftEl","handleRightEl","attributes","maxLength","minLength","_onRedraw","updateRender","scroll","scrollSpeed","scrollThreshold","preventContextMenu","channelIdx","regionHeight","marginTop","channelCount","formatTimeCallback","edgeScrollWidth","bindInOut","render","update","updateHandlesResize","remove","playLoop","setLoop","regionEl","className","title","formatTime","setAttribute","attrname","css","cursor","handleLeftCss","handleRightCss","bindEvents","slice","dur","startLimited","endLimited","regionWidth","firedIn","firedOut","onProcess","realTime","bindDragEvents","startTime","touchId","updated","scrollDirection","wrapperRect","regionLeftHalfTime","regionRightHalfTime","edgeScroll","distanceBetweenCursorAndWrapperEdge","regionHalfTimeWidth","adjustment","getRegionSnapToGridValue","calculatedLeft","calculatedRight","delta","onDrag","onResize","onDown","touches","identifier","tagName","classList","contains","onUp","onMove","maxEnd","direction","cursorStyle","RegionsPlugin","addRegion","regions","add","clearRegions","enableDragSelection","disableDragSelection","maxRegions","regionsMinLength","region","list","_onReady","wouldExceedMaxRegions","slop","pxMove","eventDown","eventUp","eventMove","startUpdate","endUpdate","getCurrentRegion","cur","snapToGridInterval","snapToGridOffset","FFT","windowFunc","alpha","bandwidth","sinTable","Float32Array","cosTable","windowValues","reverseTable","Uint32Array","peakBand","abs","cos","PI","pow","E","sin","limit","bit","calculateSpectrum","real","imag","bSi","sqrt","rval","ival","mag","spectrum","k","log","LN2","halfSize","phaseShiftStepReal","phaseShiftStepImag","currentPhaseShiftReal","currentPhaseShiftImag","off","tr","ti","tmpReal","fftStep","N","SpectrogramPlugin","frequenciesDataUrl","_onScroll","updateScroll","_onRender","_onWrapperClick","_wrapperClickHandler","colorMap","cmEntry","fftSamples","noverlap","createCanvas","prevSpectrogram","wsParams","labels","labelsEl","loadLabels","relX","offsetX","layerX","spectrCc","updateCanvasStyle","loadFrequenciesData","getFrequencies","drawSpectrogram","frequenciesData","my","pixels","resample","heightFactor","channelOne","bufferLength","frequencies","uniqueSamplesPerPx","fft","currentOffset","segment","array","Uint8Array","log10","parse","freqType","freq","toFixed","unitType","bgFill","fontSizeFreq","fontSizeUnit","fontType","textColorFreq","textColorUnit","textAlign","frequenciesHeight","bgWidth","getMaxY","labelIndex","freqStart","textBaseline","index","label","units","yLabelOffset","font","fillText","oldMatrix","columnsNumber","newMatrix","oldPiece","newPiece","column","oldStart","oldEnd","newStart","newEnd","intColumn","TimelinePlugin","classCallCheck","_initialiseProps","notchPercentHeight","labelPadding","unlabeledNotchColor","primaryColor","secondaryColor","primaryFontColor","secondaryFontColor","fontFamily","fontSize","zoomDebounce","defaultFormatTimeCallback","timeInterval","defaultTimeInterval","primaryLabelInterval","defaultPrimaryLabelInterval","secondaryLabelInterval","defaultSecondaryLabelInterval","_onZoom","innerHTML","updateCanvases","updateCanvasesPositioning","renderCanvases","canvasesLength","timeline","totalSeconds","height1","height2","pixelsPerSecond","intervalFnOrVal","option","curPixel","curSeconds","positioning","renderPositions","cb","setFonts","textWidth","xOffset","measureText","minutes","registerEvent","loadAudio","audioFileOrElt","audioPeaks","HTMLElement","Blob","File","capitalizeFirstLetter","string","split","part","charAt","toUpperCase","positiveIntegerProptype","propName","componentName","_secToPos","sec","isNaN","loadMediaElt","selectorOrElt","EVENTS","EVENT","AUDIO_PROCESS","DESTROY","ERROR","FINISH","INTERACTION","LOADING","MUTE","PAUSE","PLAY","READY","SCROLL","SEEK","VOLUME","WAVEFORM_READY","ZOOM","REGIONS_EVENTS","REGION_EVENTS","Waveform","_React$Component","possibleConstructorReturn","_props","spectrogramOptions","timelineOptions","micCallback","_wavesurfer","_extends","wavesurferEl","microphone","micInstance","onPosChange","originalArgs","playing","capLetter","propCallback","audioFile","mediaElt","nextProps","childrenWithProps","children","React","Children","child","cloneElement","ref","Component","styleInject","insertAt","head","getElementsByTagName","firstChild","insertBefore","styleSheet","cssText","createTextNode","Regions","inherits","createClass","componentDidMount","_init","UNSAFE_componentWillReceiveProps","oldRegions","newRegionId","oldRegionId","newRegion","_hookUpRegionEvents","shouldComponentUpdate","componentWillUnmount","propTypes","PropTypes","bool","defaultProps","ReactWaves","reactWaves","number","oneOfType","instanceOf","shape","oneOf","CanvasGradient"],"sources":["/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/wavesurfer.js/dist/wavesurfer.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/wavesurfer.js/src/plugin/microphone/index.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/wavesurfer.js/src/plugin/regions/region.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/wavesurfer.js/src/plugin/regions/index.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/wavesurfer.js/src/plugin/spectrogram/fft.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/wavesurfer.js/src/plugin/spectrogram/index.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/src/components/Plugins/timeline.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/src/utils/wavesurfer.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/src/models/Events.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/src/components/Waveform/index.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/node_modules/style-inject/dist/style-inject.es.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/src/components/Plugins/regions.js","/Users/murzik/Desktop/React learning/torsunov/node_modules/@dschoon/react-waves/src/index.js"],"sourcesContent":["/*!\n * wavesurfer.js 4.1.1 (2020-09-25)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/wavesurfer.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/debounce/index.js\":\n/*!****************************************!*\\\n  !*** ./node_modules/debounce/index.js ***!\n  \\****************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n\n\n/***/ }),\n\n/***/ \"./src/drawer.canvasentry.js\":\n/*!***********************************!*\\\n  !*** ./src/drawer.canvasentry.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./util/style */ \"./src/util/style.js\"));\n\nvar _getId = _interopRequireDefault(__webpack_require__(/*! ./util/get-id */ \"./src/util/get-id.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * The `CanvasEntry` class represents an element consisting of a wave `canvas`\n * and an (optional) progress wave `canvas`.\n *\n * The `MultiCanvas` renderer uses one or more `CanvasEntry` instances to\n * render a waveform, depending on the zoom level.\n */\nvar CanvasEntry = /*#__PURE__*/function () {\n  function CanvasEntry() {\n    _classCallCheck(this, CanvasEntry);\n\n    /**\n     * The wave node\n     *\n     * @type {HTMLCanvasElement}\n     */\n    this.wave = null;\n    /**\n     * The wave canvas rendering context\n     *\n     * @type {CanvasRenderingContext2D}\n     */\n\n    this.waveCtx = null;\n    /**\n     * The (optional) progress wave node\n     *\n     * @type {HTMLCanvasElement}\n     */\n\n    this.progress = null;\n    /**\n     * The (optional) progress wave canvas rendering context\n     *\n     * @type {CanvasRenderingContext2D}\n     */\n\n    this.progressCtx = null;\n    /**\n     * Start of the area the canvas should render, between 0 and 1\n     *\n     * @type {number}\n     */\n\n    this.start = 0;\n    /**\n     * End of the area the canvas should render, between 0 and 1\n     *\n     * @type {number}\n     */\n\n    this.end = 1;\n    /**\n     * Unique identifier for this entry\n     *\n     * @type {string}\n     */\n\n    this.id = (0, _getId.default)(typeof this.constructor.name !== 'undefined' ? this.constructor.name.toLowerCase() + '_' : 'canvasentry_');\n    /**\n     * Canvas 2d context attributes\n     *\n     * @type {object}\n     */\n\n    this.canvasContextAttributes = {};\n  }\n  /**\n   * Store the wave canvas element and create the 2D rendering context\n   *\n   * @param {HTMLCanvasElement} element The wave `canvas` element.\n   */\n\n\n  _createClass(CanvasEntry, [{\n    key: \"initWave\",\n    value: function initWave(element) {\n      this.wave = element;\n      this.waveCtx = this.wave.getContext('2d', this.canvasContextAttributes);\n    }\n    /**\n     * Store the progress wave canvas element and create the 2D rendering\n     * context\n     *\n     * @param {HTMLCanvasElement} element The progress wave `canvas` element.\n     */\n\n  }, {\n    key: \"initProgress\",\n    value: function initProgress(element) {\n      this.progress = element;\n      this.progressCtx = this.progress.getContext('2d', this.canvasContextAttributes);\n    }\n    /**\n     * Update the dimensions\n     *\n     * @param {number} elementWidth Width of the entry\n     * @param {number} totalWidth Total width of the multi canvas renderer\n     * @param {number} width The new width of the element\n     * @param {number} height The new height of the element\n     */\n\n  }, {\n    key: \"updateDimensions\",\n    value: function updateDimensions(elementWidth, totalWidth, width, height) {\n      // where the canvas starts and ends in the waveform, represented as a\n      // decimal between 0 and 1\n      this.start = this.wave.offsetLeft / totalWidth || 0;\n      this.end = this.start + elementWidth / totalWidth; // set wave canvas dimensions\n\n      this.wave.width = width;\n      this.wave.height = height;\n      var elementSize = {\n        width: elementWidth + 'px'\n      };\n      (0, _style.default)(this.wave, elementSize);\n\n      if (this.hasProgressCanvas) {\n        // set progress canvas dimensions\n        this.progress.width = width;\n        this.progress.height = height;\n        (0, _style.default)(this.progress, elementSize);\n      }\n    }\n    /**\n     * Clear the wave and progress rendering contexts\n     */\n\n  }, {\n    key: \"clearWave\",\n    value: function clearWave() {\n      // wave\n      this.waveCtx.clearRect(0, 0, this.waveCtx.canvas.width, this.waveCtx.canvas.height); // progress\n\n      if (this.hasProgressCanvas) {\n        this.progressCtx.clearRect(0, 0, this.progressCtx.canvas.width, this.progressCtx.canvas.height);\n      }\n    }\n    /**\n     * Set the fill styles for wave and progress\n     *\n     * @param {string} waveColor Fill color for the wave canvas\n     * @param {?string} progressColor Fill color for the progress canvas\n     */\n\n  }, {\n    key: \"setFillStyles\",\n    value: function setFillStyles(waveColor, progressColor) {\n      this.waveCtx.fillStyle = waveColor;\n\n      if (this.hasProgressCanvas) {\n        this.progressCtx.fillStyle = progressColor;\n      }\n    }\n    /**\n     * Draw a rectangle for wave and progress\n     *\n     * @param {number} x X start position\n     * @param {number} y Y start position\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n\n  }, {\n    key: \"fillRects\",\n    value: function fillRects(x, y, width, height, radius) {\n      this.fillRectToContext(this.waveCtx, x, y, width, height, radius);\n\n      if (this.hasProgressCanvas) {\n        this.fillRectToContext(this.progressCtx, x, y, width, height, radius);\n      }\n    }\n    /**\n     * Draw the actual rectangle on a `canvas` element\n     *\n     * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n     * @param {number} x X start position\n     * @param {number} y Y start position\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n\n  }, {\n    key: \"fillRectToContext\",\n    value: function fillRectToContext(ctx, x, y, width, height, radius) {\n      if (!ctx) {\n        return;\n      }\n\n      if (radius) {\n        this.drawRoundedRect(ctx, x, y, width, height, radius);\n      } else {\n        ctx.fillRect(x, y, width, height);\n      }\n    }\n    /**\n     * Draw a rounded rectangle on Canvas\n     *\n     * @param {CanvasRenderingContext2D} ctx Canvas context\n     * @param {number} x X-position of the rectangle\n     * @param {number} y Y-position of the rectangle\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     *\n     * @return {void}\n     * @example drawRoundedRect(ctx, 50, 50, 5, 10, 3)\n     */\n\n  }, {\n    key: \"drawRoundedRect\",\n    value: function drawRoundedRect(ctx, x, y, width, height, radius) {\n      if (height === 0) {\n        return;\n      } // peaks are float values from -1 to 1. Use absolute height values in\n      // order to correctly calculate rounded rectangle coordinates\n\n\n      if (height < 0) {\n        height *= -1;\n        y -= height;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x + radius, y);\n      ctx.lineTo(x + width - radius, y);\n      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n      ctx.lineTo(x + width, y + height - radius);\n      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n      ctx.lineTo(x + radius, y + height);\n      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n      ctx.lineTo(x, y + radius);\n      ctx.quadraticCurveTo(x, y, x + radius, y);\n      ctx.closePath();\n      ctx.fill();\n    }\n    /**\n     * Render the actual wave and progress lines\n     *\n     * @param {number[]} peaks Array with peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     */\n\n  }, {\n    key: \"drawLines\",\n    value: function drawLines(peaks, absmax, halfH, offsetY, start, end) {\n      this.drawLineToContext(this.waveCtx, peaks, absmax, halfH, offsetY, start, end);\n\n      if (this.hasProgressCanvas) {\n        this.drawLineToContext(this.progressCtx, peaks, absmax, halfH, offsetY, start, end);\n      }\n    }\n    /**\n     * Render the actual waveform line on a `canvas` element\n     *\n     * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n     * @param {number[]} peaks Array with peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     */\n\n  }, {\n    key: \"drawLineToContext\",\n    value: function drawLineToContext(ctx, peaks, absmax, halfH, offsetY, start, end) {\n      if (!ctx) {\n        return;\n      }\n\n      var length = peaks.length / 2;\n      var first = Math.round(length * this.start); // use one more peak value to make sure we join peaks at ends -- unless,\n      // of course, this is the last canvas\n\n      var last = Math.round(length * this.end) + 1;\n      var canvasStart = first;\n      var canvasEnd = last;\n      var scale = this.wave.width / (canvasEnd - canvasStart - 1); // optimization\n\n      var halfOffset = halfH + offsetY;\n      var absmaxHalf = absmax / halfH;\n      ctx.beginPath();\n      ctx.moveTo((canvasStart - first) * scale, halfOffset);\n      ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart] || 0) / absmaxHalf));\n      var i, peak, h;\n\n      for (i = canvasStart; i < canvasEnd; i++) {\n        peak = peaks[2 * i] || 0;\n        h = Math.round(peak / absmaxHalf);\n        ctx.lineTo((i - first) * scale + this.halfPixel, halfOffset - h);\n      } // draw the bottom edge going backwards, to make a single\n      // closed hull to fill\n\n\n      var j = canvasEnd - 1;\n\n      for (j; j >= canvasStart; j--) {\n        peak = peaks[2 * j + 1] || 0;\n        h = Math.round(peak / absmaxHalf);\n        ctx.lineTo((j - first) * scale + this.halfPixel, halfOffset - h);\n      }\n\n      ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart + 1] || 0) / absmaxHalf));\n      ctx.closePath();\n      ctx.fill();\n    }\n    /**\n     * Destroys this entry\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.waveCtx = null;\n      this.wave = null;\n      this.progressCtx = null;\n      this.progress = null;\n    }\n    /**\n     * Return image data of the wave `canvas` element\n     *\n     * When using a `type` of `'blob'`, this will return a `Promise` that\n     * resolves with a `Blob` instance.\n     *\n     * @param {string} format='image/png' An optional value of a format type.\n     * @param {number} quality=0.92 An optional value between 0 and 1.\n     * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n     * @return {string|Promise} When using the default `'dataURL'` `type` this\n     * returns a data URL. When using the `'blob'` `type` this returns a\n     * `Promise` that resolves with a `Blob` instance.\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function getImage(format, quality, type) {\n      var _this = this;\n\n      if (type === 'blob') {\n        return new Promise(function (resolve) {\n          _this.wave.toBlob(resolve, format, quality);\n        });\n      } else if (type === 'dataURL') {\n        return this.wave.toDataURL(format, quality);\n      }\n    }\n  }]);\n\n  return CanvasEntry;\n}();\n\nexports.default = CanvasEntry;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/drawer.js\":\n/*!***********************!*\\\n  !*** ./src/drawer.js ***!\n  \\***********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * Parent class for renderers\n *\n * @extends {Observer}\n */\nvar Drawer = /*#__PURE__*/function (_util$Observer) {\n  _inherits(Drawer, _util$Observer);\n\n  var _super = _createSuper(Drawer);\n\n  /**\n   * @param {HTMLElement} container The container node of the wavesurfer instance\n   * @param {WavesurferParams} params The wavesurfer initialisation options\n   */\n  function Drawer(container, params) {\n    var _this;\n\n    _classCallCheck(this, Drawer);\n\n    _this = _super.call(this);\n    _this.container = container;\n    /**\n     * @type {WavesurferParams}\n     */\n\n    _this.params = params;\n    /**\n     * The width of the renderer\n     * @type {number}\n     */\n\n    _this.width = 0;\n    /**\n     * The height of the renderer\n     * @type {number}\n     */\n\n    _this.height = params.height * _this.params.pixelRatio;\n    _this.lastPos = 0;\n    /**\n     * The `<wave>` element which is added to the container\n     * @type {HTMLElement}\n     */\n\n    _this.wrapper = null;\n    return _this;\n  }\n  /**\n   * Alias of `util.style`\n   *\n   * @param {HTMLElement} el The element that the styles will be applied to\n   * @param {Object} styles The map of propName: attribute, both are used as-is\n   * @return {HTMLElement} el\n   */\n\n\n  _createClass(Drawer, [{\n    key: \"style\",\n    value: function style(el, styles) {\n      return util.style(el, styles);\n    }\n    /**\n     * Create the wrapper `<wave>` element, style it and set up the events for\n     * interaction\n     */\n\n  }, {\n    key: \"createWrapper\",\n    value: function createWrapper() {\n      this.wrapper = this.container.appendChild(document.createElement('wave'));\n      this.style(this.wrapper, {\n        display: 'block',\n        position: 'relative',\n        userSelect: 'none',\n        webkitUserSelect: 'none',\n        height: this.params.height + 'px'\n      });\n\n      if (this.params.fillParent || this.params.scrollParent) {\n        this.style(this.wrapper, {\n          width: '100%',\n          overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',\n          overflowY: 'hidden'\n        });\n      }\n\n      this.setupWrapperEvents();\n    }\n    /**\n     * Handle click event\n     *\n     * @param {Event} e Click event\n     * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`\n     * @return {number} Playback position from 0 to 1\n     */\n\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(e, noPrevent) {\n      !noPrevent && e.preventDefault();\n      var clientX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX;\n      var bbox = this.wrapper.getBoundingClientRect();\n      var nominalWidth = this.width;\n      var parentWidth = this.getWidth();\n      var progress;\n\n      if (!this.params.fillParent && nominalWidth < parentWidth) {\n        progress = (this.params.rtl ? bbox.right - clientX : clientX - bbox.left) * (this.params.pixelRatio / nominalWidth) || 0;\n      } else {\n        progress = ((this.params.rtl ? bbox.right - clientX : clientX - bbox.left) + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;\n      }\n\n      return util.clamp(progress, 0, 1);\n    }\n  }, {\n    key: \"setupWrapperEvents\",\n    value: function setupWrapperEvents() {\n      var _this2 = this;\n\n      this.wrapper.addEventListener('click', function (e) {\n        var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;\n\n        if (scrollbarHeight !== 0) {\n          // scrollbar is visible.  Check if click was on it\n          var bbox = _this2.wrapper.getBoundingClientRect();\n\n          if (e.clientY >= bbox.bottom - scrollbarHeight) {\n            // ignore mousedown as it was on the scrollbar\n            return;\n          }\n        }\n\n        if (_this2.params.interact) {\n          _this2.fireEvent('click', e, _this2.handleEvent(e));\n        }\n      });\n      this.wrapper.addEventListener('dblclick', function (e) {\n        if (_this2.params.interact) {\n          _this2.fireEvent('dblclick', e, _this2.handleEvent(e));\n        }\n      });\n      this.wrapper.addEventListener('scroll', function (e) {\n        return _this2.fireEvent('scroll', e);\n      });\n    }\n    /**\n     * Draw peaks on the canvas\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} length The width of the area that should be drawn\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n\n  }, {\n    key: \"drawPeaks\",\n    value: function drawPeaks(peaks, length, start, end) {\n      if (!this.setWidth(length)) {\n        this.clearWave();\n      }\n\n      this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);\n    }\n    /**\n     * Scroll to the beginning\n     */\n\n  }, {\n    key: \"resetScroll\",\n    value: function resetScroll() {\n      if (this.wrapper !== null) {\n        this.wrapper.scrollLeft = 0;\n      }\n    }\n    /**\n     * Recenter the view-port at a certain percent of the waveform\n     *\n     * @param {number} percent Value from 0 to 1 on the waveform\n     */\n\n  }, {\n    key: \"recenter\",\n    value: function recenter(percent) {\n      var position = this.wrapper.scrollWidth * percent;\n      this.recenterOnPosition(position, true);\n    }\n    /**\n     * Recenter the view-port on a position, either scroll there immediately or\n     * in steps of 5 pixels\n     *\n     * @param {number} position X-offset in pixels\n     * @param {boolean} immediate Set to true to immediately scroll somewhere\n     */\n\n  }, {\n    key: \"recenterOnPosition\",\n    value: function recenterOnPosition(position, immediate) {\n      var scrollLeft = this.wrapper.scrollLeft;\n      var half = ~~(this.wrapper.clientWidth / 2);\n      var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n      var target = position - half;\n      var offset = target - scrollLeft;\n\n      if (maxScroll == 0) {\n        // no need to continue if scrollbar is not there\n        return;\n      } // if the cursor is currently visible...\n\n\n      if (!immediate && -half <= offset && offset < half) {\n        // set rate at which waveform is centered\n        var rate = this.params.autoCenterRate; // make rate depend on width of view and length of waveform\n\n        rate /= half;\n        rate *= maxScroll;\n        offset = Math.max(-rate, Math.min(rate, offset));\n        target = scrollLeft + offset;\n      } // limit target to valid range (0 to maxScroll)\n\n\n      target = Math.max(0, Math.min(maxScroll, target)); // no use attempting to scroll if we're not moving\n\n      if (target != scrollLeft) {\n        this.wrapper.scrollLeft = target;\n      }\n    }\n    /**\n     * Get the current scroll position in pixels\n     *\n     * @return {number} Horizontal scroll position in pixels\n     */\n\n  }, {\n    key: \"getScrollX\",\n    value: function getScrollX() {\n      var x = 0;\n\n      if (this.wrapper) {\n        var pixelRatio = this.params.pixelRatio;\n        x = Math.round(this.wrapper.scrollLeft * pixelRatio); // In cases of elastic scroll (safari with mouse wheel) you can\n        // scroll beyond the limits of the container\n        // Calculate and floor the scrollable extent to make sure an out\n        // of bounds value is not returned\n        // Ticket #1312\n\n        if (this.params.scrollParent) {\n          var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());\n          x = Math.min(maxScroll, Math.max(0, x));\n        }\n      }\n\n      return x;\n    }\n    /**\n     * Get the width of the container\n     *\n     * @return {number} The width of the container\n     */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return Math.round(this.container.clientWidth * this.params.pixelRatio);\n    }\n    /**\n     * Set the width of the container\n     *\n     * @param {number} width The new width of the container\n     * @return {boolean} Whether the width of the container was updated or not\n     */\n\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(width) {\n      if (this.width == width) {\n        return false;\n      }\n\n      this.width = width;\n\n      if (this.params.fillParent || this.params.scrollParent) {\n        this.style(this.wrapper, {\n          width: ''\n        });\n      } else {\n        this.style(this.wrapper, {\n          width: ~~(this.width / this.params.pixelRatio) + 'px'\n        });\n      }\n\n      this.updateSize();\n      return true;\n    }\n    /**\n     * Set the height of the container\n     *\n     * @param {number} height The new height of the container.\n     * @return {boolean} Whether the height of the container was updated or not\n     */\n\n  }, {\n    key: \"setHeight\",\n    value: function setHeight(height) {\n      if (height == this.height) {\n        return false;\n      }\n\n      this.height = height;\n      this.style(this.wrapper, {\n        height: ~~(this.height / this.params.pixelRatio) + 'px'\n      });\n      this.updateSize();\n      return true;\n    }\n    /**\n     * Called by wavesurfer when progress should be rendered\n     *\n     * @param {number} progress From 0 to 1\n     */\n\n  }, {\n    key: \"progress\",\n    value: function progress(_progress) {\n      var minPxDelta = 1 / this.params.pixelRatio;\n      var pos = Math.round(_progress * this.width) * minPxDelta;\n\n      if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n        this.lastPos = pos;\n\n        if (this.params.scrollParent && this.params.autoCenter) {\n          var newPos = ~~(this.wrapper.scrollWidth * _progress);\n          this.recenterOnPosition(newPos, this.params.autoCenterImmediately);\n        }\n\n        this.updateProgress(pos);\n      }\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.unAll();\n\n      if (this.wrapper) {\n        if (this.wrapper.parentNode == this.container) {\n          this.container.removeChild(this.wrapper);\n        }\n\n        this.wrapper = null;\n      }\n    }\n    /* Renderer-specific methods */\n\n    /**\n     * Called after cursor related params have changed.\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"updateCursor\",\n    value: function updateCursor() {}\n    /**\n     * Called when the size of the container changes so the renderer can adjust\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"updateSize\",\n    value: function updateSize() {}\n    /**\n     * Draw a waveform with bars\n     *\n     * @abstract\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n     * rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n\n  }, {\n    key: \"drawBars\",\n    value: function drawBars(peaks, channelIndex, start, end) {}\n    /**\n     * Draw a waveform\n     *\n     * @abstract\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n     * rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n\n  }, {\n    key: \"drawWave\",\n    value: function drawWave(peaks, channelIndex, start, end) {}\n    /**\n     * Clear the waveform\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"clearWave\",\n    value: function clearWave() {}\n    /**\n     * Render the new progress\n     *\n     * @abstract\n     * @param {number} position X-Offset of progress position in pixels\n     */\n\n  }, {\n    key: \"updateProgress\",\n    value: function updateProgress(position) {}\n  }]);\n\n  return Drawer;\n}(util.Observer);\n\nexports.default = Drawer;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/drawer.multicanvas.js\":\n/*!***********************************!*\\\n  !*** ./src/drawer.multicanvas.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _drawer = _interopRequireDefault(__webpack_require__(/*! ./drawer */ \"./src/drawer.js\"));\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nvar _drawer2 = _interopRequireDefault(__webpack_require__(/*! ./drawer.canvasentry */ \"./src/drawer.canvasentry.js\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * MultiCanvas renderer for wavesurfer. Is currently the default and sole\n * builtin renderer.\n *\n * A `MultiCanvas` consists of one or more `CanvasEntry` instances, depending\n * on the zoom level.\n */\nvar MultiCanvas = /*#__PURE__*/function (_Drawer) {\n  _inherits(MultiCanvas, _Drawer);\n\n  var _super = _createSuper(MultiCanvas);\n\n  /**\n   * @param {HTMLElement} container The container node of the wavesurfer instance\n   * @param {WavesurferParams} params The wavesurfer initialisation options\n   */\n  function MultiCanvas(container, params) {\n    var _this;\n\n    _classCallCheck(this, MultiCanvas);\n\n    _this = _super.call(this, container, params);\n    /**\n     * @type {number}\n     */\n\n    _this.maxCanvasWidth = params.maxCanvasWidth;\n    /**\n     * @type {number}\n     */\n\n    _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);\n    /**\n     * Whether or not the progress wave is rendered. If the `waveColor`\n     * and `progressColor` are the same color it is not.\n     *\n     * @type {boolean}\n     */\n\n    _this.hasProgressCanvas = params.waveColor != params.progressColor;\n    /**\n     * @type {number}\n     */\n\n    _this.halfPixel = 0.5 / params.pixelRatio;\n    /**\n     * List of `CanvasEntry` instances.\n     *\n     * @type {Array}\n     */\n\n    _this.canvases = [];\n    /**\n     * @type {HTMLElement}\n     */\n\n    _this.progressWave = null;\n    /**\n     * Class used to generate entries.\n     *\n     * @type {function}\n     */\n\n    _this.EntryClass = _drawer2.default;\n    /**\n     * Canvas 2d context attributes.\n     *\n     * @type {object}\n     */\n\n    _this.canvasContextAttributes = params.drawingContextAttributes;\n    /**\n     * Overlap added between entries to prevent vertical white stripes\n     * between `canvas` elements.\n     *\n     * @type {number}\n     */\n\n    _this.overlap = 2 * Math.ceil(params.pixelRatio / 2);\n    /**\n     * The radius of the wave bars. Makes bars rounded\n     *\n     * @type {number}\n     */\n\n    _this.barRadius = params.barRadius || 0;\n    return _this;\n  }\n  /**\n   * Initialize the drawer\n   */\n\n\n  _createClass(MultiCanvas, [{\n    key: \"init\",\n    value: function init() {\n      this.createWrapper();\n      this.createElements();\n    }\n    /**\n     * Create the canvas elements and style them\n     *\n     */\n\n  }, {\n    key: \"createElements\",\n    value: function createElements() {\n      this.progressWave = this.wrapper.appendChild(this.style(document.createElement('wave'), {\n        position: 'absolute',\n        zIndex: 3,\n        left: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden',\n        width: '0',\n        display: 'none',\n        boxSizing: 'border-box',\n        borderRightStyle: 'solid',\n        pointerEvents: 'none'\n      }));\n      this.addCanvas();\n      this.updateCursor();\n    }\n    /**\n     * Update cursor style\n     */\n\n  }, {\n    key: \"updateCursor\",\n    value: function updateCursor() {\n      this.style(this.progressWave, {\n        borderRightWidth: this.params.cursorWidth + 'px',\n        borderRightColor: this.params.cursorColor\n      });\n    }\n    /**\n     * Adjust to the updated size by adding or removing canvases\n     */\n\n  }, {\n    key: \"updateSize\",\n    value: function updateSize() {\n      var _this2 = this;\n\n      var totalWidth = Math.round(this.width / this.params.pixelRatio);\n      var requiredCanvases = Math.ceil(totalWidth / (this.maxCanvasElementWidth + this.overlap)); // add required canvases\n\n      while (this.canvases.length < requiredCanvases) {\n        this.addCanvas();\n      } // remove older existing canvases, if any\n\n\n      while (this.canvases.length > requiredCanvases) {\n        this.removeCanvas();\n      }\n\n      var canvasWidth = this.maxCanvasWidth + this.overlap;\n      var lastCanvas = this.canvases.length - 1;\n      this.canvases.forEach(function (entry, i) {\n        if (i == lastCanvas) {\n          canvasWidth = _this2.width - _this2.maxCanvasWidth * lastCanvas;\n        }\n\n        _this2.updateDimensions(entry, canvasWidth, _this2.height);\n\n        entry.clearWave();\n      });\n    }\n    /**\n     * Add a canvas to the canvas list\n     *\n     */\n\n  }, {\n    key: \"addCanvas\",\n    value: function addCanvas() {\n      var entry = new this.EntryClass();\n      entry.canvasContextAttributes = this.canvasContextAttributes;\n      entry.hasProgressCanvas = this.hasProgressCanvas;\n      entry.halfPixel = this.halfPixel;\n      var leftOffset = this.maxCanvasElementWidth * this.canvases.length; // wave\n\n      entry.initWave(this.wrapper.appendChild(this.style(document.createElement('canvas'), {\n        position: 'absolute',\n        zIndex: 2,\n        left: leftOffset + 'px',\n        top: 0,\n        bottom: 0,\n        height: '100%',\n        pointerEvents: 'none'\n      }))); // progress\n\n      if (this.hasProgressCanvas) {\n        entry.initProgress(this.progressWave.appendChild(this.style(document.createElement('canvas'), {\n          position: 'absolute',\n          left: leftOffset + 'px',\n          top: 0,\n          bottom: 0,\n          height: '100%'\n        })));\n      }\n\n      this.canvases.push(entry);\n    }\n    /**\n     * Pop single canvas from the list\n     *\n     */\n\n  }, {\n    key: \"removeCanvas\",\n    value: function removeCanvas() {\n      var lastEntry = this.canvases[this.canvases.length - 1]; // wave\n\n      lastEntry.wave.parentElement.removeChild(lastEntry.wave); // progress\n\n      if (this.hasProgressCanvas) {\n        lastEntry.progress.parentElement.removeChild(lastEntry.progress);\n      } // cleanup\n\n\n      if (lastEntry) {\n        lastEntry.destroy();\n        lastEntry = null;\n      }\n\n      this.canvases.pop();\n    }\n    /**\n     * Update the dimensions of a canvas element\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {number} width The new width of the element\n     * @param {number} height The new height of the element\n     */\n\n  }, {\n    key: \"updateDimensions\",\n    value: function updateDimensions(entry, width, height) {\n      var elementWidth = Math.round(width / this.params.pixelRatio);\n      var totalWidth = Math.round(this.width / this.params.pixelRatio); // update canvas dimensions\n\n      entry.updateDimensions(elementWidth, totalWidth, width, height); // style element\n\n      this.style(this.progressWave, {\n        display: 'block'\n      });\n    }\n    /**\n     * Clear the whole multi-canvas\n     */\n\n  }, {\n    key: \"clearWave\",\n    value: function clearWave() {\n      var _this3 = this;\n\n      util.frame(function () {\n        _this3.canvases.forEach(function (entry) {\n          return entry.clearWave();\n        });\n      })();\n    }\n    /**\n     * Draw a waveform with bars\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0. Must be an integer.\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     * @returns {void}\n     */\n\n  }, {\n    key: \"drawBars\",\n    value: function drawBars(peaks, channelIndex, start, end) {\n      var _this4 = this;\n\n      return this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {\n        var absmax = _ref.absmax,\n            hasMinVals = _ref.hasMinVals,\n            height = _ref.height,\n            offsetY = _ref.offsetY,\n            halfH = _ref.halfH,\n            peaks = _ref.peaks;\n\n        // if drawBars was called within ws.empty we don't pass a start and\n        // don't want anything to happen\n        if (start === undefined) {\n          return;\n        } // Skip every other value if there are negatives.\n\n\n        var peakIndexScale = hasMinVals ? 2 : 1;\n        var length = peaks.length / peakIndexScale;\n        var bar = _this4.params.barWidth * _this4.params.pixelRatio;\n        var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);\n        var step = bar + gap;\n        var scale = length / _this4.width;\n        var first = start;\n        var last = end;\n        var i = first;\n\n        for (i; i < last; i += step) {\n          var peak = peaks[Math.floor(i * scale * peakIndexScale)] || 0;\n          var h = Math.round(peak / absmax * halfH);\n          /* in case of silences, allow the user to specify that we\n           * always draw *something* (normally a 1px high bar) */\n\n          if (h == 0 && _this4.params.barMinHeight) h = _this4.params.barMinHeight;\n\n          _this4.fillRect(i + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2, _this4.barRadius);\n        }\n      });\n    }\n    /**\n     * Draw a waveform\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number?} start The x-offset of the beginning of the area that\n     * should be rendered (If this isn't set only a flat line is rendered)\n     * @param {number?} end The x-offset of the end of the area that should be\n     * rendered\n     * @returns {void}\n     */\n\n  }, {\n    key: \"drawWave\",\n    value: function drawWave(peaks, channelIndex, start, end) {\n      var _this5 = this;\n\n      return this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {\n        var absmax = _ref2.absmax,\n            hasMinVals = _ref2.hasMinVals,\n            height = _ref2.height,\n            offsetY = _ref2.offsetY,\n            halfH = _ref2.halfH,\n            peaks = _ref2.peaks,\n            channelIndex = _ref2.channelIndex;\n\n        if (!hasMinVals) {\n          var reflectedPeaks = [];\n          var len = peaks.length;\n          var i = 0;\n\n          for (i; i < len; i++) {\n            reflectedPeaks[2 * i] = peaks[i];\n            reflectedPeaks[2 * i + 1] = -peaks[i];\n          }\n\n          peaks = reflectedPeaks;\n        } // if drawWave was called within ws.empty we don't pass a start and\n        // end and simply want a flat line\n\n\n        if (start !== undefined) {\n          _this5.drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex);\n        } // always draw a median line\n\n\n        _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel, _this5.barRadius);\n      });\n    }\n    /**\n     * Tell the canvas entries to render their portion of the waveform\n     *\n     * @param {number[]} peaks Peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     * @param {channelIndex} channelIndex The channel index of the line drawn\n     */\n\n  }, {\n    key: \"drawLine\",\n    value: function drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex) {\n      var _this6 = this;\n\n      var _ref3 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n          waveColor = _ref3.waveColor,\n          progressColor = _ref3.progressColor;\n\n      this.canvases.forEach(function (entry, i) {\n        _this6.setFillStyles(entry, waveColor, progressColor);\n\n        entry.drawLines(peaks, absmax, halfH, offsetY, start, end);\n      });\n    }\n    /**\n     * Draw a rectangle on the multi-canvas\n     *\n     * @param {number} x X-position of the rectangle\n     * @param {number} y Y-position of the rectangle\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n\n  }, {\n    key: \"fillRect\",\n    value: function fillRect(x, y, width, height, radius) {\n      var startCanvas = Math.floor(x / this.maxCanvasWidth);\n      var endCanvas = Math.min(Math.ceil((x + width) / this.maxCanvasWidth) + 1, this.canvases.length);\n      var i = startCanvas;\n\n      for (i; i < endCanvas; i++) {\n        var entry = this.canvases[i];\n        var leftOffset = i * this.maxCanvasWidth;\n        var intersection = {\n          x1: Math.max(x, i * this.maxCanvasWidth),\n          y1: y,\n          x2: Math.min(x + width, i * this.maxCanvasWidth + entry.wave.width),\n          y2: y + height\n        };\n\n        if (intersection.x1 < intersection.x2) {\n          this.setFillStyles(entry);\n          entry.fillRects(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1, radius);\n        }\n      }\n    }\n    /**\n     * Returns whether to hide the channel from being drawn based on params.\n     *\n     * @param {number} channelIndex The index of the current channel.\n     * @returns {bool} True to hide the channel, false to draw.\n     */\n\n  }, {\n    key: \"hideChannel\",\n    value: function hideChannel(channelIndex) {\n      return this.params.splitChannels && this.params.splitChannelsOptions.filterChannels.includes(channelIndex);\n    }\n    /**\n     * Performs preparation tasks and calculations which are shared by `drawBars`\n     * and `drawWave`\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for\n     * split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number?} start The x-offset of the beginning of the area that\n     * should be rendered. If this isn't set only a flat line is rendered\n     * @param {number?} end The x-offset of the end of the area that should be\n     * rendered\n     * @param {function} fn The render function to call, e.g. `drawWave`\n     * @param {number} drawIndex The index of the current channel after filtering.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"prepareDraw\",\n    value: function prepareDraw(peaks, channelIndex, start, end, fn, drawIndex) {\n      var _this7 = this;\n\n      return util.frame(function () {\n        // Split channels and call this function with the channelIndex set\n        if (peaks[0] instanceof Array) {\n          var channels = peaks;\n\n          if (_this7.params.splitChannels) {\n            var filteredChannels = channels.filter(function (c, i) {\n              return !_this7.hideChannel(i);\n            });\n\n            if (!_this7.params.splitChannelsOptions.overlay) {\n              _this7.setHeight(Math.max(filteredChannels.length, 1) * _this7.params.height * _this7.params.pixelRatio);\n            }\n\n            return channels.forEach(function (channelPeaks, i) {\n              return _this7.prepareDraw(channelPeaks, i, start, end, fn, filteredChannels.indexOf(channelPeaks));\n            });\n          }\n\n          peaks = channels[0];\n        } // Return and do not draw channel peaks if hidden.\n\n\n        if (_this7.hideChannel(channelIndex)) {\n          return;\n        } // calculate maximum modulation value, either from the barHeight\n        // parameter or if normalize=true from the largest value in the peak\n        // set\n\n\n        var absmax = 1 / _this7.params.barHeight;\n\n        if (_this7.params.normalize) {\n          var max = util.max(peaks);\n          var min = util.min(peaks);\n          absmax = -min > max ? -min : max;\n        } // Bar wave draws the bottom only as a reflection of the top,\n        // so we don't need negative values\n\n\n        var hasMinVals = [].some.call(peaks, function (val) {\n          return val < 0;\n        });\n        var height = _this7.params.height * _this7.params.pixelRatio;\n        var offsetY = height * drawIndex || 0;\n        var halfH = height / 2;\n        return fn({\n          absmax: absmax,\n          hasMinVals: hasMinVals,\n          height: height,\n          offsetY: offsetY,\n          halfH: halfH,\n          peaks: peaks,\n          channelIndex: channelIndex\n        });\n      })();\n    }\n    /**\n     * Set the fill styles for a certain entry (wave and progress)\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {string} waveColor Wave color to draw this entry\n     * @param {string} progressColor Progress color to draw this entry\n     */\n\n  }, {\n    key: \"setFillStyles\",\n    value: function setFillStyles(entry) {\n      var waveColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.params.waveColor;\n      var progressColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.params.progressColor;\n      entry.setFillStyles(waveColor, progressColor);\n    }\n    /**\n     * Return image data of the multi-canvas\n     *\n     * When using a `type` of `'blob'`, this will return a `Promise`.\n     *\n     * @param {string} format='image/png' An optional value of a format type.\n     * @param {number} quality=0.92 An optional value between 0 and 1.\n     * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n     * @return {string|string[]|Promise} When using the default `'dataURL'`\n     * `type` this returns a single data URL or an array of data URLs,\n     * one for each canvas. When using the `'blob'` `type` this returns a\n     * `Promise` that resolves with an array of `Blob` instances, one for each\n     * canvas.\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function getImage(format, quality, type) {\n      if (type === 'blob') {\n        return Promise.all(this.canvases.map(function (entry) {\n          return entry.getImage(format, quality, type);\n        }));\n      } else if (type === 'dataURL') {\n        var images = this.canvases.map(function (entry) {\n          return entry.getImage(format, quality, type);\n        });\n        return images.length > 1 ? images : images[0];\n      }\n    }\n    /**\n     * Render the new progress\n     *\n     * @param {number} position X-offset of progress position in pixels\n     */\n\n  }, {\n    key: \"updateProgress\",\n    value: function updateProgress(position) {\n      this.style(this.progressWave, {\n        width: position + 'px'\n      });\n    }\n  }]);\n\n  return MultiCanvas;\n}(_drawer.default);\n\nexports.default = MultiCanvas;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/mediaelement-webaudio.js\":\n/*!**************************************!*\\\n  !*** ./src/mediaelement-webaudio.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mediaelement = _interopRequireDefault(__webpack_require__(/*! ./mediaelement */ \"./src/mediaelement.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * MediaElementWebAudio backend: load audio via an HTML5 audio tag, but playback with the WebAudio API.\n * The advantage here is that the html5 <audio> tag can perform range requests on the server and not\n * buffer the entire file in one request, and you still get the filtering and scripting functionality\n * of the webaudio API.\n * Note that in order to use range requests and prevent buffering, you must provide peak data.\n *\n * @since 3.2.0\n */\nvar MediaElementWebAudio = /*#__PURE__*/function (_MediaElement) {\n  _inherits(MediaElementWebAudio, _MediaElement);\n\n  var _super = _createSuper(MediaElementWebAudio);\n\n  /**\n   * Construct the backend\n   *\n   * @param {WavesurferParams} params Wavesurfer parameters\n   */\n  function MediaElementWebAudio(params) {\n    var _this;\n\n    _classCallCheck(this, MediaElementWebAudio);\n\n    _this = _super.call(this, params);\n    /** @private */\n\n    _this.params = params;\n    /** @private */\n\n    _this.sourceMediaElement = null;\n    return _this;\n  }\n  /**\n   * Initialise the backend, called in `wavesurfer.createBackend()`\n   */\n\n\n  _createClass(MediaElementWebAudio, [{\n    key: \"init\",\n    value: function init() {\n      this.setPlaybackRate(this.params.audioRate);\n      this.createTimer();\n      this.createVolumeNode();\n      this.createScriptNode();\n      this.createAnalyserNode();\n    }\n    /**\n     * Private method called by both `load` (from url)\n     * and `loadElt` (existing media element) methods.\n     *\n     * @param {HTMLMediaElement} media HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @private\n     */\n\n  }, {\n    key: \"_load\",\n    value: function _load(media, peaks, preload) {\n      _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"_load\", this).call(this, media, peaks, preload);\n\n      this.createMediaElementSource(media);\n    }\n    /**\n     * Create MediaElementSource node\n     *\n     * @since 3.2.0\n     * @param {HTMLMediaElement} mediaElement HTML5 Audio to load\n     */\n\n  }, {\n    key: \"createMediaElementSource\",\n    value: function createMediaElementSource(mediaElement) {\n      this.sourceMediaElement = this.ac.createMediaElementSource(mediaElement);\n      this.sourceMediaElement.connect(this.analyser);\n    }\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      this.resumeAudioContext();\n      return _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"play\", this).call(this, start, end);\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     *\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"destroy\", this).call(this);\n\n      this.destroyWebAudio();\n    }\n  }]);\n\n  return MediaElementWebAudio;\n}(_mediaelement.default);\n\nexports.default = MediaElementWebAudio;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/mediaelement.js\":\n/*!*****************************!*\\\n  !*** ./src/mediaelement.js ***!\n  \\*****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _webaudio = _interopRequireDefault(__webpack_require__(/*! ./webaudio */ \"./src/webaudio.js\"));\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * MediaElement backend\n */\nvar MediaElement = /*#__PURE__*/function (_WebAudio) {\n  _inherits(MediaElement, _WebAudio);\n\n  var _super = _createSuper(MediaElement);\n\n  /**\n   * Construct the backend\n   *\n   * @param {WavesurferParams} params Wavesurfer parameters\n   */\n  function MediaElement(params) {\n    var _this;\n\n    _classCallCheck(this, MediaElement);\n\n    _this = _super.call(this, params);\n    /** @private */\n\n    _this.params = params;\n    /**\n     * Initially a dummy media element to catch errors. Once `_load` is\n     * called, this will contain the actual `HTMLMediaElement`.\n     * @private\n     */\n\n    _this.media = {\n      currentTime: 0,\n      duration: 0,\n      paused: true,\n      playbackRate: 1,\n      play: function play() {},\n      pause: function pause() {},\n      volume: 0\n    };\n    /** @private */\n\n    _this.mediaType = params.mediaType.toLowerCase();\n    /** @private */\n\n    _this.elementPosition = params.elementPosition;\n    /** @private */\n\n    _this.peaks = null;\n    /** @private */\n\n    _this.playbackRate = 1;\n    /** @private */\n\n    _this.volume = 1;\n    /** @private */\n\n    _this.isMuted = false;\n    /** @private */\n\n    _this.buffer = null;\n    /** @private */\n\n    _this.onPlayEnd = null;\n    /** @private */\n\n    _this.mediaListeners = {};\n    return _this;\n  }\n  /**\n   * Initialise the backend, called in `wavesurfer.createBackend()`\n   */\n\n\n  _createClass(MediaElement, [{\n    key: \"init\",\n    value: function init() {\n      this.setPlaybackRate(this.params.audioRate);\n      this.createTimer();\n    }\n    /**\n     * Attach event listeners to media element.\n     */\n\n  }, {\n    key: \"_setupMediaListeners\",\n    value: function _setupMediaListeners() {\n      var _this2 = this;\n\n      this.mediaListeners.error = function () {\n        _this2.fireEvent('error', 'Error loading media element');\n      };\n\n      this.mediaListeners.canplay = function () {\n        _this2.fireEvent('canplay');\n      };\n\n      this.mediaListeners.ended = function () {\n        _this2.fireEvent('finish');\n      }; // listen to and relay play, pause and seeked events to enable\n      // playback control from the external media element\n\n\n      this.mediaListeners.play = function () {\n        _this2.fireEvent('play');\n      };\n\n      this.mediaListeners.pause = function () {\n        _this2.fireEvent('pause');\n      };\n\n      this.mediaListeners.seeked = function (event) {\n        _this2.fireEvent('seek');\n      };\n\n      this.mediaListeners.volumechange = function (event) {\n        _this2.isMuted = _this2.media.muted;\n\n        if (_this2.isMuted) {\n          _this2.volume = 0;\n        } else {\n          _this2.volume = _this2.media.volume;\n        }\n\n        _this2.fireEvent('volume');\n      }; // reset event listeners\n\n\n      Object.keys(this.mediaListeners).forEach(function (id) {\n        _this2.media.removeEventListener(id, _this2.mediaListeners[id]);\n\n        _this2.media.addEventListener(id, _this2.mediaListeners[id]);\n      });\n    }\n    /**\n     * Create a timer to provide a more precise `audioprocess` event.\n     */\n\n  }, {\n    key: \"createTimer\",\n    value: function createTimer() {\n      var _this3 = this;\n\n      var onAudioProcess = function onAudioProcess() {\n        if (_this3.isPaused()) {\n          return;\n        }\n\n        _this3.fireEvent('audioprocess', _this3.getCurrentTime()); // Call again in the next frame\n\n\n        util.frame(onAudioProcess)();\n      };\n\n      this.on('play', onAudioProcess); // Update the progress one more time to prevent it from being stuck in\n      // case of lower framerates\n\n      this.on('pause', function () {\n        _this3.fireEvent('audioprocess', _this3.getCurrentTime());\n      });\n    }\n    /**\n     * Create media element with url as its source,\n     * and append to container element.\n     *\n     * @param {string} url Path to media file\n     * @param {HTMLElement} container HTML element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @throws Will throw an error if the `url` argument is not a valid media\n     * element.\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(url, container, peaks, preload) {\n      var media = document.createElement(this.mediaType);\n      media.controls = this.params.mediaControls;\n      media.autoplay = this.params.autoplay || false;\n      media.preload = preload == null ? 'auto' : preload;\n      media.src = url;\n      media.style.width = '100%';\n      var prevMedia = container.querySelector(this.mediaType);\n\n      if (prevMedia) {\n        container.removeChild(prevMedia);\n      }\n\n      container.appendChild(media);\n\n      this._load(media, peaks, preload);\n    }\n    /**\n     * Load existing media element.\n     *\n     * @param {HTMLMediaElement} elt HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     */\n\n  }, {\n    key: \"loadElt\",\n    value: function loadElt(elt, peaks) {\n      elt.controls = this.params.mediaControls;\n      elt.autoplay = this.params.autoplay || false;\n\n      this._load(elt, peaks, elt.preload);\n    }\n    /**\n     * Method called by both `load` (from url)\n     * and `loadElt` (existing media element) methods.\n     *\n     * @param {HTMLMediaElement} media HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @throws Will throw an error if the `media` argument is not a valid media\n     * element.\n     * @private\n     */\n\n  }, {\n    key: \"_load\",\n    value: function _load(media, peaks, preload) {\n      // verify media element is valid\n      if (!(media instanceof HTMLMediaElement) || typeof media.addEventListener === 'undefined') {\n        throw new Error('media parameter is not a valid media element');\n      } // load must be called manually on iOS, otherwise peaks won't draw\n      // until a user interaction triggers load --> 'ready' event\n      //\n      // note that we avoid calling media.load here when given peaks and preload == 'none'\n      // as this almost always triggers some browser fetch of the media.\n\n\n      if (typeof media.load == 'function' && !(peaks && preload == 'none')) {\n        // Resets the media element and restarts the media resource. Any\n        // pending events are discarded. How much media data is fetched is\n        // still affected by the preload attribute.\n        media.load();\n      }\n\n      this.media = media;\n\n      this._setupMediaListeners();\n\n      this.peaks = peaks;\n      this.onPlayEnd = null;\n      this.buffer = null;\n      this.isMuted = media.muted;\n      this.setPlaybackRate(this.playbackRate);\n      this.setVolume(this.volume);\n    }\n    /**\n     * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n     *\n     * @return {boolean} Media paused or not\n     */\n\n  }, {\n    key: \"isPaused\",\n    value: function isPaused() {\n      return !this.media || this.media.paused;\n    }\n    /**\n     * Used by `wavesurfer.getDuration()`\n     *\n     * @return {number} Duration\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      if (this.explicitDuration) {\n        return this.explicitDuration;\n      }\n\n      var duration = (this.buffer || this.media).duration;\n\n      if (duration >= Infinity) {\n        // streaming audio\n        duration = this.media.seekable.end(0);\n      }\n\n      return duration;\n    }\n    /**\n     * Returns the current time in seconds relative to the audio-clip's\n     * duration.\n     *\n     * @return {number} Current time\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.media && this.media.currentTime;\n    }\n    /**\n     * Get the position from 0 to 1\n     *\n     * @return {number} Current position\n     */\n\n  }, {\n    key: \"getPlayedPercents\",\n    value: function getPlayedPercents() {\n      return this.getCurrentTime() / this.getDuration() || 0;\n    }\n    /**\n     * Get the audio source playback rate.\n     *\n     * @return {number} Playback rate\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.playbackRate || this.media.playbackRate;\n    }\n    /**\n     * Set the audio source playback rate.\n     *\n     * @param {number} value Playback rate\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(value) {\n      this.playbackRate = value || 1;\n      this.media.playbackRate = this.playbackRate;\n    }\n    /**\n     * Used by `wavesurfer.seekTo()`\n     *\n     * @param {number} start Position to start at in seconds\n     */\n\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(start) {\n      if (start != null) {\n        this.media.currentTime = start;\n      }\n\n      this.clearPlayEnd();\n    }\n    /**\n     * Plays the loaded audio region.\n     *\n     * @param {number} start Start offset in seconds, relative to the beginning\n     * of a clip.\n     * @param {number} end When to stop, relative to the beginning of a clip.\n     * @emits MediaElement#play\n     * @return {Promise} Result\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      this.seekTo(start);\n      var promise = this.media.play();\n      end && this.setPlayEnd(end);\n      return promise;\n    }\n    /**\n     * Pauses the loaded audio.\n     *\n     * @emits MediaElement#pause\n     * @return {Promise} Result\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var promise;\n\n      if (this.media) {\n        promise = this.media.pause();\n      }\n\n      this.clearPlayEnd();\n      return promise;\n    }\n    /**\n     * Set the play end\n     *\n     * @param {number} end Where to end\n     */\n\n  }, {\n    key: \"setPlayEnd\",\n    value: function setPlayEnd(end) {\n      var _this4 = this;\n\n      this.clearPlayEnd();\n\n      this._onPlayEnd = function (time) {\n        if (time >= end) {\n          _this4.pause();\n\n          _this4.seekTo(end);\n        }\n      };\n\n      this.on('audioprocess', this._onPlayEnd);\n    }\n    /** @private */\n\n  }, {\n    key: \"clearPlayEnd\",\n    value: function clearPlayEnd() {\n      if (this._onPlayEnd) {\n        this.un('audioprocess', this._onPlayEnd);\n        this._onPlayEnd = null;\n      }\n    }\n    /**\n     * Compute the max and min value of the waveform when broken into\n     * <length> subranges.\n     *\n     * @param {number} length How many subranges to break the waveform into.\n     * @param {number} first First sample in the required range.\n     * @param {number} last Last sample in the required range.\n     * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of\n     * arrays of peaks consisting of (max, min) values for each subrange.\n     */\n\n  }, {\n    key: \"getPeaks\",\n    value: function getPeaks(length, first, last) {\n      if (this.buffer) {\n        return _get(_getPrototypeOf(MediaElement.prototype), \"getPeaks\", this).call(this, length, first, last);\n      }\n\n      return this.peaks || [];\n    }\n    /**\n     * Set the sink id for the media player\n     *\n     * @param {string} deviceId String value representing audio device id.\n     * @returns {Promise} A Promise that resolves to `undefined` when there\n     * are no errors.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(deviceId) {\n      if (deviceId) {\n        if (!this.media.setSinkId) {\n          return Promise.reject(new Error('setSinkId is not supported in your browser'));\n        }\n\n        return this.media.setSinkId(deviceId);\n      }\n\n      return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n    }\n    /**\n     * Get the current volume\n     *\n     * @return {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.volume;\n    }\n    /**\n     * Set the audio volume\n     *\n     * @param {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(value) {\n      this.volume = value; // no need to change when it's already at that volume\n\n      if (this.media.volume !== this.volume) {\n        this.media.volume = this.volume;\n      }\n    }\n    /**\n     * Enable or disable muted audio\n     *\n     * @since 4.0.0\n     * @param {boolean} muted Specify `true` to mute audio.\n     */\n\n  }, {\n    key: \"setMute\",\n    value: function setMute(muted) {\n      // This causes a volume change to be emitted too through the\n      // volumechange event listener.\n      this.isMuted = this.media.muted = muted;\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     *\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this5 = this;\n\n      this.pause();\n      this.unAll();\n      this.destroyed = true; // cleanup media event listeners\n\n      Object.keys(this.mediaListeners).forEach(function (id) {\n        if (_this5.media) {\n          _this5.media.removeEventListener(id, _this5.mediaListeners[id]);\n        }\n      });\n\n      if (this.params.removeMediaElementOnDestroy && this.media && this.media.parentNode) {\n        this.media.parentNode.removeChild(this.media);\n      }\n\n      this.media = null;\n    }\n  }]);\n\n  return MediaElement;\n}(_webaudio.default);\n\nexports.default = MediaElement;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/peakcache.js\":\n/*!**************************!*\\\n  !*** ./src/peakcache.js ***!\n  \\**************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Caches the decoded peaks data to improve rendering speed for large audio\n *\n * Is used if the option parameter `partialRender` is set to `true`\n */\nvar PeakCache = /*#__PURE__*/function () {\n  /**\n   * Instantiate cache\n   */\n  function PeakCache() {\n    _classCallCheck(this, PeakCache);\n\n    this.clearPeakCache();\n  }\n  /**\n   * Empty the cache\n   */\n\n\n  _createClass(PeakCache, [{\n    key: \"clearPeakCache\",\n    value: function clearPeakCache() {\n      /**\n       * Flat array with entries that are always in pairs to mark the\n       * beginning and end of each subrange.  This is a convenience so we can\n       * iterate over the pairs for easy set difference operations.\n       * @private\n       */\n      this.peakCacheRanges = [];\n      /**\n       * Length of the entire cachable region, used for resetting the cache\n       * when this changes (zoom events, for instance).\n       * @private\n       */\n\n      this.peakCacheLength = -1;\n    }\n    /**\n     * Add a range of peaks to the cache\n     *\n     * @param {number} length The length of the range\n     * @param {number} start The x offset of the start of the range\n     * @param {number} end The x offset of the end of the range\n     * @return {Number.<Array[]>} Array with arrays of numbers\n     */\n\n  }, {\n    key: \"addRangeToPeakCache\",\n    value: function addRangeToPeakCache(length, start, end) {\n      if (length != this.peakCacheLength) {\n        this.clearPeakCache();\n        this.peakCacheLength = length;\n      } // Return ranges that weren't in the cache before the call.\n\n\n      var uncachedRanges = [];\n      var i = 0; // Skip ranges before the current start.\n\n      while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] < start) {\n        i++;\n      } // If |i| is even, |start| falls after an existing range.  Otherwise,\n      // |start| falls between an existing range, and the uncached region\n      // starts when we encounter the next node in |peakCacheRanges| or\n      // |end|, whichever comes first.\n\n\n      if (i % 2 == 0) {\n        uncachedRanges.push(start);\n      }\n\n      while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] <= end) {\n        uncachedRanges.push(this.peakCacheRanges[i]);\n        i++;\n      } // If |i| is even, |end| is after all existing ranges.\n\n\n      if (i % 2 == 0) {\n        uncachedRanges.push(end);\n      } // Filter out the 0-length ranges.\n\n\n      uncachedRanges = uncachedRanges.filter(function (item, pos, arr) {\n        if (pos == 0) {\n          return item != arr[pos + 1];\n        } else if (pos == arr.length - 1) {\n          return item != arr[pos - 1];\n        }\n\n        return item != arr[pos - 1] && item != arr[pos + 1];\n      }); // Merge the two ranges together, uncachedRanges will either contain\n      // wholly new points, or duplicates of points in peakCacheRanges.  If\n      // duplicates are detected, remove both and extend the range.\n\n      this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);\n      this.peakCacheRanges = this.peakCacheRanges.sort(function (a, b) {\n        return a - b;\n      }).filter(function (item, pos, arr) {\n        if (pos == 0) {\n          return item != arr[pos + 1];\n        } else if (pos == arr.length - 1) {\n          return item != arr[pos - 1];\n        }\n\n        return item != arr[pos - 1] && item != arr[pos + 1];\n      }); // Push the uncached ranges into an array of arrays for ease of\n      // iteration in the functions that call this.\n\n      var uncachedRangePairs = [];\n\n      for (i = 0; i < uncachedRanges.length; i += 2) {\n        uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);\n      }\n\n      return uncachedRangePairs;\n    }\n    /**\n     * For testing\n     *\n     * @return {Number.<Array[]>} Array with arrays of numbers\n     */\n\n  }, {\n    key: \"getCacheRanges\",\n    value: function getCacheRanges() {\n      var peakCacheRangePairs = [];\n      var i;\n\n      for (i = 0; i < this.peakCacheRanges.length; i += 2) {\n        peakCacheRangePairs.push([this.peakCacheRanges[i], this.peakCacheRanges[i + 1]]);\n      }\n\n      return peakCacheRangePairs;\n    }\n  }]);\n\n  return PeakCache;\n}();\n\nexports.default = PeakCache;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/clamp.js\":\n/*!***************************!*\\\n  !*** ./src/util/clamp.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = clamp;\n\n/**\n * Returns a number limited to the given range.\n *\n * @param {number} val The number to be limited to a range\n * @param {number} min The lower boundary of the limit range\n * @param {number} max The upper boundary of the limit range\n * @returns {number} A number in the range [min, max]\n */\nfunction clamp(val, min, max) {\n  return Math.min(Math.max(min, val), max);\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/fetch.js\":\n/*!***************************!*\\\n  !*** ./src/util/fetch.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = fetchFile;\n\nvar _observer = _interopRequireDefault(__webpack_require__(/*! ./observer */ \"./src/util/observer.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ProgressHandler = /*#__PURE__*/function () {\n  /**\n   * Instantiate ProgressHandler\n   *\n   * @param {Observer} instance The `fetchFile` observer instance.\n   * @param {Number} contentLength Content length.\n   * @param {Response} response Response object.\n   */\n  function ProgressHandler(instance, contentLength, response) {\n    _classCallCheck(this, ProgressHandler);\n\n    this.instance = instance;\n    this.instance._reader = response.body.getReader();\n    this.total = parseInt(contentLength, 10);\n    this.loaded = 0;\n  }\n  /**\n   * A method that is called once, immediately after the `ReadableStream``\n   * is constructed.\n   *\n   * @param {ReadableStreamDefaultController} controller Controller instance\n   *     used to control the stream.\n   */\n\n\n  _createClass(ProgressHandler, [{\n    key: \"start\",\n    value: function start(controller) {\n      var _this = this;\n\n      var read = function read() {\n        // instance._reader.read() returns a promise that resolves\n        // when a value has been received\n        _this.instance._reader.read().then(function (_ref) {\n          var done = _ref.done,\n              value = _ref.value;\n\n          // result objects contain two properties:\n          // done  - true if the stream has already given you all its data.\n          // value - some data. Always undefined when done is true.\n          if (done) {\n            // ensure onProgress called when content-length=0\n            if (_this.total === 0) {\n              _this.instance.onProgress.call(_this.instance, {\n                loaded: _this.loaded,\n                total: _this.total,\n                lengthComputable: false\n              });\n            } // no more data needs to be consumed, close the stream\n\n\n            controller.close();\n            return;\n          }\n\n          _this.loaded += value.byteLength;\n\n          _this.instance.onProgress.call(_this.instance, {\n            loaded: _this.loaded,\n            total: _this.total,\n            lengthComputable: !(_this.total === 0)\n          }); // enqueue the next data chunk into our target stream\n\n\n          controller.enqueue(value);\n          read();\n        }).catch(function (error) {\n          controller.error(error);\n        });\n      };\n\n      read();\n    }\n  }]);\n\n  return ProgressHandler;\n}();\n/**\n * Load a file using `fetch`.\n *\n * @param {object} options Request options to use. See example below.\n * @returns {Observer} Observer instance\n * @example\n * // default options\n * let options = {\n *     url: undefined,\n *     method: 'GET',\n *     mode: 'cors',\n *     credentials: 'same-origin',\n *     cache: 'default',\n *     responseType: 'json',\n *     requestHeaders: [],\n *     redirect: 'follow',\n *     referrer: 'client'\n * };\n *\n * // override some options\n * options.url = '../media/demo.wav';\n\n * // available types: 'arraybuffer', 'blob', 'json' or 'text'\n * options.responseType = 'arraybuffer';\n *\n * // make fetch call\n * let request = util.fetchFile(options);\n *\n * // listen for events\n * request.on('progress', e => {\n *     console.log('progress', e);\n * });\n *\n * request.on('success', data => {\n *     console.log('success!', data);\n * });\n *\n * request.on('error', e => {\n *     console.warn('fetchFile error: ', e);\n * });\n */\n\n\nfunction fetchFile(options) {\n  if (!options) {\n    throw new Error('fetch options missing');\n  } else if (!options.url) {\n    throw new Error('fetch url missing');\n  }\n\n  var instance = new _observer.default();\n  var fetchHeaders = new Headers();\n  var fetchRequest = new Request(options.url); // add ability to abort\n\n  instance.controller = new AbortController(); // check if headers have to be added\n\n  if (options && options.requestHeaders) {\n    // add custom request headers\n    options.requestHeaders.forEach(function (header) {\n      fetchHeaders.append(header.key, header.value);\n    });\n  } // parse fetch options\n\n\n  var responseType = options.responseType || 'json';\n  var fetchOptions = {\n    method: options.method || 'GET',\n    headers: fetchHeaders,\n    mode: options.mode || 'cors',\n    credentials: options.credentials || 'same-origin',\n    cache: options.cache || 'default',\n    redirect: options.redirect || 'follow',\n    referrer: options.referrer || 'client',\n    signal: instance.controller.signal\n  };\n  fetch(fetchRequest, fetchOptions).then(function (response) {\n    // store response reference\n    instance.response = response;\n    var progressAvailable = true;\n\n    if (!response.body) {\n      // ReadableStream is not yet supported in this browser\n      // see https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n      progressAvailable = false;\n    } // Server must send CORS header \"Access-Control-Expose-Headers: content-length\"\n\n\n    var contentLength = response.headers.get('content-length');\n\n    if (contentLength === null) {\n      // Content-Length server response header missing.\n      // Don't evaluate download progress if we can't compare against a total size\n      // see https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\n      progressAvailable = false;\n    }\n\n    if (!progressAvailable) {\n      // not able to check download progress so skip it\n      return response;\n    } // fire progress event when during load\n\n\n    instance.onProgress = function (e) {\n      instance.fireEvent('progress', e);\n    };\n\n    return new Response(new ReadableStream(new ProgressHandler(instance, contentLength, response)), fetchOptions);\n  }).then(function (response) {\n    var errMsg;\n\n    if (response.ok) {\n      switch (responseType) {\n        case 'arraybuffer':\n          return response.arrayBuffer();\n\n        case 'json':\n          return response.json();\n\n        case 'blob':\n          return response.blob();\n\n        case 'text':\n          return response.text();\n\n        default:\n          errMsg = 'Unknown responseType: ' + responseType;\n          break;\n      }\n    }\n\n    if (!errMsg) {\n      errMsg = 'HTTP error status: ' + response.status;\n    }\n\n    throw new Error(errMsg);\n  }).then(function (response) {\n    instance.fireEvent('success', response);\n  }).catch(function (error) {\n    instance.fireEvent('error', error);\n  }); // return the fetch request\n\n  instance.fetchRequest = fetchRequest;\n  return instance;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/frame.js\":\n/*!***************************!*\\\n  !*** ./src/util/frame.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = frame;\n\nvar _requestAnimationFrame = _interopRequireDefault(__webpack_require__(/*! ./request-animation-frame */ \"./src/util/request-animation-frame.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Create a function which will be called at the next requestAnimationFrame\n * cycle\n *\n * @param {function} func The function to call\n *\n * @return {func} The function wrapped within a requestAnimationFrame\n */\nfunction frame(func) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _requestAnimationFrame.default)(function () {\n      return func.apply(void 0, args);\n    });\n  };\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/get-id.js\":\n/*!****************************!*\\\n  !*** ./src/util/get-id.js ***!\n  \\****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getId;\n\n/**\n * Get a random prefixed ID\n *\n * @param {String} prefix Prefix to use. Default is `'wavesurfer_'`.\n * @returns {String} Random prefixed ID\n * @example\n * console.log(getId()); // logs 'wavesurfer_b5pors4ru6g'\n *\n * let prefix = 'foo-';\n * console.log(getId(prefix)); // logs 'foo-b5pors4ru6g'\n */\nfunction getId(prefix) {\n  if (prefix === undefined) {\n    prefix = 'wavesurfer_';\n  }\n\n  return prefix + Math.random().toString(32).substring(2);\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/index.js\":\n/*!***************************!*\\\n  !*** ./src/util/index.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"getId\", {\n  enumerable: true,\n  get: function get() {\n    return _getId.default;\n  }\n});\nObject.defineProperty(exports, \"max\", {\n  enumerable: true,\n  get: function get() {\n    return _max.default;\n  }\n});\nObject.defineProperty(exports, \"min\", {\n  enumerable: true,\n  get: function get() {\n    return _min.default;\n  }\n});\nObject.defineProperty(exports, \"Observer\", {\n  enumerable: true,\n  get: function get() {\n    return _observer.default;\n  }\n});\nObject.defineProperty(exports, \"style\", {\n  enumerable: true,\n  get: function get() {\n    return _style.default;\n  }\n});\nObject.defineProperty(exports, \"requestAnimationFrame\", {\n  enumerable: true,\n  get: function get() {\n    return _requestAnimationFrame.default;\n  }\n});\nObject.defineProperty(exports, \"frame\", {\n  enumerable: true,\n  get: function get() {\n    return _frame.default;\n  }\n});\nObject.defineProperty(exports, \"debounce\", {\n  enumerable: true,\n  get: function get() {\n    return _debounce.default;\n  }\n});\nObject.defineProperty(exports, \"preventClick\", {\n  enumerable: true,\n  get: function get() {\n    return _preventClick.default;\n  }\n});\nObject.defineProperty(exports, \"fetchFile\", {\n  enumerable: true,\n  get: function get() {\n    return _fetch.default;\n  }\n});\nObject.defineProperty(exports, \"clamp\", {\n  enumerable: true,\n  get: function get() {\n    return _clamp.default;\n  }\n});\n\nvar _getId = _interopRequireDefault(__webpack_require__(/*! ./get-id */ \"./src/util/get-id.js\"));\n\nvar _max = _interopRequireDefault(__webpack_require__(/*! ./max */ \"./src/util/max.js\"));\n\nvar _min = _interopRequireDefault(__webpack_require__(/*! ./min */ \"./src/util/min.js\"));\n\nvar _observer = _interopRequireDefault(__webpack_require__(/*! ./observer */ \"./src/util/observer.js\"));\n\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./style */ \"./src/util/style.js\"));\n\nvar _requestAnimationFrame = _interopRequireDefault(__webpack_require__(/*! ./request-animation-frame */ \"./src/util/request-animation-frame.js\"));\n\nvar _frame = _interopRequireDefault(__webpack_require__(/*! ./frame */ \"./src/util/frame.js\"));\n\nvar _debounce = _interopRequireDefault(__webpack_require__(/*! debounce */ \"./node_modules/debounce/index.js\"));\n\nvar _preventClick = _interopRequireDefault(__webpack_require__(/*! ./prevent-click */ \"./src/util/prevent-click.js\"));\n\nvar _fetch = _interopRequireDefault(__webpack_require__(/*! ./fetch */ \"./src/util/fetch.js\"));\n\nvar _clamp = _interopRequireDefault(__webpack_require__(/*! ./clamp */ \"./src/util/clamp.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n\n/***/ \"./src/util/max.js\":\n/*!*************************!*\\\n  !*** ./src/util/max.js ***!\n  \\*************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = max;\n\n/**\n * Get the largest value\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Largest number found\n * @example console.log(max([1, 2, 3])); // logs 3\n */\nfunction max(values) {\n  var largest = -Infinity;\n  Object.keys(values).forEach(function (i) {\n    if (values[i] > largest) {\n      largest = values[i];\n    }\n  });\n  return largest;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/min.js\":\n/*!*************************!*\\\n  !*** ./src/util/min.js ***!\n  \\*************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = min;\n\n/**\n * Get the smallest value\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Smallest number found\n * @example console.log(min([1, 2, 3])); // logs 1\n */\nfunction min(values) {\n  var smallest = Number(Infinity);\n  Object.keys(values).forEach(function (i) {\n    if (values[i] < smallest) {\n      smallest = values[i];\n    }\n  });\n  return smallest;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/observer.js\":\n/*!******************************!*\\\n  !*** ./src/util/observer.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @typedef {Object} ListenerDescriptor\n * @property {string} name The name of the event\n * @property {function} callback The callback\n * @property {function} un The function to call to remove the listener\n */\n\n/**\n * Observer class\n */\nvar Observer = /*#__PURE__*/function () {\n  /**\n   * Instantiate Observer\n   */\n  function Observer() {\n    _classCallCheck(this, Observer);\n\n    /**\n     * @private\n     * @todo Initialise the handlers here already and remove the conditional\n     * assignment in `on()`\n     */\n    this._disabledEventEmissions = [];\n    this.handlers = null;\n  }\n  /**\n   * Attach a handler function for an event.\n   *\n   * @param {string} event Name of the event to listen to\n   * @param {function} fn The callback to trigger when the event is fired\n   * @return {ListenerDescriptor} The event descriptor\n   */\n\n\n  _createClass(Observer, [{\n    key: \"on\",\n    value: function on(event, fn) {\n      var _this = this;\n\n      if (!this.handlers) {\n        this.handlers = {};\n      }\n\n      var handlers = this.handlers[event];\n\n      if (!handlers) {\n        handlers = this.handlers[event] = [];\n      }\n\n      handlers.push(fn); // Return an event descriptor\n\n      return {\n        name: event,\n        callback: fn,\n        un: function un(e, fn) {\n          return _this.un(e, fn);\n        }\n      };\n    }\n    /**\n     * Remove an event handler.\n     *\n     * @param {string} event Name of the event the listener that should be\n     * removed listens to\n     * @param {function} fn The callback that should be removed\n     */\n\n  }, {\n    key: \"un\",\n    value: function un(event, fn) {\n      if (!this.handlers) {\n        return;\n      }\n\n      var handlers = this.handlers[event];\n      var i;\n\n      if (handlers) {\n        if (fn) {\n          for (i = handlers.length - 1; i >= 0; i--) {\n            if (handlers[i] == fn) {\n              handlers.splice(i, 1);\n            }\n          }\n        } else {\n          handlers.length = 0;\n        }\n      }\n    }\n    /**\n     * Remove all event handlers.\n     */\n\n  }, {\n    key: \"unAll\",\n    value: function unAll() {\n      this.handlers = null;\n    }\n    /**\n     * Attach a handler to an event. The handler is executed at most once per\n     * event type.\n     *\n     * @param {string} event The event to listen to\n     * @param {function} handler The callback that is only to be called once\n     * @return {ListenerDescriptor} The event descriptor\n     */\n\n  }, {\n    key: \"once\",\n    value: function once(event, handler) {\n      var _this2 = this;\n\n      var fn = function fn() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        /*  eslint-disable no-invalid-this */\n        handler.apply(_this2, args);\n        /*  eslint-enable no-invalid-this */\n\n        setTimeout(function () {\n          _this2.un(event, fn);\n        }, 0);\n      };\n\n      return this.on(event, fn);\n    }\n    /**\n     * Disable firing a list of events by name. When specified, event handlers for any event type\n     * passed in here will not be called.\n     *\n     * @since 4.0.0\n     * @param {string[]} eventNames an array of event names to disable emissions for\n     * @example\n     * // disable seek and interaction events\n     * wavesurfer.setDisabledEventEmissions(['seek', 'interaction']);\n     */\n\n  }, {\n    key: \"setDisabledEventEmissions\",\n    value: function setDisabledEventEmissions(eventNames) {\n      this._disabledEventEmissions = eventNames;\n    }\n    /**\n     * plugins borrow part of this class without calling the constructor,\n     * so we have to be careful about _disabledEventEmissions\n     */\n\n  }, {\n    key: \"_isDisabledEventEmission\",\n    value: function _isDisabledEventEmission(event) {\n      return this._disabledEventEmissions && this._disabledEventEmissions.includes(event);\n    }\n    /**\n     * Manually fire an event\n     *\n     * @param {string} event The event to fire manually\n     * @param {...any} args The arguments with which to call the listeners\n     */\n\n  }, {\n    key: \"fireEvent\",\n    value: function fireEvent(event) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      if (!this.handlers || this._isDisabledEventEmission(event)) {\n        return;\n      }\n\n      var handlers = this.handlers[event];\n      handlers && handlers.forEach(function (fn) {\n        fn.apply(void 0, args);\n      });\n    }\n  }]);\n\n  return Observer;\n}();\n\nexports.default = Observer;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/prevent-click.js\":\n/*!***********************************!*\\\n  !*** ./src/util/prevent-click.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = preventClick;\n\n/**\n * Stops propagation of click event and removes event listener\n *\n * @private\n * @param {object} event The click event\n */\nfunction preventClickHandler(event) {\n  event.stopPropagation();\n  document.body.removeEventListener('click', preventClickHandler, true);\n}\n/**\n * Starts listening for click event and prevent propagation\n *\n * @param {object} values Values\n */\n\n\nfunction preventClick(values) {\n  document.body.addEventListener('click', preventClickHandler, true);\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/request-animation-frame.js\":\n/*!*********************************************!*\\\n  !*** ./src/util/request-animation-frame.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/* eslint-disable valid-jsdoc */\n\n/**\n * Returns the `requestAnimationFrame` function for the browser, or a shim with\n * `setTimeout` if the function is not found\n *\n * @return {function} Available `requestAnimationFrame` function for the browser\n */\nvar _default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {\n  return setTimeout(callback, 1000 / 60);\n}).bind(window);\n\nexports.default = _default;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/util/style.js\":\n/*!***************************!*\\\n  !*** ./src/util/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = style;\n\n/**\n * Apply a map of styles to an element\n *\n * @param {HTMLElement} el The element that the styles will be applied to\n * @param {Object} styles The map of propName: attribute, both are used as-is\n *\n * @return {HTMLElement} el\n */\nfunction style(el, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    if (el.style[prop] !== styles[prop]) {\n      el.style[prop] = styles[prop];\n    }\n  });\n  return el;\n}\n\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/wavesurfer.js\":\n/*!***************************!*\\\n  !*** ./src/wavesurfer.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nvar _drawer = _interopRequireDefault(__webpack_require__(/*! ./drawer.multicanvas */ \"./src/drawer.multicanvas.js\"));\n\nvar _webaudio = _interopRequireDefault(__webpack_require__(/*! ./webaudio */ \"./src/webaudio.js\"));\n\nvar _mediaelement = _interopRequireDefault(__webpack_require__(/*! ./mediaelement */ \"./src/mediaelement.js\"));\n\nvar _peakcache = _interopRequireDefault(__webpack_require__(/*! ./peakcache */ \"./src/peakcache.js\"));\n\nvar _mediaelementWebaudio = _interopRequireDefault(__webpack_require__(/*! ./mediaelement-webaudio */ \"./src/mediaelement-webaudio.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n * This work is licensed under a BSD-3-Clause License.\n */\n\n/** @external {HTMLElement} https://developer.mozilla.org/en/docs/Web/API/HTMLElement */\n\n/** @external {OfflineAudioContext} https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext */\n\n/** @external {File} https://developer.mozilla.org/en-US/docs/Web/API/File */\n\n/** @external {Blob} https://developer.mozilla.org/en-US/docs/Web/API/Blob */\n\n/** @external {CanvasRenderingContext2D} https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D */\n\n/** @external {MediaStreamConstraints} https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints */\n\n/** @external {AudioNode} https://developer.mozilla.org/de/docs/Web/API/AudioNode */\n\n/**\n * @typedef {Object} WavesurferParams\n * @property {AudioContext} audioContext=null Use your own previously\n * initialized AudioContext or leave blank.\n * @property {number} audioRate=1 Speed at which to play audio. Lower number is\n * slower.\n * @property {ScriptProcessorNode} audioScriptProcessor=null Use your own previously\n * initialized ScriptProcessorNode or leave blank.\n * @property {boolean} autoCenter=true If a scrollbar is present, center the\n * waveform on current progress\n * @property {number} autoCenterRate=5 If autoCenter is active, rate at which the\n * waveform is centered\n * @property {boolean} autoCenterImmediately=false If autoCenter is active, immediately\n * center waveform on current progress\n * @property {string} backend='WebAudio' `'WebAudio'|'MediaElement'|'MediaElementWebAudio'` In most cases\n * you don't have to set this manually. MediaElement is a fallback for unsupported browsers.\n * MediaElementWebAudio allows to use WebAudio API also with big audio files, loading audio like with\n * MediaElement backend (HTML5 audio tag). You have to use the same methods of MediaElement backend for loading and\n * playback, giving also peaks, so the audio data are not decoded. In this way you can use WebAudio features, like filters,\n * also with audio with big duration. For example:\n * ` wavesurfer.load(url | HTMLMediaElement, peaks, preload, duration);\n *   wavesurfer.play();\n *   wavesurfer.setFilter(customFilter);\n * `\n * @property {string} backgroundColor=null Change background color of the\n * waveform container.\n * @property {number} barHeight=1 The height of the wave bars.\n * @property {number} barRadius=0 The radius of the wave bars. Makes bars rounded\n * @property {number} barGap=null The optional spacing between bars of the wave,\n * if not provided will be calculated in legacy format.\n * @property {number} barWidth=null Draw the waveform using bars.\n * @property {number} barMinHeight=null If specified, draw at least a bar of this height,\n * eliminating waveform gaps\n * @property {boolean} closeAudioContext=false Close and nullify all audio\n * contexts when the destroy method is called.\n * @property {!string|HTMLElement} container CSS selector or HTML element where\n * the waveform should be drawn. This is the only required parameter.\n * @property {string} cursorColor='#333' The fill color of the cursor indicating\n * the playhead position.\n * @property {number} cursorWidth=1 Measured in pixels.\n * @property {object} drawingContextAttributes={desynchronized: false} Drawing context\n * attributes.\n * @property {number} duration=null Optional audio length so pre-rendered peaks\n * can be display immediately for example.\n * @property {boolean} fillParent=true Whether to fill the entire container or\n * draw only according to `minPxPerSec`.\n * @property {boolean} forceDecode=false Force decoding of audio using web audio\n * when zooming to get a more detailed waveform.\n * @property {number} height=128 The height of the waveform. Measured in\n * pixels.\n * @property {boolean} hideScrollbar=false Whether to hide the horizontal\n * scrollbar when one would normally be shown.\n * @property {boolean} interact=true Whether the mouse interaction will be\n * enabled at initialization. You can switch this parameter at any time later\n * on.\n * @property {boolean} loopSelection=true (Use with regions plugin) Enable\n * looping of selected regions\n * @property {number} maxCanvasWidth=4000 Maximum width of a single canvas in\n * pixels, excluding a small overlap (2 * `pixelRatio`, rounded up to the next\n * even integer). If the waveform is longer than this value, additional canvases\n * will be used to render the waveform, which is useful for very large waveforms\n * that may be too wide for browsers to draw on a single canvas.\n * @property {boolean} mediaControls=false (Use with backend `MediaElement` or `MediaElementWebAudio`)\n * this enables the native controls for the media element\n * @property {string} mediaType='audio' (Use with backend `MediaElement` or `MediaElementWebAudio`)\n * `'audio'|'video'` ('video' only for `MediaElement`)\n * @property {number} minPxPerSec=20 Minimum number of pixels per second of\n * audio.\n * @property {boolean} normalize=false If true, normalize by the maximum peak\n * instead of 1.0.\n * @property {boolean} partialRender=false Use the PeakCache to improve\n * rendering speed of large waveforms\n * @property {number} pixelRatio=window.devicePixelRatio The pixel ratio used to\n * calculate display\n * @property {PluginDefinition[]} plugins=[] An array of plugin definitions to\n * register during instantiation, they will be directly initialised unless they\n * are added with the `deferInit` property set to true.\n * @property {string} progressColor='#555' The fill color of the part of the\n * waveform behind the cursor. When `progressColor` and `waveColor` are the same\n * the progress wave is not rendered at all.\n * @property {boolean} removeMediaElementOnDestroy=true Set to false to keep the\n * media element in the DOM when the player is destroyed. This is useful when\n * reusing an existing media element via the `loadMediaElement` method.\n * @property {Object} renderer=MultiCanvas Can be used to inject a custom\n * renderer.\n * @property {boolean|number} responsive=false If set to `true` resize the\n * waveform, when the window is resized. This is debounced with a `100ms`\n * timeout by default. If this parameter is a number it represents that timeout.\n * @property {boolean} rtl=false If set to `true`, renders waveform from\n * right-to-left.\n * @property {boolean} scrollParent=false Whether to scroll the container with a\n * lengthy waveform. Otherwise the waveform is shrunk to the container width\n * (see fillParent).\n * @property {number} skipLength=2 Number of seconds to skip with the\n * skipForward() and skipBackward() methods.\n * @property {boolean} splitChannels=false Render with separate waveforms for\n * the channels of the audio\n * @property {string} waveColor='#999' The fill color of the waveform after the\n * cursor.\n * @property {object} xhr={} XHR options. For example:\n * `let xhr = {\n *     cache: 'default',\n *     mode: 'cors',\n *     method: 'GET',\n *     credentials: 'same-origin',\n *     redirect: 'follow',\n *     referrer: 'client',\n *     requestHeaders: [\n *         {\n *             key: 'Authorization',\n *             value: 'my-token'\n *         }\n *     ]\n * };`\n */\n\n/**\n * @typedef {Object} PluginDefinition\n * @desc The Object used to describe a plugin\n * @example wavesurfer.addPlugin(pluginDefinition);\n * @property {string} name The name of the plugin, the plugin instance will be\n * added as a property to the wavesurfer instance under this name\n * @property {?Object} staticProps The properties that should be added to the\n * wavesurfer instance as static properties\n * @property {?boolean} deferInit Don't initialise plugin\n * automatically\n * @property {Object} params={} The plugin parameters, they are the first parameter\n * passed to the plugin class constructor function\n * @property {PluginClass} instance The plugin instance factory, is called with\n * the dependency specified in extends. Returns the plugin class.\n */\n\n/**\n * @interface PluginClass\n *\n * @desc This is the interface which is implemented by all plugin classes. Note\n * that this only turns into an observer after being passed through\n * `wavesurfer.addPlugin`.\n *\n * @extends {Observer}\n */\nvar PluginClass = /*#__PURE__*/function () {\n  _createClass(PluginClass, [{\n    key: \"create\",\n\n    /**\n     * Plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * It returns a `PluginDefinition` object representing the plugin.\n     *\n     * @param {Object} params={} The plugin params (specific to the plugin)\n     */\n    value: function create(params) {}\n    /**\n     * Construct the plugin\n     *\n     * @param {Object} params={} The plugin params (specific to the plugin)\n     * @param {Object} ws The wavesurfer instance\n     */\n\n  }]);\n\n  function PluginClass(params, ws) {\n    _classCallCheck(this, PluginClass);\n  }\n  /**\n   * Initialise the plugin\n   *\n   * Start doing something. This is called by\n   * `wavesurfer.initPlugin(pluginName)`\n   */\n\n\n  _createClass(PluginClass, [{\n    key: \"init\",\n    value: function init() {}\n    /**\n     * Destroy the plugin instance\n     *\n     * Stop doing something. This is called by\n     * `wavesurfer.destroyPlugin(pluginName)`\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {}\n  }]);\n\n  return PluginClass;\n}();\n/**\n * WaveSurfer core library class\n *\n * @extends {Observer}\n * @example\n * const params = {\n *   container: '#waveform',\n *   waveColor: 'violet',\n *   progressColor: 'purple'\n * };\n *\n * // initialise like this\n * const wavesurfer = WaveSurfer.create(params);\n *\n * // or like this ...\n * const wavesurfer = new WaveSurfer(params);\n * wavesurfer.init();\n *\n * // load audio file\n * wavesurfer.load('example/media/demo.wav');\n */\n\n\nvar WaveSurfer = /*#__PURE__*/function (_util$Observer) {\n  _inherits(WaveSurfer, _util$Observer);\n\n  var _super = _createSuper(WaveSurfer);\n\n  _createClass(WaveSurfer, null, [{\n    key: \"create\",\n\n    /** @private */\n\n    /** @private */\n\n    /**\n     * Instantiate this class, call its `init` function and returns it\n     *\n     * @param {WavesurferParams} params The wavesurfer parameters\n     * @return {Object} WaveSurfer instance\n     * @example const wavesurfer = WaveSurfer.create(params);\n     */\n    value: function create(params) {\n      var wavesurfer = new WaveSurfer(params);\n      return wavesurfer.init();\n    }\n    /**\n     * The library version number is available as a static property of the\n     * WaveSurfer class\n     *\n     * @type {String}\n     * @example\n     * console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);\n     */\n\n  }]);\n\n  /**\n   * Initialise wavesurfer instance\n   *\n   * @param {WavesurferParams} params Instantiation options for wavesurfer\n   * @example\n   * const wavesurfer = new WaveSurfer(params);\n   * @returns {this} Wavesurfer instance\n   */\n  function WaveSurfer(params) {\n    var _this;\n\n    _classCallCheck(this, WaveSurfer);\n\n    _this = _super.call(this);\n    /**\n     * Extract relevant parameters (or defaults)\n     * @private\n     */\n\n    _this.defaultParams = {\n      audioContext: null,\n      audioScriptProcessor: null,\n      audioRate: 1,\n      autoCenter: true,\n      autoCenterRate: 5,\n      autoCenterImmediately: false,\n      backend: 'WebAudio',\n      backgroundColor: null,\n      barHeight: 1,\n      barRadius: 0,\n      barGap: null,\n      barMinHeight: null,\n      container: null,\n      cursorColor: '#333',\n      cursorWidth: 1,\n      dragSelection: true,\n      drawingContextAttributes: {\n        // Boolean that hints the user agent to reduce the latency\n        // by desynchronizing the canvas paint cycle from the event\n        // loop\n        desynchronized: false\n      },\n      duration: null,\n      fillParent: true,\n      forceDecode: false,\n      height: 128,\n      hideScrollbar: false,\n      interact: true,\n      loopSelection: true,\n      maxCanvasWidth: 4000,\n      mediaContainer: null,\n      mediaControls: false,\n      mediaType: 'audio',\n      minPxPerSec: 20,\n      normalize: false,\n      partialRender: false,\n      pixelRatio: window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,\n      plugins: [],\n      progressColor: '#555',\n      removeMediaElementOnDestroy: true,\n      renderer: _drawer.default,\n      responsive: false,\n      rtl: false,\n      scrollParent: false,\n      skipLength: 2,\n      splitChannels: false,\n      splitChannelsOptions: {\n        overlay: false,\n        channelColors: {},\n        filterChannels: []\n      },\n      waveColor: '#999',\n      xhr: {}\n    };\n    _this.backends = {\n      MediaElement: _mediaelement.default,\n      WebAudio: _webaudio.default,\n      MediaElementWebAudio: _mediaelementWebaudio.default\n    };\n    _this.util = util;\n    _this.params = Object.assign({}, _this.defaultParams, params);\n    /** @private */\n\n    _this.container = 'string' == typeof params.container ? document.querySelector(_this.params.container) : _this.params.container;\n\n    if (!_this.container) {\n      throw new Error('Container element not found');\n    }\n\n    if (_this.params.mediaContainer == null) {\n      /** @private */\n      _this.mediaContainer = _this.container;\n    } else if (typeof _this.params.mediaContainer == 'string') {\n      /** @private */\n      _this.mediaContainer = document.querySelector(_this.params.mediaContainer);\n    } else {\n      /** @private */\n      _this.mediaContainer = _this.params.mediaContainer;\n    }\n\n    if (!_this.mediaContainer) {\n      throw new Error('Media Container element not found');\n    }\n\n    if (_this.params.maxCanvasWidth <= 1) {\n      throw new Error('maxCanvasWidth must be greater than 1');\n    } else if (_this.params.maxCanvasWidth % 2 == 1) {\n      throw new Error('maxCanvasWidth must be an even number');\n    }\n\n    if (_this.params.rtl === true) {\n      util.style(_this.container, {\n        transform: 'rotateY(180deg)'\n      });\n    }\n\n    if (_this.params.backgroundColor) {\n      _this.setBackgroundColor(_this.params.backgroundColor);\n    }\n    /**\n     * @private Used to save the current volume when muting so we can\n     * restore once unmuted\n     * @type {number}\n     */\n\n\n    _this.savedVolume = 0;\n    /**\n     * @private The current muted state\n     * @type {boolean}\n     */\n\n    _this.isMuted = false;\n    /**\n     * @private Will hold a list of event descriptors that need to be\n     * canceled on subsequent loads of audio\n     * @type {Object[]}\n     */\n\n    _this.tmpEvents = [];\n    /**\n     * @private Holds any running audio downloads\n     * @type {Observer}\n     */\n\n    _this.currentRequest = null;\n    /** @private */\n\n    _this.arraybuffer = null;\n    /** @private */\n\n    _this.drawer = null;\n    /** @private */\n\n    _this.backend = null;\n    /** @private */\n\n    _this.peakCache = null; // cache constructor objects\n\n    if (typeof _this.params.renderer !== 'function') {\n      throw new Error('Renderer parameter is invalid');\n    }\n    /**\n     * @private The uninitialised Drawer class\n     */\n\n\n    _this.Drawer = _this.params.renderer;\n    /**\n     * @private The uninitialised Backend class\n     */\n    // Back compat\n\n    if (_this.params.backend == 'AudioElement') {\n      _this.params.backend = 'MediaElement';\n    }\n\n    if ((_this.params.backend == 'WebAudio' || _this.params.backend === 'MediaElementWebAudio') && !_webaudio.default.prototype.supportsWebAudio.call(null)) {\n      _this.params.backend = 'MediaElement';\n    }\n\n    _this.Backend = _this.backends[_this.params.backend];\n    /**\n     * @private map of plugin names that are currently initialised\n     */\n\n    _this.initialisedPluginList = {};\n    /** @private */\n\n    _this.isDestroyed = false;\n    /**\n     * Get the current ready status.\n     *\n     * @example const isReady = wavesurfer.isReady;\n     * @return {boolean}\n     */\n\n    _this.isReady = false; // responsive debounced event listener. If this.params.responsive is not\n    // set, this is never called. Use 100ms or this.params.responsive as\n    // timeout for the debounce function.\n\n    var prevWidth = 0;\n    _this._onResize = util.debounce(function () {\n      if (prevWidth != _this.drawer.wrapper.clientWidth && !_this.params.scrollParent) {\n        prevWidth = _this.drawer.wrapper.clientWidth;\n\n        _this.drawer.fireEvent('redraw');\n      }\n    }, typeof _this.params.responsive === 'number' ? _this.params.responsive : 100);\n    return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n  }\n  /**\n   * Initialise the wave\n   *\n   * @example\n   * var wavesurfer = new WaveSurfer(params);\n   * wavesurfer.init();\n   * @return {this} The wavesurfer instance\n   */\n\n\n  _createClass(WaveSurfer, [{\n    key: \"init\",\n    value: function init() {\n      this.registerPlugins(this.params.plugins);\n      this.createDrawer();\n      this.createBackend();\n      this.createPeakCache();\n      return this;\n    }\n    /**\n     * Add and initialise array of plugins (if `plugin.deferInit` is falsey),\n     * this function is called in the init function of wavesurfer\n     *\n     * @param {PluginDefinition[]} plugins An array of plugin definitions\n     * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions\n     * @return {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"registerPlugins\",\n    value: function registerPlugins(plugins) {\n      var _this2 = this;\n\n      // first instantiate all the plugins\n      plugins.forEach(function (plugin) {\n        return _this2.addPlugin(plugin);\n      }); // now run the init functions\n\n      plugins.forEach(function (plugin) {\n        // call init function of the plugin if deferInit is falsey\n        // in that case you would manually use initPlugins()\n        if (!plugin.deferInit) {\n          _this2.initPlugin(plugin.name);\n        }\n      });\n      this.fireEvent('plugins-registered', plugins);\n      return this;\n    }\n    /**\n     * Get a map of plugin names that are currently initialised\n     *\n     * @example wavesurfer.getPlugins();\n     * @return {Object} Object with plugin names\n     */\n\n  }, {\n    key: \"getActivePlugins\",\n    value: function getActivePlugins() {\n      return this.initialisedPluginList;\n    }\n    /**\n     * Add a plugin object to wavesurfer\n     *\n     * @param {PluginDefinition} plugin A plugin definition\n     * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added\n     * @example wavesurfer.addPlugin(WaveSurfer.minimap());\n     * @return {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"addPlugin\",\n    value: function addPlugin(plugin) {\n      var _this3 = this;\n\n      if (!plugin.name) {\n        throw new Error('Plugin does not have a name!');\n      }\n\n      if (!plugin.instance) {\n        throw new Error(\"Plugin \".concat(plugin.name, \" does not have an instance property!\"));\n      } // staticProps properties are applied to wavesurfer instance\n\n\n      if (plugin.staticProps) {\n        Object.keys(plugin.staticProps).forEach(function (pluginStaticProp) {\n          /**\n           * Properties defined in a plugin definition's `staticProps` property are added as\n           * staticProps properties of the WaveSurfer instance\n           */\n          _this3[pluginStaticProp] = plugin.staticProps[pluginStaticProp];\n        });\n      }\n\n      var Instance = plugin.instance; // turn the plugin instance into an observer\n\n      var observerPrototypeKeys = Object.getOwnPropertyNames(util.Observer.prototype);\n      observerPrototypeKeys.forEach(function (key) {\n        Instance.prototype[key] = util.Observer.prototype[key];\n      });\n      /**\n       * Instantiated plugin classes are added as a property of the wavesurfer\n       * instance\n       * @type {Object}\n       */\n\n      this[plugin.name] = new Instance(plugin.params || {}, this);\n      this.fireEvent('plugin-added', plugin.name);\n      return this;\n    }\n    /**\n     * Initialise a plugin\n     *\n     * @param {string} name A plugin name\n     * @emits WaveSurfer#plugin-initialised\n     * @example wavesurfer.initPlugin('minimap');\n     * @return {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"initPlugin\",\n    value: function initPlugin(name) {\n      if (!this[name]) {\n        throw new Error(\"Plugin \".concat(name, \" has not been added yet!\"));\n      }\n\n      if (this.initialisedPluginList[name]) {\n        // destroy any already initialised plugins\n        this.destroyPlugin(name);\n      }\n\n      this[name].init();\n      this.initialisedPluginList[name] = true;\n      this.fireEvent('plugin-initialised', name);\n      return this;\n    }\n    /**\n     * Destroy a plugin\n     *\n     * @param {string} name A plugin name\n     * @emits WaveSurfer#plugin-destroyed\n     * @example wavesurfer.destroyPlugin('minimap');\n     * @returns {this} The wavesurfer instance\n     */\n\n  }, {\n    key: \"destroyPlugin\",\n    value: function destroyPlugin(name) {\n      if (!this[name]) {\n        throw new Error(\"Plugin \".concat(name, \" has not been added yet and cannot be destroyed!\"));\n      }\n\n      if (!this.initialisedPluginList[name]) {\n        throw new Error(\"Plugin \".concat(name, \" is not active and cannot be destroyed!\"));\n      }\n\n      if (typeof this[name].destroy !== 'function') {\n        throw new Error(\"Plugin \".concat(name, \" does not have a destroy function!\"));\n      }\n\n      this[name].destroy();\n      delete this.initialisedPluginList[name];\n      this.fireEvent('plugin-destroyed', name);\n      return this;\n    }\n    /**\n     * Destroy all initialised plugins. Convenience function to use when\n     * wavesurfer is removed\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroyAllPlugins\",\n    value: function destroyAllPlugins() {\n      var _this4 = this;\n\n      Object.keys(this.initialisedPluginList).forEach(function (name) {\n        return _this4.destroyPlugin(name);\n      });\n    }\n    /**\n     * Create the drawer and draw the waveform\n     *\n     * @private\n     * @emits WaveSurfer#drawer-created\n     */\n\n  }, {\n    key: \"createDrawer\",\n    value: function createDrawer() {\n      var _this5 = this;\n\n      this.drawer = new this.Drawer(this.container, this.params);\n      this.drawer.init();\n      this.fireEvent('drawer-created', this.drawer);\n\n      if (this.params.responsive !== false) {\n        window.addEventListener('resize', this._onResize, true);\n        window.addEventListener('orientationchange', this._onResize, true);\n      }\n\n      this.drawer.on('redraw', function () {\n        _this5.drawBuffer();\n\n        _this5.drawer.progress(_this5.backend.getPlayedPercents());\n      }); // Click-to-seek\n\n      this.drawer.on('click', function (e, progress) {\n        setTimeout(function () {\n          return _this5.seekTo(progress);\n        }, 0);\n      }); // Relay the scroll event from the drawer\n\n      this.drawer.on('scroll', function (e) {\n        if (_this5.params.partialRender) {\n          _this5.drawBuffer();\n        }\n\n        _this5.fireEvent('scroll', e);\n      });\n    }\n    /**\n     * Create the backend\n     *\n     * @private\n     * @emits WaveSurfer#backend-created\n     */\n\n  }, {\n    key: \"createBackend\",\n    value: function createBackend() {\n      var _this6 = this;\n\n      if (this.backend) {\n        this.backend.destroy();\n      }\n\n      this.backend = new this.Backend(this.params);\n      this.backend.init();\n      this.fireEvent('backend-created', this.backend);\n      this.backend.on('finish', function () {\n        _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n        _this6.fireEvent('finish');\n      });\n      this.backend.on('play', function () {\n        return _this6.fireEvent('play');\n      });\n      this.backend.on('pause', function () {\n        return _this6.fireEvent('pause');\n      });\n      this.backend.on('audioprocess', function (time) {\n        _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n        _this6.fireEvent('audioprocess', time);\n      }); // only needed for MediaElement and MediaElementWebAudio backend\n\n      if (this.params.backend === 'MediaElement' || this.params.backend === 'MediaElementWebAudio') {\n        this.backend.on('seek', function () {\n          _this6.drawer.progress(_this6.backend.getPlayedPercents());\n        });\n        this.backend.on('volume', function () {\n          var newVolume = _this6.getVolume();\n\n          _this6.fireEvent('volume', newVolume);\n\n          if (_this6.backend.isMuted !== _this6.isMuted) {\n            _this6.isMuted = _this6.backend.isMuted;\n\n            _this6.fireEvent('mute', _this6.isMuted);\n          }\n        });\n      }\n    }\n    /**\n     * Create the peak cache\n     *\n     * @private\n     */\n\n  }, {\n    key: \"createPeakCache\",\n    value: function createPeakCache() {\n      if (this.params.partialRender) {\n        this.peakCache = new _peakcache.default();\n      }\n    }\n    /**\n     * Get the duration of the audio clip\n     *\n     * @example const duration = wavesurfer.getDuration();\n     * @return {number} Duration in seconds\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.backend.getDuration();\n    }\n    /**\n     * Get the current playback position\n     *\n     * @example const currentTime = wavesurfer.getCurrentTime();\n     * @return {number} Playback position in seconds\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.backend.getCurrentTime();\n    }\n    /**\n     * Set the current play time in seconds.\n     *\n     * @param {number} seconds A positive number in seconds. E.g. 10 means 10\n     * seconds, 60 means 1 minute\n     */\n\n  }, {\n    key: \"setCurrentTime\",\n    value: function setCurrentTime(seconds) {\n      if (seconds >= this.getDuration()) {\n        this.seekTo(1);\n      } else {\n        this.seekTo(seconds / this.getDuration());\n      }\n    }\n    /**\n     * Starts playback from the current position. Optional start and end\n     * measured in seconds can be used to set the range of audio to play.\n     *\n     * @param {?number} start Position to start at\n     * @param {?number} end Position to end at\n     * @emits WaveSurfer#interaction\n     * @return {Promise} Result of the backend play method\n     * @example\n     * // play from second 1 to 5\n     * wavesurfer.play(1, 5);\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      var _this7 = this;\n\n      this.fireEvent('interaction', function () {\n        return _this7.play(start, end);\n      });\n      return this.backend.play(start, end);\n    }\n    /**\n     * Set a point in seconds for playback to stop at.\n     *\n     * @param {number} position Position (in seconds) to stop at\n     * @version 3.3.0\n     */\n\n  }, {\n    key: \"setPlayEnd\",\n    value: function setPlayEnd(position) {\n      this.backend.setPlayEnd(position);\n    }\n    /**\n     * Stops and pauses playback\n     *\n     * @example wavesurfer.pause();\n     * @return {Promise} Result of the backend pause method\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      if (!this.backend.isPaused()) {\n        return this.backend.pause();\n      }\n    }\n    /**\n     * Toggle playback\n     *\n     * @example wavesurfer.playPause();\n     * @return {Promise} Result of the backend play or pause method\n     */\n\n  }, {\n    key: \"playPause\",\n    value: function playPause() {\n      return this.backend.isPaused() ? this.play() : this.pause();\n    }\n    /**\n     * Get the current playback state\n     *\n     * @example const isPlaying = wavesurfer.isPlaying();\n     * @return {boolean} False if paused, true if playing\n     */\n\n  }, {\n    key: \"isPlaying\",\n    value: function isPlaying() {\n      return !this.backend.isPaused();\n    }\n    /**\n     * Skip backward\n     *\n     * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n     * is used\n     * @example wavesurfer.skipBackward();\n     */\n\n  }, {\n    key: \"skipBackward\",\n    value: function skipBackward(seconds) {\n      this.skip(-seconds || -this.params.skipLength);\n    }\n    /**\n     * Skip forward\n     *\n     * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n     * is used\n     * @example wavesurfer.skipForward();\n     */\n\n  }, {\n    key: \"skipForward\",\n    value: function skipForward(seconds) {\n      this.skip(seconds || this.params.skipLength);\n    }\n    /**\n     * Skip a number of seconds from the current position (use a negative value\n     * to go backwards).\n     *\n     * @param {number} offset Amount to skip back or forwards\n     * @example\n     * // go back 2 seconds\n     * wavesurfer.skip(-2);\n     */\n\n  }, {\n    key: \"skip\",\n    value: function skip(offset) {\n      var duration = this.getDuration() || 1;\n      var position = this.getCurrentTime() || 0;\n      position = Math.max(0, Math.min(duration, position + (offset || 0)));\n      this.seekAndCenter(position / duration);\n    }\n    /**\n     * Seeks to a position and centers the view\n     *\n     * @param {number} progress Between 0 (=beginning) and 1 (=end)\n     * @example\n     * // seek and go to the middle of the audio\n     * wavesurfer.seekTo(0.5);\n     */\n\n  }, {\n    key: \"seekAndCenter\",\n    value: function seekAndCenter(progress) {\n      this.seekTo(progress);\n      this.drawer.recenter(progress);\n    }\n    /**\n     * Seeks to a position\n     *\n     * @param {number} progress Between 0 (=beginning) and 1 (=end)\n     * @emits WaveSurfer#interaction\n     * @emits WaveSurfer#seek\n     * @example\n     * // seek to the middle of the audio\n     * wavesurfer.seekTo(0.5);\n     */\n\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(progress) {\n      var _this8 = this;\n\n      // return an error if progress is not a number between 0 and 1\n      if (typeof progress !== 'number' || !isFinite(progress) || progress < 0 || progress > 1) {\n        throw new Error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');\n      }\n\n      this.fireEvent('interaction', function () {\n        return _this8.seekTo(progress);\n      });\n      var paused = this.backend.isPaused(); // avoid draw wrong position while playing backward seeking\n\n      if (!paused) {\n        this.backend.pause();\n      } // avoid small scrolls while paused seeking\n\n\n      var oldScrollParent = this.params.scrollParent;\n      this.params.scrollParent = false;\n      this.backend.seekTo(progress * this.getDuration());\n      this.drawer.progress(progress);\n\n      if (!paused) {\n        this.backend.play();\n      }\n\n      this.params.scrollParent = oldScrollParent;\n      this.fireEvent('seek', progress);\n    }\n    /**\n     * Stops and goes to the beginning.\n     *\n     * @example wavesurfer.stop();\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.pause();\n      this.seekTo(0);\n      this.drawer.progress(0);\n    }\n    /**\n     * Sets the ID of the audio device to use for output and returns a Promise.\n     *\n     * @param {string} deviceId String value representing underlying output\n     * device\n     * @returns {Promise} `Promise` that resolves to `undefined` when there are\n     * no errors detected.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(deviceId) {\n      return this.backend.setSinkId(deviceId);\n    }\n    /**\n     * Set the playback volume.\n     *\n     * @param {number} newVolume A value between 0 and 1, 0 being no\n     * volume and 1 being full volume.\n     * @emits WaveSurfer#volume\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(newVolume) {\n      this.backend.setVolume(newVolume);\n      this.fireEvent('volume', newVolume);\n    }\n    /**\n     * Get the playback volume.\n     *\n     * @return {number} A value between 0 and 1, 0 being no\n     * volume and 1 being full volume.\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.backend.getVolume();\n    }\n    /**\n     * Set the playback rate.\n     *\n     * @param {number} rate A positive number. E.g. 0.5 means half the normal\n     * speed, 2 means double speed and so on.\n     * @example wavesurfer.setPlaybackRate(2);\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(rate) {\n      this.backend.setPlaybackRate(rate);\n    }\n    /**\n     * Get the playback rate.\n     *\n     * @return {number} The current playback rate.\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.backend.getPlaybackRate();\n    }\n    /**\n     * Toggle the volume on and off. If not currently muted it will save the\n     * current volume value and turn the volume off. If currently muted then it\n     * will restore the volume to the saved value, and then rest the saved\n     * value.\n     *\n     * @example wavesurfer.toggleMute();\n     */\n\n  }, {\n    key: \"toggleMute\",\n    value: function toggleMute() {\n      this.setMute(!this.isMuted);\n    }\n    /**\n     * Enable or disable muted audio\n     *\n     * @param {boolean} mute Specify `true` to mute audio.\n     * @emits WaveSurfer#volume\n     * @emits WaveSurfer#mute\n     * @example\n     * // unmute\n     * wavesurfer.setMute(false);\n     * console.log(wavesurfer.getMute()) // logs false\n     */\n\n  }, {\n    key: \"setMute\",\n    value: function setMute(mute) {\n      // ignore all muting requests if the audio is already in that state\n      if (mute === this.isMuted) {\n        this.fireEvent('mute', this.isMuted);\n        return;\n      }\n\n      if (this.backend.setMute) {\n        // Backends such as the MediaElement backend have their own handling\n        // of mute, let them handle it.\n        this.backend.setMute(mute);\n        this.isMuted = mute;\n      } else {\n        if (mute) {\n          // If currently not muted then save current volume,\n          // turn off the volume and update the mute properties\n          this.savedVolume = this.backend.getVolume();\n          this.backend.setVolume(0);\n          this.isMuted = true;\n          this.fireEvent('volume', 0);\n        } else {\n          // If currently muted then restore to the saved volume\n          // and update the mute properties\n          this.backend.setVolume(this.savedVolume);\n          this.isMuted = false;\n          this.fireEvent('volume', this.savedVolume);\n        }\n      }\n\n      this.fireEvent('mute', this.isMuted);\n    }\n    /**\n     * Get the current mute status.\n     *\n     * @example const isMuted = wavesurfer.getMute();\n     * @return {boolean} Current mute status\n     */\n\n  }, {\n    key: \"getMute\",\n    value: function getMute() {\n      return this.isMuted;\n    }\n    /**\n     * Get the list of current set filters as an array.\n     *\n     * Filters must be set with setFilters method first\n     *\n     * @return {array} List of enabled filters\n     */\n\n  }, {\n    key: \"getFilters\",\n    value: function getFilters() {\n      return this.backend.filters || [];\n    }\n    /**\n     * Toggles `scrollParent` and redraws\n     *\n     * @example wavesurfer.toggleScroll();\n     */\n\n  }, {\n    key: \"toggleScroll\",\n    value: function toggleScroll() {\n      this.params.scrollParent = !this.params.scrollParent;\n      this.drawBuffer();\n    }\n    /**\n     * Toggle mouse interaction\n     *\n     * @example wavesurfer.toggleInteraction();\n     */\n\n  }, {\n    key: \"toggleInteraction\",\n    value: function toggleInteraction() {\n      this.params.interact = !this.params.interact;\n    }\n    /**\n     * Get the fill color of the waveform after the cursor.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getWaveColor\",\n    value: function getWaveColor() {\n      return this.params.waveColor;\n    }\n    /**\n     * Set the fill color of the waveform after the cursor.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setWaveColor('#ddd');\n     */\n\n  }, {\n    key: \"setWaveColor\",\n    value: function setWaveColor(color) {\n      this.params.waveColor = color;\n      this.drawBuffer();\n    }\n    /**\n     * Get the fill color of the waveform behind the cursor.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getProgressColor\",\n    value: function getProgressColor() {\n      return this.params.progressColor;\n    }\n    /**\n     * Set the fill color of the waveform behind the cursor.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setProgressColor('#400');\n     */\n\n  }, {\n    key: \"setProgressColor\",\n    value: function setProgressColor(color) {\n      this.params.progressColor = color;\n      this.drawBuffer();\n    }\n    /**\n     * Get the background color of the waveform container.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getBackgroundColor\",\n    value: function getBackgroundColor() {\n      return this.params.backgroundColor;\n    }\n    /**\n     * Set the background color of the waveform container.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setBackgroundColor('#FF00FF');\n     */\n\n  }, {\n    key: \"setBackgroundColor\",\n    value: function setBackgroundColor(color) {\n      this.params.backgroundColor = color;\n      util.style(this.container, {\n        background: this.params.backgroundColor\n      });\n    }\n    /**\n     * Get the fill color of the cursor indicating the playhead\n     * position.\n     *\n     * @return {string} A CSS color string.\n     */\n\n  }, {\n    key: \"getCursorColor\",\n    value: function getCursorColor() {\n      return this.params.cursorColor;\n    }\n    /**\n     * Set the fill color of the cursor indicating the playhead\n     * position.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setCursorColor('#222');\n     */\n\n  }, {\n    key: \"setCursorColor\",\n    value: function setCursorColor(color) {\n      this.params.cursorColor = color;\n      this.drawer.updateCursor();\n    }\n    /**\n     * Get the height of the waveform.\n     *\n     * @return {number} Height measured in pixels.\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.params.height;\n    }\n    /**\n     * Set the height of the waveform.\n     *\n     * @param {number} height Height measured in pixels.\n     * @example wavesurfer.setHeight(200);\n     */\n\n  }, {\n    key: \"setHeight\",\n    value: function setHeight(height) {\n      this.params.height = height;\n      this.drawer.setHeight(height * this.params.pixelRatio);\n      this.drawBuffer();\n    }\n    /**\n     * Hide channels from being drawn on the waveform if splitting channels.\n     *\n     * For example, if we want to draw only the peaks for the right stereo channel:\n     *\n     * const wavesurfer = new WaveSurfer.create({...splitChannels: true});\n     * wavesurfer.load('stereo_audio.mp3');\n     *\n     * wavesurfer.setFilteredChannel([0]); <-- hide left channel peaks.\n     *\n     * @param {array} channelIndices Channels to be filtered out from drawing.\n     * @version 4.0.0\n     */\n\n  }, {\n    key: \"setFilteredChannels\",\n    value: function setFilteredChannels(channelIndices) {\n      this.params.splitChannelsOptions.filterChannels = channelIndices;\n      this.drawBuffer();\n    }\n    /**\n     * Get the correct peaks for current wave view-port and render wave\n     *\n     * @private\n     * @emits WaveSurfer#redraw\n     */\n\n  }, {\n    key: \"drawBuffer\",\n    value: function drawBuffer() {\n      var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec * this.params.pixelRatio);\n      var parentWidth = this.drawer.getWidth();\n      var width = nominalWidth; // always start at 0 after zooming for scrolling : issue redraw left part\n\n      var start = 0;\n      var end = Math.max(start + parentWidth, width); // Fill container\n\n      if (this.params.fillParent && (!this.params.scrollParent || nominalWidth < parentWidth)) {\n        width = parentWidth;\n        start = 0;\n        end = width;\n      }\n\n      var peaks;\n\n      if (this.params.partialRender) {\n        var newRanges = this.peakCache.addRangeToPeakCache(width, start, end);\n        var i;\n\n        for (i = 0; i < newRanges.length; i++) {\n          peaks = this.backend.getPeaks(width, newRanges[i][0], newRanges[i][1]);\n          this.drawer.drawPeaks(peaks, width, newRanges[i][0], newRanges[i][1]);\n        }\n      } else {\n        peaks = this.backend.getPeaks(width, start, end);\n        this.drawer.drawPeaks(peaks, width, start, end);\n      }\n\n      this.fireEvent('redraw', peaks, width);\n    }\n    /**\n     * Horizontally zooms the waveform in and out. It also changes the parameter\n     * `minPxPerSec` and enables the `scrollParent` option. Calling the function\n     * with a falsey parameter will reset the zoom state.\n     *\n     * @param {?number} pxPerSec Number of horizontal pixels per second of\n     * audio, if none is set the waveform returns to unzoomed state\n     * @emits WaveSurfer#zoom\n     * @example wavesurfer.zoom(20);\n     */\n\n  }, {\n    key: \"zoom\",\n    value: function zoom(pxPerSec) {\n      if (!pxPerSec) {\n        this.params.minPxPerSec = this.defaultParams.minPxPerSec;\n        this.params.scrollParent = false;\n      } else {\n        this.params.minPxPerSec = pxPerSec;\n        this.params.scrollParent = true;\n      }\n\n      this.drawBuffer();\n      this.drawer.progress(this.backend.getPlayedPercents());\n      this.drawer.recenter(this.getCurrentTime() / this.getDuration());\n      this.fireEvent('zoom', pxPerSec);\n    }\n    /**\n     * Decode buffer and load\n     *\n     * @private\n     * @param {ArrayBuffer} arraybuffer Buffer to process\n     */\n\n  }, {\n    key: \"loadArrayBuffer\",\n    value: function loadArrayBuffer(arraybuffer) {\n      var _this9 = this;\n\n      this.decodeArrayBuffer(arraybuffer, function (data) {\n        if (!_this9.isDestroyed) {\n          _this9.loadDecodedBuffer(data);\n        }\n      });\n    }\n    /**\n     * Directly load an externally decoded AudioBuffer\n     *\n     * @private\n     * @param {AudioBuffer} buffer Buffer to process\n     * @emits WaveSurfer#ready\n     */\n\n  }, {\n    key: \"loadDecodedBuffer\",\n    value: function loadDecodedBuffer(buffer) {\n      this.backend.load(buffer);\n      this.drawBuffer();\n      this.isReady = true;\n      this.fireEvent('ready');\n    }\n    /**\n     * Loads audio data from a Blob or File object\n     *\n     * @param {Blob|File} blob Audio data\n     * @example\n     */\n\n  }, {\n    key: \"loadBlob\",\n    value: function loadBlob(blob) {\n      var _this10 = this;\n\n      // Create file reader\n      var reader = new FileReader();\n      reader.addEventListener('progress', function (e) {\n        return _this10.onProgress(e);\n      });\n      reader.addEventListener('load', function (e) {\n        return _this10.loadArrayBuffer(e.target.result);\n      });\n      reader.addEventListener('error', function () {\n        return _this10.fireEvent('error', 'Error reading file');\n      });\n      reader.readAsArrayBuffer(blob);\n      this.empty();\n    }\n    /**\n     * Loads audio and re-renders the waveform.\n     *\n     * @param {string|HTMLMediaElement} url The url of the audio file or the\n     * audio element with the audio\n     * @param {number[]|Number.<Array[]>} peaks Wavesurfer does not have to decode\n     * the audio to render the waveform if this is specified\n     * @param {?string} preload (Use with backend `MediaElement` and `MediaElementWebAudio`)\n     * `'none'|'metadata'|'auto'` Preload attribute for the media element\n     * @param {?number} duration The duration of the audio. This is used to\n     * render the peaks data in the correct size for the audio duration (as\n     * befits the current `minPxPerSec` and zoom value) without having to decode\n     * the audio.\n     * @returns {void}\n     * @throws Will throw an error if the `url` argument is empty.\n     * @example\n     * // uses fetch or media element to load file (depending on backend)\n     * wavesurfer.load('http://example.com/demo.wav');\n     *\n     * // setting preload attribute with media element backend and supplying\n     * // peaks\n     * wavesurfer.load(\n     *   'http://example.com/demo.wav',\n     *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],\n     *   true\n     * );\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(url, peaks, preload, duration) {\n      if (!url) {\n        throw new Error('url parameter cannot be empty');\n      }\n\n      this.empty();\n\n      if (preload) {\n        // check whether the preload attribute will be usable and if not log\n        // a warning listing the reasons why not and nullify the variable\n        var preloadIgnoreReasons = {\n          \"Preload is not 'auto', 'none' or 'metadata'\": ['auto', 'metadata', 'none'].indexOf(preload) === -1,\n          'Peaks are not provided': !peaks,\n          \"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'\": ['MediaElement', 'MediaElementWebAudio'].indexOf(this.params.backend) === -1,\n          'Url is not of type string': typeof url !== 'string'\n        };\n        var activeReasons = Object.keys(preloadIgnoreReasons).filter(function (reason) {\n          return preloadIgnoreReasons[reason];\n        });\n\n        if (activeReasons.length) {\n          // eslint-disable-next-line no-console\n          console.warn('Preload parameter of wavesurfer.load will be ignored because:\\n\\t- ' + activeReasons.join('\\n\\t- ')); // stop invalid values from being used\n\n          preload = null;\n        }\n      }\n\n      switch (this.params.backend) {\n        case 'WebAudio':\n          return this.loadBuffer(url, peaks, duration);\n\n        case 'MediaElement':\n        case 'MediaElementWebAudio':\n          return this.loadMediaElement(url, peaks, preload, duration);\n      }\n    }\n    /**\n     * Loads audio using Web Audio buffer backend.\n     *\n     * @private\n     * @param {string} url URL of audio file\n     * @param {number[]|Number.<Array[]>} peaks Peaks data\n     * @param {?number} duration Optional duration of audio file\n     * @returns {void}\n     */\n\n  }, {\n    key: \"loadBuffer\",\n    value: function loadBuffer(url, peaks, duration) {\n      var _this11 = this;\n\n      var load = function load(action) {\n        if (action) {\n          _this11.tmpEvents.push(_this11.once('ready', action));\n        }\n\n        return _this11.getArrayBuffer(url, function (data) {\n          return _this11.loadArrayBuffer(data);\n        });\n      };\n\n      if (peaks) {\n        this.backend.setPeaks(peaks, duration);\n        this.drawBuffer();\n        this.tmpEvents.push(this.once('interaction', load));\n      } else {\n        return load();\n      }\n    }\n    /**\n     * Either create a media element, or load an existing media element.\n     *\n     * @private\n     * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an\n     * existing HTML5 Audio/Video Element\n     * @param {number[]|Number.<Array[]>} peaks Array of peaks. Required to bypass web audio\n     * dependency\n     * @param {?boolean} preload Set to true if the preload attribute of the\n     * audio element should be enabled\n     * @param {?number} duration Optional duration of audio file\n     */\n\n  }, {\n    key: \"loadMediaElement\",\n    value: function loadMediaElement(urlOrElt, peaks, preload, duration) {\n      var _this12 = this;\n\n      var url = urlOrElt;\n\n      if (typeof urlOrElt === 'string') {\n        this.backend.load(url, this.mediaContainer, peaks, preload);\n      } else {\n        var elt = urlOrElt;\n        this.backend.loadElt(elt, peaks); // If peaks are not provided,\n        // url = element.src so we can get peaks with web audio\n\n        url = elt.src;\n      }\n\n      this.tmpEvents.push(this.backend.once('canplay', function () {\n        // ignore when backend was already destroyed\n        if (!_this12.backend.destroyed) {\n          _this12.drawBuffer();\n\n          _this12.isReady = true;\n\n          _this12.fireEvent('ready');\n        }\n      }), this.backend.once('error', function (err) {\n        return _this12.fireEvent('error', err);\n      }));\n\n      if (peaks) {\n        this.backend.setPeaks(peaks, duration);\n        this.drawBuffer();\n      } // If no pre-decoded peaks are provided, or are provided with\n      // forceDecode flag, attempt to download the audio file and decode it\n      // with Web Audio.\n\n\n      if ((!peaks || this.params.forceDecode) && this.backend.supportsWebAudio()) {\n        this.getArrayBuffer(url, function (arraybuffer) {\n          _this12.decodeArrayBuffer(arraybuffer, function (buffer) {\n            _this12.backend.buffer = buffer;\n\n            _this12.backend.setPeaks(null);\n\n            _this12.drawBuffer();\n\n            _this12.fireEvent('waveform-ready');\n          });\n        });\n      }\n    }\n    /**\n     * Decode an array buffer and pass data to a callback\n     *\n     * @private\n     * @param {Object} arraybuffer The array buffer to decode\n     * @param {function} callback The function to call on complete\n     */\n\n  }, {\n    key: \"decodeArrayBuffer\",\n    value: function decodeArrayBuffer(arraybuffer, callback) {\n      var _this13 = this;\n\n      this.arraybuffer = arraybuffer;\n      this.backend.decodeArrayBuffer(arraybuffer, function (data) {\n        // Only use the decoded data if we haven't been destroyed or\n        // another decode started in the meantime\n        if (!_this13.isDestroyed && _this13.arraybuffer == arraybuffer) {\n          callback(data);\n          _this13.arraybuffer = null;\n        }\n      }, function () {\n        return _this13.fireEvent('error', 'Error decoding audiobuffer');\n      });\n    }\n    /**\n     * Load an array buffer using fetch and pass the result to a callback\n     *\n     * @param {string} url The URL of the file object\n     * @param {function} callback The function to call on complete\n     * @returns {util.fetchFile} fetch call\n     * @private\n     */\n\n  }, {\n    key: \"getArrayBuffer\",\n    value: function getArrayBuffer(url, callback) {\n      var _this14 = this;\n\n      var options = Object.assign({\n        url: url,\n        responseType: 'arraybuffer'\n      }, this.params.xhr);\n      var request = util.fetchFile(options);\n      this.currentRequest = request;\n      this.tmpEvents.push(request.on('progress', function (e) {\n        _this14.onProgress(e);\n      }), request.on('success', function (data) {\n        callback(data);\n        _this14.currentRequest = null;\n      }), request.on('error', function (e) {\n        _this14.fireEvent('error', e);\n\n        _this14.currentRequest = null;\n      }));\n      return request;\n    }\n    /**\n     * Called while the audio file is loading\n     *\n     * @private\n     * @param {Event} e Progress event\n     * @emits WaveSurfer#loading\n     */\n\n  }, {\n    key: \"onProgress\",\n    value: function onProgress(e) {\n      var percentComplete;\n\n      if (e.lengthComputable) {\n        percentComplete = e.loaded / e.total;\n      } else {\n        // Approximate progress with an asymptotic\n        // function, and assume downloads in the 1-3 MB range.\n        percentComplete = e.loaded / (e.loaded + 1000000);\n      }\n\n      this.fireEvent('loading', Math.round(percentComplete * 100), e.target);\n    }\n    /**\n     * Exports PCM data into a JSON array and opens in a new window.\n     *\n     * @param {number} length=1024 The scale in which to export the peaks\n     * @param {number} accuracy=10000\n     * @param {?boolean} noWindow Set to true to disable opening a new\n     * window with the JSON\n     * @param {number} start Start index\n     * @param {number} end End index\n     * @return {Promise} Promise that resolves with array of peaks\n     */\n\n  }, {\n    key: \"exportPCM\",\n    value: function exportPCM(length, accuracy, noWindow, start, end) {\n      length = length || 1024;\n      start = start || 0;\n      accuracy = accuracy || 10000;\n      noWindow = noWindow || false;\n      var peaks = this.backend.getPeaks(length, start, end);\n      var arr = [].map.call(peaks, function (val) {\n        return Math.round(val * accuracy) / accuracy;\n      });\n      return new Promise(function (resolve, reject) {\n        var json = JSON.stringify(arr);\n\n        if (!noWindow) {\n          window.open('data:application/json;charset=utf-8,' + encodeURIComponent(json));\n        }\n\n        resolve(json);\n      });\n    }\n    /**\n     * Save waveform image as data URI.\n     *\n     * The default format is `'image/png'`. Other supported types are\n     * `'image/jpeg'` and `'image/webp'`.\n     *\n     * @param {string} format='image/png' A string indicating the image format.\n     * The default format type is `'image/png'`.\n     * @param {number} quality=1 A number between 0 and 1 indicating the image\n     * quality to use for image formats that use lossy compression such as\n     * `'image/jpeg'`` and `'image/webp'`.\n     * @param {string} type Image data type to return. Either 'dataURL' (default)\n     * or 'blob'.\n     * @return {string|string[]|Promise} When using `'dataURL'` type this returns\n     * a single data URL or an array of data URLs, one for each canvas. When using\n     * `'blob'` type this returns a `Promise` resolving with an array of `Blob`\n     * instances, one for each canvas.\n     */\n\n  }, {\n    key: \"exportImage\",\n    value: function exportImage(format, quality, type) {\n      if (!format) {\n        format = 'image/png';\n      }\n\n      if (!quality) {\n        quality = 1;\n      }\n\n      if (!type) {\n        type = 'dataURL';\n      }\n\n      return this.drawer.getImage(format, quality, type);\n    }\n    /**\n     * Cancel any fetch request currently in progress\n     */\n\n  }, {\n    key: \"cancelAjax\",\n    value: function cancelAjax() {\n      if (this.currentRequest && this.currentRequest.controller) {\n        // If the current request has a ProgressHandler, then its ReadableStream might need to be cancelled too\n        // See: Wavesurfer issue #2042\n        // See Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n        if (this.currentRequest._reader) {\n          // Ignoring exceptions thrown by call to cancel()\n          this.currentRequest._reader.cancel().catch(function (err) {});\n        }\n\n        this.currentRequest.controller.abort();\n        this.currentRequest = null;\n      }\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"clearTmpEvents\",\n    value: function clearTmpEvents() {\n      this.tmpEvents.forEach(function (e) {\n        return e.un();\n      });\n    }\n    /**\n     * Display empty waveform.\n     */\n\n  }, {\n    key: \"empty\",\n    value: function empty() {\n      if (!this.backend.isPaused()) {\n        this.stop();\n        this.backend.disconnectSource();\n      }\n\n      this.isReady = false;\n      this.cancelAjax();\n      this.clearTmpEvents(); // empty drawer\n\n      this.drawer.progress(0);\n      this.drawer.setWidth(0);\n      this.drawer.drawPeaks({\n        length: this.drawer.getWidth()\n      }, 0);\n    }\n    /**\n     * Remove events, elements and disconnect WebAudio nodes.\n     *\n     * @emits WaveSurfer#destroy\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.destroyAllPlugins();\n      this.fireEvent('destroy');\n      this.cancelAjax();\n      this.clearTmpEvents();\n      this.unAll();\n\n      if (this.params.responsive !== false) {\n        window.removeEventListener('resize', this._onResize, true);\n        window.removeEventListener('orientationchange', this._onResize, true);\n      }\n\n      if (this.backend) {\n        this.backend.destroy();\n      }\n\n      if (this.drawer) {\n        this.drawer.destroy();\n      }\n\n      this.isDestroyed = true;\n      this.isReady = false;\n      this.arraybuffer = null;\n    }\n  }]);\n\n  return WaveSurfer;\n}(util.Observer);\n\nexports.default = WaveSurfer;\nWaveSurfer.VERSION = \"4.1.1\";\nWaveSurfer.util = util;\nmodule.exports = exports.default;\n\n/***/ }),\n\n/***/ \"./src/webaudio.js\":\n/*!*************************!*\\\n  !*** ./src/webaudio.js ***!\n  \\*************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar util = _interopRequireWildcard(__webpack_require__(/*! ./util */ \"./src/util/index.js\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n// using constants to prevent someone writing the string wrong\nvar PLAYING = 'playing';\nvar PAUSED = 'paused';\nvar FINISHED = 'finished';\n/**\n * WebAudio backend\n *\n * @extends {Observer}\n */\n\nvar WebAudio = /*#__PURE__*/function (_util$Observer) {\n  _inherits(WebAudio, _util$Observer);\n\n  var _super = _createSuper(WebAudio);\n\n  _createClass(WebAudio, [{\n    key: \"supportsWebAudio\",\n\n    /** scriptBufferSize: size of the processing buffer */\n\n    /** audioContext: allows to process audio with WebAudio API */\n\n    /** @private */\n\n    /** @private */\n\n    /**\n     * Does the browser support this backend\n     *\n     * @return {boolean} Whether or not this browser supports this backend\n     */\n    value: function supportsWebAudio() {\n      return !!(window.AudioContext || window.webkitAudioContext);\n    }\n    /**\n     * Get the audio context used by this backend or create one\n     *\n     * @return {AudioContext} Existing audio context, or creates a new one\n     */\n\n  }, {\n    key: \"getAudioContext\",\n    value: function getAudioContext() {\n      if (!window.WaveSurferAudioContext) {\n        window.WaveSurferAudioContext = new (window.AudioContext || window.webkitAudioContext)();\n      }\n\n      return window.WaveSurferAudioContext;\n    }\n    /**\n     * Get the offline audio context used by this backend or create one\n     *\n     * @param {number} sampleRate The sample rate to use\n     * @return {OfflineAudioContext} Existing offline audio context, or creates\n     * a new one\n     */\n\n  }, {\n    key: \"getOfflineAudioContext\",\n    value: function getOfflineAudioContext(sampleRate) {\n      if (!window.WaveSurferOfflineAudioContext) {\n        window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 2, sampleRate);\n      }\n\n      return window.WaveSurferOfflineAudioContext;\n    }\n    /**\n     * Construct the backend\n     *\n     * @param {WavesurferParams} params Wavesurfer parameters\n     */\n\n  }]);\n\n  function WebAudio(params) {\n    var _this$stateBehaviors, _this$states;\n\n    var _this;\n\n    _classCallCheck(this, WebAudio);\n\n    _this = _super.call(this);\n    /** @private */\n\n    _this.audioContext = null;\n    _this.offlineAudioContext = null;\n    _this.stateBehaviors = (_this$stateBehaviors = {}, _defineProperty(_this$stateBehaviors, PLAYING, {\n      init: function init() {\n        this.addOnAudioProcess();\n      },\n      getPlayedPercents: function getPlayedPercents() {\n        var duration = this.getDuration();\n        return this.getCurrentTime() / duration || 0;\n      },\n      getCurrentTime: function getCurrentTime() {\n        return this.startPosition + this.getPlayedTime();\n      }\n    }), _defineProperty(_this$stateBehaviors, PAUSED, {\n      init: function init() {\n        this.removeOnAudioProcess();\n      },\n      getPlayedPercents: function getPlayedPercents() {\n        var duration = this.getDuration();\n        return this.getCurrentTime() / duration || 0;\n      },\n      getCurrentTime: function getCurrentTime() {\n        return this.startPosition;\n      }\n    }), _defineProperty(_this$stateBehaviors, FINISHED, {\n      init: function init() {\n        this.removeOnAudioProcess();\n        this.fireEvent('finish');\n      },\n      getPlayedPercents: function getPlayedPercents() {\n        return 1;\n      },\n      getCurrentTime: function getCurrentTime() {\n        return this.getDuration();\n      }\n    }), _this$stateBehaviors);\n    _this.params = params;\n    /** ac: Audio Context instance */\n\n    _this.ac = params.audioContext || (_this.supportsWebAudio() ? _this.getAudioContext() : {});\n    /**@private */\n\n    _this.lastPlay = _this.ac.currentTime;\n    /** @private */\n\n    _this.startPosition = 0;\n    /** @private */\n\n    _this.scheduledPause = null;\n    /** @private */\n\n    _this.states = (_this$states = {}, _defineProperty(_this$states, PLAYING, Object.create(_this.stateBehaviors[PLAYING])), _defineProperty(_this$states, PAUSED, Object.create(_this.stateBehaviors[PAUSED])), _defineProperty(_this$states, FINISHED, Object.create(_this.stateBehaviors[FINISHED])), _this$states);\n    /** @private */\n\n    _this.buffer = null;\n    /** @private */\n\n    _this.filters = [];\n    /** gainNode: allows to control audio volume */\n\n    _this.gainNode = null;\n    /** @private */\n\n    _this.mergedPeaks = null;\n    /** @private */\n\n    _this.offlineAc = null;\n    /** @private */\n\n    _this.peaks = null;\n    /** @private */\n\n    _this.playbackRate = 1;\n    /** analyser: provides audio analysis information */\n\n    _this.analyser = null;\n    /** scriptNode: allows processing audio */\n\n    _this.scriptNode = null;\n    /** @private */\n\n    _this.source = null;\n    /** @private */\n\n    _this.splitPeaks = [];\n    /** @private */\n\n    _this.state = null;\n    /** @private */\n\n    _this.explicitDuration = params.duration;\n    /**\n     * Boolean indicating if the backend was destroyed.\n     */\n\n    _this.destroyed = false;\n    return _this;\n  }\n  /**\n   * Initialise the backend, called in `wavesurfer.createBackend()`\n   */\n\n\n  _createClass(WebAudio, [{\n    key: \"init\",\n    value: function init() {\n      this.createVolumeNode();\n      this.createScriptNode();\n      this.createAnalyserNode();\n      this.setState(PAUSED);\n      this.setPlaybackRate(this.params.audioRate);\n      this.setLength(0);\n    }\n    /** @private */\n\n  }, {\n    key: \"disconnectFilters\",\n    value: function disconnectFilters() {\n      if (this.filters) {\n        this.filters.forEach(function (filter) {\n          filter && filter.disconnect();\n        });\n        this.filters = null; // Reconnect direct path\n\n        this.analyser.connect(this.gainNode);\n      }\n    }\n    /**\n     * @private\n     *\n     * @param {string} state The new state\n     */\n\n  }, {\n    key: \"setState\",\n    value: function setState(state) {\n      if (this.state !== this.states[state]) {\n        this.state = this.states[state];\n        this.state.init.call(this);\n      }\n    }\n    /**\n     * Unpacked `setFilters()`\n     *\n     * @param {...AudioNode} filters One or more filters to set\n     */\n\n  }, {\n    key: \"setFilter\",\n    value: function setFilter() {\n      for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n        filters[_key] = arguments[_key];\n      }\n\n      this.setFilters(filters);\n    }\n    /**\n     * Insert custom Web Audio nodes into the graph\n     *\n     * @param {AudioNode[]} filters Packed filters array\n     * @example\n     * const lowpass = wavesurfer.backend.ac.createBiquadFilter();\n     * wavesurfer.backend.setFilter(lowpass);\n     */\n\n  }, {\n    key: \"setFilters\",\n    value: function setFilters(filters) {\n      // Remove existing filters\n      this.disconnectFilters(); // Insert filters if filter array not empty\n\n      if (filters && filters.length) {\n        this.filters = filters; // Disconnect direct path before inserting filters\n\n        this.analyser.disconnect(); // Connect each filter in turn\n\n        filters.reduce(function (prev, curr) {\n          prev.connect(curr);\n          return curr;\n        }, this.analyser).connect(this.gainNode);\n      }\n    }\n    /** Create ScriptProcessorNode to process audio */\n\n  }, {\n    key: \"createScriptNode\",\n    value: function createScriptNode() {\n      if (this.params.audioScriptProcessor) {\n        this.scriptNode = this.params.audioScriptProcessor;\n      } else {\n        if (this.ac.createScriptProcessor) {\n          this.scriptNode = this.ac.createScriptProcessor(WebAudio.scriptBufferSize);\n        } else {\n          this.scriptNode = this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);\n        }\n      }\n\n      this.scriptNode.connect(this.ac.destination);\n    }\n    /** @private */\n\n  }, {\n    key: \"addOnAudioProcess\",\n    value: function addOnAudioProcess() {\n      var _this2 = this;\n\n      this.scriptNode.onaudioprocess = function () {\n        var time = _this2.getCurrentTime();\n\n        if (time >= _this2.getDuration()) {\n          _this2.setState(FINISHED);\n\n          _this2.fireEvent('pause');\n        } else if (time >= _this2.scheduledPause) {\n          _this2.pause();\n        } else if (_this2.state === _this2.states[PLAYING]) {\n          _this2.fireEvent('audioprocess', time);\n        }\n      };\n    }\n    /** @private */\n\n  }, {\n    key: \"removeOnAudioProcess\",\n    value: function removeOnAudioProcess() {\n      this.scriptNode.onaudioprocess = function () {};\n    }\n    /** Create analyser node to perform audio analysis */\n\n  }, {\n    key: \"createAnalyserNode\",\n    value: function createAnalyserNode() {\n      this.analyser = this.ac.createAnalyser();\n      this.analyser.connect(this.gainNode);\n    }\n    /**\n     * Create the gain node needed to control the playback volume.\n     *\n     */\n\n  }, {\n    key: \"createVolumeNode\",\n    value: function createVolumeNode() {\n      // Create gain node using the AudioContext\n      if (this.ac.createGain) {\n        this.gainNode = this.ac.createGain();\n      } else {\n        this.gainNode = this.ac.createGainNode();\n      } // Add the gain node to the graph\n\n\n      this.gainNode.connect(this.ac.destination);\n    }\n    /**\n     * Set the sink id for the media player\n     *\n     * @param {string} deviceId String value representing audio device id.\n     * @returns {Promise} A Promise that resolves to `undefined` when there\n     * are no errors.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(deviceId) {\n      if (deviceId) {\n        /**\n         * The webaudio API doesn't currently support setting the device\n         * output. Here we create an HTMLAudioElement, connect the\n         * webaudio stream to that element and setSinkId there.\n         */\n        var audio = new window.Audio();\n\n        if (!audio.setSinkId) {\n          return Promise.reject(new Error('setSinkId is not supported in your browser'));\n        }\n\n        audio.autoplay = true;\n        var dest = this.ac.createMediaStreamDestination();\n        this.gainNode.disconnect();\n        this.gainNode.connect(dest);\n        audio.srcObject = dest.stream;\n        return audio.setSinkId(deviceId);\n      } else {\n        return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n      }\n    }\n    /**\n     * Set the audio volume\n     *\n     * @param {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(value) {\n      this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);\n    }\n    /**\n     * Get the current volume\n     *\n     * @return {number} value A floating point value between 0 and 1.\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.gainNode.gain.value;\n    }\n    /**\n     * Decode an array buffer and pass data to a callback\n     *\n     * @private\n     * @param {ArrayBuffer} arraybuffer The array buffer to decode\n     * @param {function} callback The function to call on complete.\n     * @param {function} errback The function to call on error.\n     */\n\n  }, {\n    key: \"decodeArrayBuffer\",\n    value: function decodeArrayBuffer(arraybuffer, callback, errback) {\n      if (!this.offlineAc) {\n        this.offlineAc = this.getOfflineAudioContext(this.ac && this.ac.sampleRate ? this.ac.sampleRate : 44100);\n      }\n\n      this.offlineAc.decodeAudioData(arraybuffer, function (data) {\n        return callback(data);\n      }, errback);\n    }\n    /**\n     * Set pre-decoded peaks\n     *\n     * @param {number[]|Number.<Array[]>} peaks Peaks data\n     * @param {?number} duration Explicit duration\n     */\n\n  }, {\n    key: \"setPeaks\",\n    value: function setPeaks(peaks, duration) {\n      if (duration != null) {\n        this.explicitDuration = duration;\n      }\n\n      this.peaks = peaks;\n    }\n    /**\n     * Set the rendered length (different from the length of the audio)\n     *\n     * @param {number} length The rendered length\n     */\n\n  }, {\n    key: \"setLength\",\n    value: function setLength(length) {\n      // No resize, we can preserve the cached peaks.\n      if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {\n        return;\n      }\n\n      this.splitPeaks = [];\n      this.mergedPeaks = []; // Set the last element of the sparse array so the peak arrays are\n      // appropriately sized for other calculations.\n\n      var channels = this.buffer ? this.buffer.numberOfChannels : 1;\n      var c;\n\n      for (c = 0; c < channels; c++) {\n        this.splitPeaks[c] = [];\n        this.splitPeaks[c][2 * (length - 1)] = 0;\n        this.splitPeaks[c][2 * (length - 1) + 1] = 0;\n      }\n\n      this.mergedPeaks[2 * (length - 1)] = 0;\n      this.mergedPeaks[2 * (length - 1) + 1] = 0;\n    }\n    /**\n     * Compute the max and min value of the waveform when broken into <length> subranges.\n     *\n     * @param {number} length How many subranges to break the waveform into.\n     * @param {number} first First sample in the required range.\n     * @param {number} last Last sample in the required range.\n     * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of arrays of\n     * peaks consisting of (max, min) values for each subrange.\n     */\n\n  }, {\n    key: \"getPeaks\",\n    value: function getPeaks(length, first, last) {\n      if (this.peaks) {\n        return this.peaks;\n      }\n\n      if (!this.buffer) {\n        return [];\n      }\n\n      first = first || 0;\n      last = last || length - 1;\n      this.setLength(length);\n\n      if (!this.buffer) {\n        return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n      }\n      /**\n       * The following snippet fixes a buffering data issue on the Safari\n       * browser which returned undefined It creates the missing buffer based\n       * on 1 channel, 4096 samples and the sampleRate from the current\n       * webaudio context 4096 samples seemed to be the best fit for rendering\n       * will review this code once a stable version of Safari TP is out\n       */\n\n\n      if (!this.buffer.length) {\n        var newBuffer = this.createBuffer(1, 4096, this.sampleRate);\n        this.buffer = newBuffer.buffer;\n      }\n\n      var sampleSize = this.buffer.length / length;\n      var sampleStep = ~~(sampleSize / 10) || 1;\n      var channels = this.buffer.numberOfChannels;\n      var c;\n\n      for (c = 0; c < channels; c++) {\n        var peaks = this.splitPeaks[c];\n        var chan = this.buffer.getChannelData(c);\n        var i = void 0;\n\n        for (i = first; i <= last; i++) {\n          var start = ~~(i * sampleSize);\n          var end = ~~(start + sampleSize);\n          /**\n           * Initialize the max and min to the first sample of this\n           * subrange, so that even if the samples are entirely\n           * on one side of zero, we still return the true max and\n           * min values in the subrange.\n           */\n\n          var min = chan[start];\n          var max = min;\n          var j = void 0;\n\n          for (j = start; j < end; j += sampleStep) {\n            var value = chan[j];\n\n            if (value > max) {\n              max = value;\n            }\n\n            if (value < min) {\n              min = value;\n            }\n          }\n\n          peaks[2 * i] = max;\n          peaks[2 * i + 1] = min;\n\n          if (c == 0 || max > this.mergedPeaks[2 * i]) {\n            this.mergedPeaks[2 * i] = max;\n          }\n\n          if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {\n            this.mergedPeaks[2 * i + 1] = min;\n          }\n        }\n      }\n\n      return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n    }\n    /**\n     * Get the position from 0 to 1\n     *\n     * @return {number} Position\n     */\n\n  }, {\n    key: \"getPlayedPercents\",\n    value: function getPlayedPercents() {\n      return this.state.getPlayedPercents.call(this);\n    }\n    /** @private */\n\n  }, {\n    key: \"disconnectSource\",\n    value: function disconnectSource() {\n      if (this.source) {\n        this.source.disconnect();\n      }\n    }\n    /**\n     * Destroy all references with WebAudio, disconnecting audio nodes and closing Audio Context\n     */\n\n  }, {\n    key: \"destroyWebAudio\",\n    value: function destroyWebAudio() {\n      this.disconnectFilters();\n      this.disconnectSource();\n      this.gainNode.disconnect();\n      this.scriptNode.disconnect();\n      this.analyser.disconnect(); // close the audioContext if closeAudioContext option is set to true\n\n      if (this.params.closeAudioContext) {\n        // check if browser supports AudioContext.close()\n        if (typeof this.ac.close === 'function' && this.ac.state != 'closed') {\n          this.ac.close();\n        } // clear the reference to the audiocontext\n\n\n        this.ac = null; // clear the actual audiocontext, either passed as param or the\n        // global singleton\n\n        if (!this.params.audioContext) {\n          window.WaveSurferAudioContext = null;\n        } else {\n          this.params.audioContext = null;\n        } // clear the offlineAudioContext\n\n\n        window.WaveSurferOfflineAudioContext = null;\n      }\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.isPaused()) {\n        this.pause();\n      }\n\n      this.unAll();\n      this.buffer = null;\n      this.destroyed = true;\n      this.destroyWebAudio();\n    }\n    /**\n     * Loaded a decoded audio buffer\n     *\n     * @param {Object} buffer Decoded audio buffer to load\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(buffer) {\n      this.startPosition = 0;\n      this.lastPlay = this.ac.currentTime;\n      this.buffer = buffer;\n      this.createSource();\n    }\n    /** @private */\n\n  }, {\n    key: \"createSource\",\n    value: function createSource() {\n      this.disconnectSource();\n      this.source = this.ac.createBufferSource(); // adjust for old browsers\n\n      this.source.start = this.source.start || this.source.noteGrainOn;\n      this.source.stop = this.source.stop || this.source.noteOff;\n      this.source.playbackRate.setValueAtTime(this.playbackRate, this.ac.currentTime);\n      this.source.buffer = this.buffer;\n      this.source.connect(this.analyser);\n    }\n    /**\n     * @private\n     *\n     * some browsers require an explicit call to #resume before they will play back audio\n     */\n\n  }, {\n    key: \"resumeAudioContext\",\n    value: function resumeAudioContext() {\n      if (this.ac.state == 'suspended') {\n        this.ac.resume && this.ac.resume();\n      }\n    }\n    /**\n     * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n     *\n     * @return {boolean} Whether or not this backend is currently paused\n     */\n\n  }, {\n    key: \"isPaused\",\n    value: function isPaused() {\n      return this.state !== this.states[PLAYING];\n    }\n    /**\n     * Used by `wavesurfer.getDuration()`\n     *\n     * @return {number} Duration of loaded buffer\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      if (this.explicitDuration) {\n        return this.explicitDuration;\n      }\n\n      if (!this.buffer) {\n        return 0;\n      }\n\n      return this.buffer.duration;\n    }\n    /**\n     * Used by `wavesurfer.seekTo()`\n     *\n     * @param {number} start Position to start at in seconds\n     * @param {number} end Position to end at in seconds\n     * @return {{start: number, end: number}} Object containing start and end\n     * positions\n     */\n\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(start, end) {\n      if (!this.buffer) {\n        return;\n      }\n\n      this.scheduledPause = null;\n\n      if (start == null) {\n        start = this.getCurrentTime();\n\n        if (start >= this.getDuration()) {\n          start = 0;\n        }\n      }\n\n      if (end == null) {\n        end = this.getDuration();\n      }\n\n      this.startPosition = start;\n      this.lastPlay = this.ac.currentTime;\n\n      if (this.state === this.states[FINISHED]) {\n        this.setState(PAUSED);\n      }\n\n      return {\n        start: start,\n        end: end\n      };\n    }\n    /**\n     * Get the playback position in seconds\n     *\n     * @return {number} The playback position in seconds\n     */\n\n  }, {\n    key: \"getPlayedTime\",\n    value: function getPlayedTime() {\n      return (this.ac.currentTime - this.lastPlay) * this.playbackRate;\n    }\n    /**\n     * Plays the loaded audio region.\n     *\n     * @param {number} start Start offset in seconds, relative to the beginning\n     * of a clip.\n     * @param {number} end When to stop relative to the beginning of a clip.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(start, end) {\n      if (!this.buffer) {\n        return;\n      } // need to re-create source on each playback\n\n\n      this.createSource();\n      var adjustedTime = this.seekTo(start, end);\n      start = adjustedTime.start;\n      end = adjustedTime.end;\n      this.scheduledPause = end;\n      this.source.start(0, start);\n      this.resumeAudioContext();\n      this.setState(PLAYING);\n      this.fireEvent('play');\n    }\n    /**\n     * Pauses the loaded audio.\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.scheduledPause = null;\n      this.startPosition += this.getPlayedTime();\n      this.source && this.source.stop(0);\n      this.setState(PAUSED);\n      this.fireEvent('pause');\n    }\n    /**\n     * Returns the current time in seconds relative to the audio-clip's\n     * duration.\n     *\n     * @return {number} The current time in seconds\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.state.getCurrentTime.call(this);\n    }\n    /**\n     * Returns the current playback rate. (0=no playback, 1=normal playback)\n     *\n     * @return {number} The current playback rate\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.playbackRate;\n    }\n    /**\n     * Set the audio source playback rate.\n     *\n     * @param {number} value The playback rate to use\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(value) {\n      value = value || 1;\n\n      if (this.isPaused()) {\n        this.playbackRate = value;\n      } else {\n        this.pause();\n        this.playbackRate = value;\n        this.play();\n      }\n    }\n    /**\n     * Set a point in seconds for playback to stop at.\n     *\n     * @param {number} end Position to end at\n     * @version 3.3.0\n     */\n\n  }, {\n    key: \"setPlayEnd\",\n    value: function setPlayEnd(end) {\n      this.scheduledPause = end;\n    }\n  }]);\n\n  return WebAudio;\n}(util.Observer);\n\nexports.default = WebAudio;\nWebAudio.scriptBufferSize = 256;\nmodule.exports = exports.default;\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=wavesurfer.js.map","/**\n * @typedef {Object} MicrophonePluginParams\n * @property {MediaStreamConstraints} constraints The constraints parameter is a\n * MediaStreamConstaints object with two members: video and audio, describing\n * the media types requested. Either or both must be specified.\n * @property {number} bufferSize=4096 The buffer size in units of sample-frames.\n * If specified, the bufferSize must be one of the following values: `256`,\n * `512`, `1024`, `2048`, `4096`, `8192`, `16384`\n * @property {number} numberOfInputChannels=1 Integer specifying the number of\n * channels for this node's input. Values of up to 32 are supported.\n * @property {number} numberOfOutputChannels=1 Integer specifying the number of\n * channels for this node's output.\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('microphone')`\n */\n\n/**\n * Visualize microphone input in a wavesurfer instance.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import MicrophonePlugin from 'wavesurfer.microphone.js';\n *\n * // commonjs\n * var MicrophonePlugin = require('wavesurfer.microphone.js');\n *\n * // if you are using <script> tags\n * var MicrophonePlugin = window.WaveSurfer.microphone;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     MicrophonePlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class MicrophonePlugin {\n    /**\n     * Microphone plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {MicrophonePluginParams} params parameters use to initialise the plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'microphone',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            instance: MicrophonePlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n\n        this.active = false;\n        this.paused = false;\n        this.browser = this.detectBrowser();\n        this.reloadBufferFunction = e => this.reloadBuffer(e);\n\n        // cross-browser getUserMedia\n        const promisifiedOldGUM = (\n            constraints,\n            successCallback,\n            errorCallback\n        ) => {\n            // get a hold of getUserMedia, if present\n            const getUserMedia =\n                navigator.getUserMedia ||\n                navigator.webkitGetUserMedia ||\n                navigator.mozGetUserMedia ||\n                navigator.msGetUserMedia;\n            // Some browsers just don't implement it - return a rejected\n            // promise with an error to keep a consistent interface\n            if (!getUserMedia) {\n                return Promise.reject(\n                    new Error('getUserMedia is not implemented in this browser')\n                );\n            }\n            // otherwise, wrap the call to the old navigator.getUserMedia with\n            // a Promise\n            return new Promise((successCallback, errorCallback) => {\n                getUserMedia.call(\n                    navigator,\n                    constraints,\n                    successCallback,\n                    errorCallback\n                );\n            });\n        };\n        // Older browsers might not implement mediaDevices at all, so we set an\n        // empty object first\n        if (navigator.mediaDevices === undefined) {\n            navigator.mediaDevices = {};\n        }\n        // Some browsers partially implement mediaDevices. We can't just assign\n        // an object with getUserMedia as it would overwrite existing\n        // properties. Here, we will just add the getUserMedia property if it's\n        // missing.\n        if (navigator.mediaDevices.getUserMedia === undefined) {\n            navigator.mediaDevices.getUserMedia = promisifiedOldGUM;\n        }\n        this.constraints = this.params.constraints || {\n            video: false,\n            audio: true\n        };\n        this.bufferSize = this.params.bufferSize || 4096;\n        this.numberOfInputChannels = this.params.numberOfInputChannels || 1;\n        this.numberOfOutputChannels = this.params.numberOfOutputChannels || 1;\n\n        this._onBackendCreated = () => {\n            // wavesurfer's AudioContext where we'll route the mic signal to\n            this.micContext = this.wavesurfer.backend.getAudioContext();\n        };\n    }\n\n    init() {\n        this.wavesurfer.on('backend-created', this._onBackendCreated);\n        if (this.wavesurfer.backend) {\n            this._onBackendCreated();\n        }\n    }\n\n    /**\n     * Destroy the microphone plugin.\n     */\n    destroy() {\n        // make sure the buffer is not redrawn during\n        // cleanup and demolition of this plugin.\n        this.paused = true;\n\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\n        this.stop();\n    }\n\n    /**\n     * Allow user to select audio input device, e.g. microphone, and\n     * start the visualization.\n     */\n    start() {\n        navigator.mediaDevices\n            .getUserMedia(this.constraints)\n            .then(data => this.gotStream(data))\n            .catch(data => this.deviceError(data));\n    }\n\n    /**\n     * Pause/resume visualization.\n     */\n    togglePlay() {\n        if (!this.active) {\n            // start it first\n            this.start();\n        } else {\n            // toggle paused\n            this.paused = !this.paused;\n\n            if (this.paused) {\n                this.pause();\n            } else {\n                this.play();\n            }\n        }\n    }\n\n    /**\n     * Play visualization.\n     */\n    play() {\n        this.paused = false;\n\n        this.connect();\n    }\n\n    /**\n     * Pause visualization.\n     */\n    pause() {\n        this.paused = true;\n\n        // disconnect sources so they can be used elsewhere\n        // (eg. during audio playback)\n        this.disconnect();\n    }\n\n    /**\n     * Stop the device stream and remove any remaining waveform drawing from\n     * the wavesurfer canvas.\n     */\n    stop() {\n        if (this.active) {\n            // stop visualization and device\n            this.stopDevice();\n\n            // empty last frame\n            this.wavesurfer.empty();\n        }\n    }\n\n    /**\n     * Stop the device and the visualization.\n     */\n    stopDevice() {\n        this.active = false;\n\n        // stop visualization\n        this.disconnect();\n\n        // stop stream from device\n        if (this.stream) {\n            // MediaStream.stop is deprecated since:\n            // - Firefox 44 (https://www.fxsitecompat.com/en-US/docs/2015/mediastream-stop-has-been-deprecated/)\n            // - Chrome 45 (https://developers.google.com/web/updates/2015/07/mediastream-deprecations)\n            if (\n                (this.browser.browser === 'chrome' &&\n                    this.browser.version >= 45) ||\n                (this.browser.browser === 'firefox' &&\n                    this.browser.version >= 44) ||\n                this.browser.browser === 'edge' ||\n                this.browser.browser === 'safari'\n            ) {\n                if (this.stream.getTracks) {\n                    // note that this should not be a call\n                    this.stream.getTracks().forEach(stream => stream.stop());\n                    return;\n                }\n            }\n\n            this.stream.stop();\n        }\n    }\n\n    /**\n     * Connect the media sources that feed the visualization.\n     */\n    connect() {\n        if (this.stream !== undefined) {\n            // Create a local buffer for data to be copied to the Wavesurfer buffer for Edge\n            if (this.browser.browser === 'edge') {\n                this.localAudioBuffer = this.micContext.createBuffer(\n                    this.numberOfInputChannels,\n                    this.bufferSize,\n                    this.micContext.sampleRate\n                );\n            }\n\n            // Create an AudioNode from the stream.\n            this.mediaStreamSource = this.micContext.createMediaStreamSource(\n                this.stream\n            );\n\n            this.levelChecker = this.micContext.createScriptProcessor(\n                this.bufferSize,\n                this.numberOfInputChannels,\n                this.numberOfOutputChannels\n            );\n            this.mediaStreamSource.connect(this.levelChecker);\n\n            this.levelChecker.connect(this.micContext.destination);\n            this.levelChecker.onaudioprocess = this.reloadBufferFunction;\n        }\n    }\n\n    /**\n     * Disconnect the media sources that feed the visualization.\n     */\n    disconnect() {\n        if (this.mediaStreamSource !== undefined) {\n            this.mediaStreamSource.disconnect();\n        }\n\n        if (this.levelChecker !== undefined) {\n            this.levelChecker.disconnect();\n            this.levelChecker.onaudioprocess = undefined;\n        }\n\n        if (this.localAudioBuffer !== undefined) {\n            this.localAudioBuffer = undefined;\n        }\n    }\n\n    /**\n     * Redraw the waveform.\n     *\n     * @param {object} event Audioprocess event\n     */\n    reloadBuffer(event) {\n        if (!this.paused) {\n            this.wavesurfer.empty();\n\n            if (this.browser.browser === 'edge') {\n                // copy audio data to a local audio buffer,\n                // from https://github.com/audiojs/audio-buffer-utils\n                let channel, l;\n                for (\n                    channel = 0,\n                    l = Math.min(\n                        this.localAudioBuffer.numberOfChannels,\n                        event.inputBuffer.numberOfChannels\n                    );\n                    channel < l;\n                    channel++\n                ) {\n                    this.localAudioBuffer\n                        .getChannelData(channel)\n                        .set(event.inputBuffer.getChannelData(channel));\n                }\n\n                this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer);\n            } else {\n                this.wavesurfer.loadDecodedBuffer(event.inputBuffer);\n            }\n        }\n    }\n\n    /**\n     * Audio input device is ready.\n     *\n     * @param {MediaStream} stream The microphone's media stream.\n     */\n    gotStream(stream) {\n        this.stream = stream;\n        this.active = true;\n\n        // start visualization\n        this.play();\n\n        // notify listeners\n        this.fireEvent('deviceReady', stream);\n    }\n\n    /**\n     * Device error callback.\n     *\n     * @param {string} code Error message\n     */\n    deviceError(code) {\n        // notify listeners\n        this.fireEvent('deviceError', code);\n    }\n\n    /**\n     * Extract browser version out of the provided user agent string.\n     * @param {!string} uastring userAgent string.\n     * @param {!string} expr Regular expression used as match criteria.\n     * @param {!number} pos position in the version string to be returned.\n     * @return {!number} browser version.\n     */\n    extractVersion(uastring, expr, pos) {\n        const match = uastring.match(expr);\n        return match && match.length >= pos && parseInt(match[pos], 10);\n    }\n\n    /**\n     * Browser detector.\n     * @return {object} result containing browser, version and minVersion\n     *     properties.\n     */\n    detectBrowser() {\n        // Returned result object.\n        const result = {};\n        result.browser = null;\n        result.version = null;\n        result.minVersion = null;\n\n        // Non supported browser.\n        if (typeof window === 'undefined' || !window.navigator) {\n            result.browser = 'Not a supported browser.';\n            return result;\n        }\n\n        if (navigator.mozGetUserMedia) {\n            // Firefox\n            result.browser = 'firefox';\n            result.version = this.extractVersion(\n                navigator.userAgent,\n                /Firefox\\/(\\d+)\\./,\n                1\n            );\n            result.minVersion = 31;\n            return result;\n        } else if (navigator.webkitGetUserMedia) {\n            // Chrome/Chromium/Webview/Opera\n            result.browser = 'chrome';\n            result.version = this.extractVersion(\n                navigator.userAgent,\n                /Chrom(e|ium)\\/(\\d+)\\./,\n                2\n            );\n            result.minVersion = 38;\n            return result;\n        } else if (\n            navigator.mediaDevices &&\n            navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)\n        ) {\n            // Edge\n            result.browser = 'edge';\n            result.version = this.extractVersion(\n                navigator.userAgent,\n                /Edge\\/(\\d+).(\\d+)$/,\n                2\n            );\n            result.minVersion = 10547;\n            return result;\n        } else if (\n            window.RTCPeerConnection &&\n            navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)\n        ) {\n            // Safari\n            result.browser = 'safari';\n            result.minVersion = 11;\n            result.version = this.extractVersion(\n                navigator.userAgent,\n                /AppleWebKit\\/(\\d+)\\./,\n                1\n            );\n            return result;\n        }\n\n        // Non supported browser default.\n        result.browser = 'Not a supported browser.';\n        return result;\n    }\n}\n","/**\n *  @since 4.0.0\n *\n * (Single) Region plugin class\n *\n * Must be turned into an observer before instantiating. This is done in\n * `RegionsPlugin` (main plugin class).\n *\n * @extends {Observer}\n */\nexport class Region {\n    constructor(params, regionsUtils, ws) {\n        this.wavesurfer = ws;\n        this.wrapper = ws.drawer.wrapper;\n        this.util = ws.util;\n        this.style = this.util.style;\n        this.regionsUtil = regionsUtils;\n\n        this.id = params.id == null ? ws.util.getId() : params.id;\n        this.start = Number(params.start) || 0;\n        this.end =\n            params.end == null\n                ? // small marker-like region\n                this.start +\n                (4 / this.wrapper.scrollWidth) * this.wavesurfer.getDuration()\n                : Number(params.end);\n        this.resize =\n            params.resize === undefined ? true : Boolean(params.resize);\n        this.drag = params.drag === undefined ? true : Boolean(params.drag);\n        // reflect resize and drag state of region for region-updated listener\n        this.isResizing = false;\n        this.isDragging = false;\n        this.loop = Boolean(params.loop);\n        this.color = params.color || 'rgba(0, 0, 0, 0.1)';\n        // The left and right handleStyle properties can be set to 'none' for\n        // no styling or can be assigned an object containing CSS properties.\n        this.handleStyle = params.handleStyle || {\n            left: {},\n            right: {}\n        };\n        this.handleLeftEl = null;\n        this.handleRightEl = null;\n        this.data = params.data || {};\n        this.attributes = params.attributes || {};\n\n        this.maxLength = params.maxLength;\n        // It assumes the minLength parameter value, or the regionsMinLength parameter value, if the first one not provided\n        this.minLength = params.minLength;\n        this._onRedraw = () => this.updateRender();\n\n        this.scroll = params.scroll !== false && ws.params.scrollParent;\n        this.scrollSpeed = params.scrollSpeed || 1;\n        this.scrollThreshold = params.scrollThreshold || 10;\n        // Determines whether the context menu is prevented from being opened.\n        this.preventContextMenu =\n            params.preventContextMenu === undefined\n                ? false\n                : Boolean(params.preventContextMenu);\n\n        // select channel ID to set region\n        let channelIdx =\n            params.channelIdx == null ? -1 : parseInt(params.channelIdx);\n        this.regionHeight = '100%';\n        this.marginTop = '0px';\n\n        if (channelIdx !== -1) {\n            let channelCount =\n                this.wavesurfer.backend.buffer != null\n                    ? this.wavesurfer.backend.buffer.numberOfChannels\n                    : -1;\n            if (channelCount >= 0 && channelIdx < channelCount) {\n                this.regionHeight = Math.floor((1 / channelCount) * 100) + '%';\n                this.marginTop =\n                    this.wavesurfer.getHeight() * channelIdx + 'px';\n            }\n        }\n\n        this.formatTimeCallback = params.formatTimeCallback;\n        this.edgeScrollWidth = params.edgeScrollWidth;\n        this.bindInOut();\n        this.render();\n        this.wavesurfer.on('zoom', this._onRedraw);\n        this.wavesurfer.on('redraw', this._onRedraw);\n        this.wavesurfer.fireEvent('region-created', this);\n    }\n\n    /* Update region params. */\n    update(params) {\n        if (params.start != null) {\n            this.start = Number(params.start);\n        }\n        if (params.end != null) {\n            this.end = Number(params.end);\n        }\n        if (params.loop != null) {\n            this.loop = Boolean(params.loop);\n        }\n        if (params.color != null) {\n            this.color = params.color;\n        }\n        if (params.handleStyle != null) {\n            this.handleStyle = params.handleStyle;\n        }\n        if (params.data != null) {\n            this.data = params.data;\n        }\n        if (params.resize != null) {\n            this.resize = Boolean(params.resize);\n            this.updateHandlesResize(this.resize);\n        }\n        if (params.drag != null) {\n            this.drag = Boolean(params.drag);\n        }\n        if (params.maxLength != null) {\n            this.maxLength = Number(params.maxLength);\n        }\n        if (params.minLength != null) {\n            this.minLength = Number(params.minLength);\n        }\n        if (params.attributes != null) {\n            this.attributes = params.attributes;\n        }\n\n        this.updateRender();\n        this.fireEvent('update');\n        this.wavesurfer.fireEvent('region-updated', this);\n    }\n\n    /* Remove a single region. */\n    remove() {\n        if (this.element) {\n            this.wrapper.removeChild(this.element);\n            this.element = null;\n            this.fireEvent('remove');\n            this.wavesurfer.un('zoom', this._onRedraw);\n            this.wavesurfer.un('redraw', this._onRedraw);\n            this.wavesurfer.fireEvent('region-removed', this);\n        }\n    }\n\n    /**\n     * Play the audio region.\n     * @param {number} start Optional offset to start playing at\n     */\n    play(start) {\n        const s = start || this.start;\n        this.wavesurfer.play(s, this.end);\n        this.fireEvent('play');\n        this.wavesurfer.fireEvent('region-play', this);\n    }\n\n    /**\n     * Play the audio region in a loop.\n     * @param {number} start Optional offset to start playing at\n     * */\n    playLoop(start) {\n        this.loop = true;\n        this.play(start);\n    }\n\n    /**\n     * Set looping on/off.\n     * @param {boolean} loop True if should play in loop\n     */\n    setLoop(loop) {\n        this.loop = loop;\n    }\n\n    /* Render a region as a DOM element. */\n    render() {\n        const regionEl = document.createElement('region');\n\n        regionEl.className = 'wavesurfer-region';\n        regionEl.title = this.formatTime(this.start, this.end);\n        regionEl.setAttribute('data-id', this.id);\n\n        for (const attrname in this.attributes) {\n            regionEl.setAttribute(\n                'data-region-' + attrname,\n                this.attributes[attrname]\n            );\n        }\n\n        this.style(regionEl, {\n            position: 'absolute',\n            zIndex: 2,\n            height: this.regionHeight,\n            top: this.marginTop\n        });\n\n        /* Resize handles */\n        if (this.resize) {\n            this.handleLeftEl = regionEl.appendChild(\n                document.createElement('handle')\n            );\n            this.handleRightEl = regionEl.appendChild(\n                document.createElement('handle')\n            );\n\n            this.handleLeftEl.className = 'wavesurfer-handle wavesurfer-handle-start';\n            this.handleRightEl.className = 'wavesurfer-handle wavesurfer-handle-end';\n\n            // Default CSS properties for both handles.\n            const css = {\n                cursor: 'col-resize',\n                position: 'absolute',\n                top: '0px',\n                width: '2px',\n                height: '100%',\n                backgroundColor: 'rgba(0, 0, 0, 1)'\n            };\n\n            // Merge CSS properties per handle.\n            const handleLeftCss =\n                this.handleStyle.left !== 'none'\n                    ? Object.assign({ left: '0px' }, css, this.handleStyle.left)\n                    : null;\n            const handleRightCss =\n                this.handleStyle.right !== 'none'\n                    ? Object.assign(\n                        { right: '0px' },\n                        css,\n                        this.handleStyle.right\n                    )\n                    : null;\n\n            if (handleLeftCss) {\n                this.style(this.handleLeftEl, handleLeftCss);\n            }\n\n            if (handleRightCss) {\n                this.style(this.handleRightEl, handleRightCss);\n            }\n        }\n\n        this.element = this.wrapper.appendChild(regionEl);\n        this.updateRender();\n        this.bindEvents(regionEl);\n    }\n\n    formatTime(start, end) {\n        if (this.formatTimeCallback) {\n            return this.formatTimeCallback(start, end);\n        }\n        return (start == end ? [start] : [start, end])\n            .map((time) =>\n                [\n                    Math.floor((time % 3600) / 60), // minutes\n                    ('00' + Math.floor(time % 60)).slice(-2) // seconds\n                ].join(':')\n            )\n            .join('-');\n    }\n\n    getWidth() {\n        return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n    }\n\n    /* Update element's position, width, color. */\n    updateRender() {\n        // duration varies during loading process, so don't overwrite important data\n        const dur = this.wavesurfer.getDuration();\n        const width = this.getWidth();\n\n        var startLimited = this.start;\n        var endLimited = this.end;\n        if (startLimited < 0) {\n            startLimited = 0;\n            endLimited = endLimited - startLimited;\n        }\n        if (endLimited > dur) {\n            endLimited = dur;\n            startLimited = dur - (endLimited - startLimited);\n        }\n\n        if (this.minLength != null) {\n            endLimited = Math.max(startLimited + this.minLength, endLimited);\n        }\n\n        if (this.maxLength != null) {\n            endLimited = Math.min(startLimited + this.maxLength, endLimited);\n        }\n\n        if (this.element != null) {\n            // Calculate the left and width values of the region such that\n            // no gaps appear between regions.\n            const left = Math.round((startLimited / dur) * width);\n            const regionWidth = Math.round((endLimited / dur) * width) - left;\n\n            this.style(this.element, {\n                left: left + 'px',\n                width: regionWidth + 'px',\n                backgroundColor: this.color,\n                cursor: this.drag ? 'move' : 'default'\n            });\n\n            for (const attrname in this.attributes) {\n                this.element.setAttribute(\n                    'data-region-' + attrname,\n                    this.attributes[attrname]\n                );\n            }\n\n            this.element.title = this.formatTime(this.start, this.end);\n        }\n    }\n\n    /* Bind audio events. */\n    bindInOut() {\n        this.firedIn = false;\n        this.firedOut = false;\n\n        const onProcess = (time) => {\n            let start = Math.round(this.start * 10) / 10;\n            let end = Math.round(this.end * 10) / 10;\n            time = Math.round(time * 10) / 10;\n\n            if (\n                !this.firedOut &&\n                this.firedIn &&\n                (start > time || end <= time)\n            ) {\n                this.firedOut = true;\n                this.firedIn = false;\n                this.fireEvent('out');\n                this.wavesurfer.fireEvent('region-out', this);\n            }\n            if (!this.firedIn && start <= time && end > time) {\n                this.firedIn = true;\n                this.firedOut = false;\n                this.fireEvent('in');\n                this.wavesurfer.fireEvent('region-in', this);\n            }\n        };\n\n        this.wavesurfer.backend.on('audioprocess', onProcess);\n\n        this.on('remove', () => {\n            this.wavesurfer.backend.un('audioprocess', onProcess);\n        });\n\n        /* Loop playback. */\n        this.on('out', () => {\n            if (this.loop) {\n                const realTime = this.wavesurfer.getCurrentTime();\n                if (realTime >= this.start && realTime <= this.end) {\n                    this.wavesurfer.play(this.start);\n                }\n            }\n        });\n    }\n\n    /* Bind DOM events. */\n    bindEvents() {\n        const preventContextMenu = this.preventContextMenu;\n\n        this.element.addEventListener('mouseenter', (e) => {\n            this.fireEvent('mouseenter', e);\n            this.wavesurfer.fireEvent('region-mouseenter', this, e);\n        });\n\n        this.element.addEventListener('mouseleave', (e) => {\n            this.fireEvent('mouseleave', e);\n            this.wavesurfer.fireEvent('region-mouseleave', this, e);\n        });\n\n        this.element.addEventListener('click', (e) => {\n            e.preventDefault();\n            this.fireEvent('click', e);\n            this.wavesurfer.fireEvent('region-click', this, e);\n        });\n\n        this.element.addEventListener('dblclick', (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            this.fireEvent('dblclick', e);\n            this.wavesurfer.fireEvent('region-dblclick', this, e);\n        });\n\n        this.element.addEventListener('contextmenu', (e) => {\n            if (preventContextMenu) {\n                e.preventDefault();\n            }\n            this.fireEvent('contextmenu', e);\n            this.wavesurfer.fireEvent('region-contextmenu', this, e);\n        });\n\n        /* Drag or resize on mousemove. */\n        if (this.drag || this.resize) {\n            this.bindDragEvents();\n        }\n    }\n\n    bindDragEvents() {\n        const container = this.wavesurfer.drawer.container;\n        const scrollSpeed = this.scrollSpeed;\n        const scrollThreshold = this.scrollThreshold;\n        let startTime;\n        let touchId;\n        let drag;\n        let maxScroll;\n        let resize;\n        let updated = false;\n        let scrollDirection;\n        let wrapperRect;\n        let regionLeftHalfTime;\n        let regionRightHalfTime;\n\n        // Scroll when the user is dragging within the threshold\n        const edgeScroll = (e) => {\n            const duration = this.wavesurfer.getDuration();\n            if (!scrollDirection || (!drag && !resize)) {\n                return;\n            }\n\n            const x = e.clientX;\n            let distanceBetweenCursorAndWrapperEdge = 0;\n            let regionHalfTimeWidth = 0;\n            let adjustment = 0;\n\n            // Get the currently selected time according to the mouse position\n            let time = this.regionsUtil.getRegionSnapToGridValue(\n                this.wavesurfer.drawer.handleEvent(e) * duration\n            );\n\n            if (drag) {\n                // Considering the point of contact with the region while edgescrolling\n                if (scrollDirection === -1) {\n                    regionHalfTimeWidth = regionLeftHalfTime * this.wavesurfer.params.minPxPerSec;\n                    distanceBetweenCursorAndWrapperEdge = x - wrapperRect.left;\n                } else {\n                    regionHalfTimeWidth = regionRightHalfTime * this.wavesurfer.params.minPxPerSec;\n                    distanceBetweenCursorAndWrapperEdge = wrapperRect.right - x;\n                }\n            } else {\n                // Considering minLength while edgescroll\n                let minLength = this.minLength;\n                if (!minLength) {\n                    minLength = 0;\n                }\n\n                if (resize === 'start') {\n                    if (time > this.end - minLength) {\n                        time = this.end - minLength;\n                        adjustment = scrollSpeed * scrollDirection;\n                    }\n\n                    if (time < 0) {\n                        time = 0;\n                    }\n                } else if (resize === 'end') {\n                    if (time < this.start + minLength) {\n                        time = this.start + minLength;\n                        adjustment = scrollSpeed * scrollDirection;\n                    }\n\n                    if (time > duration) {\n                        time = duration;\n                    }\n                }\n            }\n\n            // Don't edgescroll if region has reached min or max limit\n            if (scrollDirection === -1) {\n                if (Math.round(this.wrapper.scrollLeft) === 0) {\n                    return;\n                }\n\n                if (Math.round(this.wrapper.scrollLeft - regionHalfTimeWidth + distanceBetweenCursorAndWrapperEdge) <= 0) {\n                    return;\n                }\n            } else {\n                if (Math.round(this.wrapper.scrollLeft) === maxScroll) {\n                    return;\n                }\n\n                if (Math.round(this.wrapper.scrollLeft + regionHalfTimeWidth - distanceBetweenCursorAndWrapperEdge) >= maxScroll) {\n                    return;\n                }\n            }\n\n            // Update scroll position\n            let scrollLeft = this.wrapper.scrollLeft - adjustment + scrollSpeed * scrollDirection;\n\n            if (scrollDirection === -1) {\n                const calculatedLeft = Math.max(0 + regionHalfTimeWidth - distanceBetweenCursorAndWrapperEdge, scrollLeft);\n                this.wrapper.scrollLeft = scrollLeft = calculatedLeft;\n            } else {\n                const calculatedRight = Math.min(maxScroll - regionHalfTimeWidth + distanceBetweenCursorAndWrapperEdge, scrollLeft);\n                this.wrapper.scrollLeft = scrollLeft = calculatedRight;\n            }\n\n            const delta = time - startTime;\n            startTime = time;\n\n            // Continue dragging or resizing\n            drag ? this.onDrag(delta) : this.onResize(delta, resize);\n\n            // Repeat\n            window.requestAnimationFrame(() => {\n                edgeScroll(e);\n            });\n        };\n\n        const onDown = (e) => {\n            const duration = this.wavesurfer.getDuration();\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            touchId = e.targetTouches ? e.targetTouches[0].identifier : null;\n\n            // stop the event propagation, if this region is resizable or draggable\n            // and the event is therefore handled here.\n            if (this.drag || this.resize) {\n                e.stopPropagation();\n            }\n\n            // Store the selected startTime we begun dragging or resizing\n            startTime = this.regionsUtil.getRegionSnapToGridValue(\n                this.wavesurfer.drawer.handleEvent(e, true) * duration\n            );\n\n            // Store the selected point of contact when we begin dragging\n            regionLeftHalfTime = startTime - this.start;\n            regionRightHalfTime = this.end - startTime;\n\n            // Store for scroll calculations\n            maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n            wrapperRect = this.wrapper.getBoundingClientRect();\n\n            this.isResizing = false;\n            this.isDragging = false;\n            if (e.target.tagName.toLowerCase() === 'handle') {\n                this.isResizing = true;\n                resize = e.target.classList.contains('wavesurfer-handle-start')\n                    ? 'start'\n                    : 'end';\n            } else {\n                this.isDragging = true;\n                drag = true;\n                resize = false;\n            }\n        };\n        const onUp = (e) => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n\n            if (drag || resize) {\n                this.isDragging = false;\n                this.isResizing = false;\n                drag = false;\n                scrollDirection = null;\n                resize = false;\n            }\n\n            if (updated) {\n                updated = false;\n                this.util.preventClick();\n                this.fireEvent('update-end', e);\n                this.wavesurfer.fireEvent('region-update-end', this, e);\n            }\n        };\n        const onMove = (e) => {\n            const duration = this.wavesurfer.getDuration();\n\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            if (e.targetTouches && e.targetTouches[0].identifier != touchId) {\n                return;\n            }\n            if (!drag && !resize) {\n                return;\n            }\n\n            const oldTime = startTime;\n            let time = this.regionsUtil.getRegionSnapToGridValue(\n                this.wavesurfer.drawer.handleEvent(e) * duration\n            );\n\n            if (drag) {\n                // To maintain relative cursor start point while dragging\n                const maxEnd = this.wavesurfer.getDuration();\n                if (time > maxEnd - regionRightHalfTime) {\n                    time = maxEnd - regionRightHalfTime;\n                }\n\n                if (time - regionLeftHalfTime < 0) {\n                    time = regionLeftHalfTime;\n                }\n            }\n\n            if (resize) {\n                // To maintain relative cursor start point while resizing\n                // we have to handle for minLength\n                let minLength = this.minLength;\n                if (!minLength) {\n                    minLength = 0;\n                }\n\n                if (resize === 'start') {\n                    if (time > this.end - minLength) {\n                        time = this.end - minLength;\n                    }\n\n                    if (time < 0) {\n                        time = 0;\n                    }\n                } else if (resize === 'end') {\n                    if (time < this.start + minLength) {\n                        time = this.start + minLength;\n                    }\n\n                    if (time > duration) {\n                        time = duration;\n                    }\n                }\n            }\n\n            let delta = time - startTime;\n            startTime = time;\n\n            // Drag\n            if (this.drag && drag) {\n                updated = updated || !!delta;\n                this.onDrag(delta);\n            }\n\n            // Resize\n            if (this.resize && resize) {\n                updated = updated || !!delta;\n                this.onResize(delta, resize);\n            }\n\n            if (\n                this.scroll &&\n                container.clientWidth < this.wrapper.scrollWidth\n            ) {\n                // Triggering edgescroll from within edgeScrollWidth\n                if (drag) {\n                    let x = e.clientX;\n\n                    // Check direction\n                    if (x < wrapperRect.left + this.edgeScrollWidth) {\n                        scrollDirection = -1;\n                    } else if (x > wrapperRect.right - this.edgeScrollWidth) {\n                        scrollDirection = 1;\n                    } else {\n                        scrollDirection = null;\n                    }\n                } else {\n                    let x = e.clientX;\n\n                    // Check direction\n                    if (x < wrapperRect.left + this.edgeScrollWidth) {\n                        scrollDirection = -1;\n                    } else if (x > wrapperRect.right - this.edgeScrollWidth) {\n                        scrollDirection = 1;\n                    } else {\n                        scrollDirection = null;\n                    }\n                }\n\n                if (scrollDirection) {\n                    edgeScroll(e);\n                }\n            }\n        };\n\n        this.element.addEventListener('mousedown', onDown);\n        this.element.addEventListener('touchstart', onDown);\n\n        document.body.addEventListener('mousemove', onMove);\n        document.body.addEventListener('touchmove', onMove);\n\n        document.body.addEventListener('mouseup', onUp);\n        document.body.addEventListener('touchend', onUp);\n\n        this.on('remove', () => {\n            document.body.removeEventListener('mouseup', onUp);\n            document.body.removeEventListener('touchend', onUp);\n            document.body.removeEventListener('mousemove', onMove);\n            document.body.removeEventListener('touchmove', onMove);\n        });\n\n        this.wavesurfer.on('destroy', () => {\n            document.body.removeEventListener('mouseup', onUp);\n            document.body.removeEventListener('touchend', onUp);\n        });\n    }\n\n    onDrag(delta) {\n        const maxEnd = this.wavesurfer.getDuration();\n        if (this.end + delta > maxEnd) {\n            delta = maxEnd - this.end;\n        }\n\n        if (this.start + delta < 0) {\n            delta = this.start * -1;\n        }\n\n        this.update({\n            start: this.start + delta,\n            end: this.end + delta\n        });\n    }\n\n    /**\n     * @example\n     * onResize(-5, 'start') // Moves the start point 5 seconds back\n     * onResize(0.5, 'end') // Moves the end point 0.5 seconds forward\n     *\n     * @param {number} delta How much to add or subtract, given in seconds\n     * @param {string} direction 'start 'or 'end'\n     */\n    onResize(delta, direction) {\n        const duration = this.wavesurfer.getDuration();\n        if (direction === 'start') {\n            // Check if changing the start by the given delta would result in the region being smaller than minLength\n            // Ignore cases where we are making the region wider rather than shrinking it\n            if (delta > 0 && this.end - (this.start + delta) < this.minLength) {\n                delta = this.end - this.minLength - this.start;\n            }\n\n            if (delta < 0 && (this.start + delta) < 0) {\n                delta = this.start * -1;\n            }\n\n            this.update({\n                start: Math.min(this.start + delta, this.end),\n                end: Math.max(this.start + delta, this.end)\n            });\n        } else {\n            // Check if changing the end by the given delta would result in the region being smaller than minLength\n            // Ignore cases where we are making the region wider rather than shrinking it\n            if (delta < 0 && this.end + delta - this.start < this.minLength) {\n                delta = this.start + this.minLength - this.end;\n            }\n\n            if (delta > 0 && (this.end + delta) > duration) {\n                delta = duration - this.end;\n            }\n\n            this.update({\n                start: Math.min(this.end + delta, this.start),\n                end: Math.max(this.end + delta, this.start)\n            });\n        }\n    }\n\n    updateHandlesResize(resize) {\n        const cursorStyle = resize ? 'col-resize' : 'auto';\n\n        this.handleLeftEl && this.style(this.handleLeftEl, { cursor: cursorStyle });\n        this.handleRightEl && this.style(this.handleRightEl, { cursor: cursorStyle });\n    }\n}\n","/**\n *  @since 4.0.0 This class has been split\n *\n * @typedef {Object} RegionsPluginParams\n * @property {?boolean} dragSelection Enable creating regions by dragging with\n * the mouse\n * @property {?RegionParams[]} regions Regions that should be added upon\n * initialisation\n * @property {number} slop=2 The sensitivity of the mouse dragging\n * @property {?number} snapToGridInterval Snap the regions to a grid of the specified multiples in seconds\n * @property {?number} snapToGridOffset Shift the snap-to-grid by the specified seconds. May also be negative.\n * @property {?boolean} deferInit Set to true to manually call\n * @property {number[]} maxRegions Maximum number of regions that may be created by the user at one time.\n * `initPlugin('regions')`\n * @property {function} formatTimeCallback Allows custom formating for region tooltip.\n * @property {?number} edgeScrollWidth='5% from container edges' Optional width for edgeScroll to start\n */\n\n/**\n * @typedef {Object} RegionParams\n * @desc The parameters used to describe a region.\n * @example wavesurfer.addRegion(regionParams);\n * @property {string} id=→random The id of the region\n * @property {number} start=0 The start position of the region (in seconds).\n * @property {number} end=0 The end position of the region (in seconds).\n * @property {?boolean} loop Whether to loop the region when played back.\n * @property {boolean} drag=true Allow/disallow dragging the region.\n * @property {boolean} resize=true Allow/disallow resizing the region.\n * @property {string} [color='rgba(0, 0, 0, 0.1)'] HTML color code.\n * @property {?number} channelIdx Select channel to draw the region on (if there are multiple channel waveforms).\n * @property {?object} handleStyle A set of CSS properties used to style the left and right handle.\n * @property {?boolean} preventContextMenu=false Determines whether the context menu is prevented from being opened.\n */\n\nimport {Region} from \"./region.js\";\n\n/**\n * Regions are visual overlays on waveform that can be used to play and loop\n * portions of audio. Regions can be dragged and resized.\n *\n * Visual customization is possible via CSS (using the selectors\n * `.wavesurfer-region` and `.wavesurfer-handle`).\n *\n * @implements {PluginClass}\n * @extends {Observer}\n *\n * @example\n * // es6\n * import RegionsPlugin from 'wavesurfer.regions.js';\n *\n * // commonjs\n * var RegionsPlugin = require('wavesurfer.regions.js');\n *\n * // if you are using <script> tags\n * var RegionsPlugin = window.WaveSurfer.regions;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     RegionsPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class RegionsPlugin {\n    /**\n     * Regions plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param {RegionsPluginParams} params parameters use to initialise the plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'regions',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                addRegion(options) {\n                    if (!this.initialisedPluginList.regions) {\n                        this.initPlugin('regions');\n                    }\n                    return this.regions.add(options);\n                },\n\n                clearRegions() {\n                    this.regions && this.regions.clear();\n                },\n\n                enableDragSelection(options) {\n                    if (!this.initialisedPluginList.regions) {\n                        this.initPlugin('regions');\n                    }\n                    this.regions.enableDragSelection(options);\n                },\n\n                disableDragSelection() {\n                    this.regions.disableDragSelection();\n                }\n            },\n            instance: RegionsPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = {\n            ...ws.util,\n            getRegionSnapToGridValue: value => {\n                return this.getRegionSnapToGridValue(value, params);\n            }\n        };\n        this.maxRegions = params.maxRegions;\n        this.regionsMinLength = params.regionsMinLength || null;\n\n        // turn the plugin instance into an observer\n        const observerPrototypeKeys = Object.getOwnPropertyNames(\n            this.util.Observer.prototype\n        );\n        observerPrototypeKeys.forEach(key => {\n            Region.prototype[key] = this.util.Observer.prototype[key];\n        });\n        this.wavesurfer.Region = Region;\n\n        this._onBackendCreated = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            if (this.params.regions) {\n                this.params.regions.forEach(region => {\n                    region.edgeScrollWidth = this.params.edgeScrollWidth || this.wrapper.clientWidth * 0.05;\n                    this.add(region);\n                });\n            }\n        };\n\n        // Id-based hash of regions\n        this.list = {};\n        this._onReady = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            if (this.params.dragSelection) {\n                this.enableDragSelection(this.params);\n            }\n            Object.keys(this.list).forEach(id => {\n                this.list[id].updateRender();\n            });\n        };\n    }\n\n    init() {\n        // Check if ws is ready\n        if (this.wavesurfer.isReady) {\n            this._onBackendCreated();\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n            this.wavesurfer.once('backend-created', this._onBackendCreated);\n        }\n    }\n\n    destroy() {\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\n        this.disableDragSelection();\n        this.clear();\n    }\n\n    /**\n     * check to see if adding a new region would exceed maxRegions\n     * @return {boolean} whether we should proceed and create a region\n     * @private\n     */\n    wouldExceedMaxRegions() {\n        return (\n            this.maxRegions && Object.keys(this.list).length >= this.maxRegions\n        );\n    }\n\n    /**\n     * Add a region\n     *\n     * @param {object} params Region parameters\n     * @return {Region} The created region\n     */\n    add(params) {\n        if (this.wouldExceedMaxRegions()) return null;\n\n        if (!params.minLength && this.regionsMinLength) {\n            params = {...params, minLength: this.regionsMinLength};\n        }\n\n        const region = new this.wavesurfer.Region(params, this.util, this.wavesurfer);\n\n        this.list[region.id] = region;\n\n        region.on('remove', () => {\n            delete this.list[region.id];\n        });\n\n        return region;\n    }\n\n    /**\n     * Remove all regions\n     */\n    clear() {\n        Object.keys(this.list).forEach(id => {\n            this.list[id].remove();\n        });\n    }\n\n    enableDragSelection(params) {\n        this.disableDragSelection();\n\n        const slop = params.slop || 2;\n        const container = this.wavesurfer.drawer.container;\n        const scroll =\n            params.scroll !== false && this.wavesurfer.params.scrollParent;\n        const scrollSpeed = params.scrollSpeed || 1;\n        const scrollThreshold = params.scrollThreshold || 10;\n        let drag;\n        let duration = this.wavesurfer.getDuration();\n        let maxScroll;\n        let start;\n        let region;\n        let touchId;\n        let pxMove = 0;\n        let scrollDirection;\n        let wrapperRect;\n\n        // Scroll when the user is dragging within the threshold\n        const edgeScroll = e => {\n            if (!region || !scrollDirection) {\n                return;\n            }\n\n            // Update scroll position\n            let scrollLeft =\n                this.wrapper.scrollLeft + scrollSpeed * scrollDirection;\n            this.wrapper.scrollLeft = scrollLeft = Math.min(\n                maxScroll,\n                Math.max(0, scrollLeft)\n            );\n\n            // Update range\n            const end = this.wavesurfer.drawer.handleEvent(e);\n            region.update({\n                start: Math.min(end * duration, start * duration),\n                end: Math.max(end * duration, start * duration)\n            });\n\n            // Check that there is more to scroll and repeat\n            if (scrollLeft < maxScroll && scrollLeft > 0) {\n                window.requestAnimationFrame(() => {\n                    edgeScroll(e);\n                });\n            }\n        };\n\n        const eventDown = e => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            duration = this.wavesurfer.getDuration();\n            touchId = e.targetTouches ? e.targetTouches[0].identifier : null;\n\n            // Store for scroll calculations\n            maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n            wrapperRect = this.wrapper.getBoundingClientRect();\n\n            drag = true;\n            start = this.wavesurfer.drawer.handleEvent(e, true);\n            region = null;\n            scrollDirection = null;\n        };\n        this.wrapper.addEventListener('mousedown', eventDown);\n        this.wrapper.addEventListener('touchstart', eventDown);\n        this.on('disable-drag-selection', () => {\n            this.wrapper.removeEventListener('touchstart', eventDown);\n            this.wrapper.removeEventListener('mousedown', eventDown);\n        });\n\n        const eventUp = e => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n\n            drag = false;\n            pxMove = 0;\n            scrollDirection = null;\n\n            if (region) {\n                this.util.preventClick();\n                region.fireEvent('update-end', e);\n                this.wavesurfer.fireEvent('region-update-end', region, e);\n            }\n\n            region = null;\n        };\n        this.wrapper.addEventListener('mouseup', eventUp);\n        this.wrapper.addEventListener('touchend', eventUp);\n\n        document.body.addEventListener('mouseup', eventUp);\n        document.body.addEventListener('touchend', eventUp);\n        this.on('disable-drag-selection', () => {\n            document.body.removeEventListener('mouseup', eventUp);\n            document.body.removeEventListener('touchend', eventUp);\n            this.wrapper.removeEventListener('touchend', eventUp);\n            this.wrapper.removeEventListener('mouseup', eventUp);\n        });\n\n        const eventMove = e => {\n            if (!drag) {\n                return;\n            }\n            if (++pxMove <= slop) {\n                return;\n            }\n\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            if (e.targetTouches && e.targetTouches[0].identifier != touchId) {\n                return;\n            }\n\n            // auto-create a region during mouse drag, unless region-count would exceed \"maxRegions\"\n            if (!region) {\n                region = this.add(params || {});\n                if (!region) return;\n            }\n\n            const end = this.wavesurfer.drawer.handleEvent(e);\n            const startUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                start * duration\n            );\n            const endUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                end * duration\n            );\n            region.update({\n                start: Math.min(endUpdate, startUpdate),\n                end: Math.max(endUpdate, startUpdate)\n            });\n\n            // If scrolling is enabled\n            if (scroll && container.clientWidth < this.wrapper.scrollWidth) {\n                // Check threshold based on mouse\n                const x = e.clientX - wrapperRect.left;\n                if (x <= scrollThreshold) {\n                    scrollDirection = -1;\n                } else if (x >= wrapperRect.right - scrollThreshold) {\n                    scrollDirection = 1;\n                } else {\n                    scrollDirection = null;\n                }\n                scrollDirection && edgeScroll(e);\n            }\n        };\n        this.wrapper.addEventListener('mousemove', eventMove);\n        this.wrapper.addEventListener('touchmove', eventMove);\n        this.on('disable-drag-selection', () => {\n            this.wrapper.removeEventListener('touchmove', eventMove);\n            this.wrapper.removeEventListener('mousemove', eventMove);\n        });\n\n        this.wavesurfer.on('region-created', region => {\n            if (this.regionsMinLength) {\n                region.minLength = this.regionsMinLength;\n            }\n        });\n    }\n\n    disableDragSelection() {\n        this.fireEvent('disable-drag-selection');\n    }\n\n    /**\n     * Get current region\n     *\n     * The smallest region that contains the current time. If several such\n     * regions exist, take the first. Return `null` if none exist.\n     *\n     * @returns {Region} The current region\n     */\n    getCurrentRegion() {\n        const time = this.wavesurfer.getCurrentTime();\n        let min = null;\n        Object.keys(this.list).forEach(id => {\n            const cur = this.list[id];\n            if (cur.start <= time && cur.end >= time) {\n                if (!min || cur.end - cur.start < min.end - min.start) {\n                    min = cur;\n                }\n            }\n        });\n\n        return min;\n    }\n\n    /**\n     * Match the value to the grid, if required\n     *\n     * If the regions plugin params have a snapToGridInterval set, return the\n     * value matching the nearest grid interval. If no snapToGridInterval is set,\n     * the passed value will be returned without modification.\n     *\n     * @param {number} value the value to snap to the grid, if needed\n     * @param {Object} params the regions plugin params\n     * @returns {number} value\n     */\n    getRegionSnapToGridValue(value, params) {\n        if (params.snapToGridInterval) {\n            // the regions should snap to a grid\n            const offset = params.snapToGridOffset || 0;\n            return (\n                Math.round((value - offset) / params.snapToGridInterval) *\n                    params.snapToGridInterval +\n                offset\n            );\n        }\n\n        // no snap-to-grid\n        return value;\n    }\n}\n","/* eslint-disable complexity, no-redeclare, no-var, one-var */\n\n/**\n * Calculate FFT - Based on https://github.com/corbanbrook/dsp.js\n *\n * @param {Number} bufferSize Buffer size\n * @param {Number} sampleRate Sample rate\n * @param {Function} windowFunc Window function\n * @param {Number} alpha Alpha channel\n */\nexport default function FFT(bufferSize, sampleRate, windowFunc, alpha) {\n    this.bufferSize = bufferSize;\n    this.sampleRate = sampleRate;\n    this.bandwidth = (2 / bufferSize) * (sampleRate / 2);\n\n    this.sinTable = new Float32Array(bufferSize);\n    this.cosTable = new Float32Array(bufferSize);\n    this.windowValues = new Float32Array(bufferSize);\n    this.reverseTable = new Uint32Array(bufferSize);\n\n    this.peakBand = 0;\n    this.peak = 0;\n\n    var i;\n    switch (windowFunc) {\n        case 'bartlett':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (2 / (bufferSize - 1)) *\n                    ((bufferSize - 1) / 2 - Math.abs(i - (bufferSize - 1) / 2));\n            }\n            break;\n        case 'bartlettHann':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.62 -\n                    0.48 * Math.abs(i / (bufferSize - 1) - 0.5) -\n                    0.38 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\n            }\n            break;\n        case 'blackman':\n            alpha = alpha || 0.16;\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (1 - alpha) / 2 -\n                    0.5 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1)) +\n                    (alpha / 2) *\n                        Math.cos((4 * Math.PI * i) / (bufferSize - 1));\n            }\n            break;\n        case 'cosine':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = Math.cos(\n                    (Math.PI * i) / (bufferSize - 1) - Math.PI / 2\n                );\n            }\n            break;\n        case 'gauss':\n            alpha = alpha || 0.25;\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = Math.pow(\n                    Math.E,\n                    -0.5 *\n                        Math.pow(\n                            (i - (bufferSize - 1) / 2) /\n                                ((alpha * (bufferSize - 1)) / 2),\n                            2\n                        )\n                );\n            }\n            break;\n        case 'hamming':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.54 -\n                    0.46 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\n            }\n            break;\n        case 'hann':\n        case undefined:\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.5 * (1 - Math.cos((Math.PI * 2 * i) / (bufferSize - 1)));\n            }\n            break;\n        case 'lanczoz':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    Math.sin(Math.PI * ((2 * i) / (bufferSize - 1) - 1)) /\n                    (Math.PI * ((2 * i) / (bufferSize - 1) - 1));\n            }\n            break;\n        case 'rectangular':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = 1;\n            }\n            break;\n        case 'triangular':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (2 / bufferSize) *\n                    (bufferSize / 2 - Math.abs(i - (bufferSize - 1) / 2));\n            }\n            break;\n        default:\n            throw Error(\"No such window function '\" + windowFunc + \"'\");\n    }\n\n    var limit = 1;\n    var bit = bufferSize >> 1;\n    var i;\n\n    while (limit < bufferSize) {\n        for (i = 0; i < limit; i++) {\n            this.reverseTable[i + limit] = this.reverseTable[i] + bit;\n        }\n\n        limit = limit << 1;\n        bit = bit >> 1;\n    }\n\n    for (i = 0; i < bufferSize; i++) {\n        this.sinTable[i] = Math.sin(-Math.PI / i);\n        this.cosTable[i] = Math.cos(-Math.PI / i);\n    }\n\n    this.calculateSpectrum = function(buffer) {\n        // Locally scope variables for speed up\n        var bufferSize = this.bufferSize,\n            cosTable = this.cosTable,\n            sinTable = this.sinTable,\n            reverseTable = this.reverseTable,\n            real = new Float32Array(bufferSize),\n            imag = new Float32Array(bufferSize),\n            bSi = 2 / this.bufferSize,\n            sqrt = Math.sqrt,\n            rval,\n            ival,\n            mag,\n            spectrum = new Float32Array(bufferSize / 2);\n\n        var k = Math.floor(Math.log(bufferSize) / Math.LN2);\n\n        if (Math.pow(2, k) !== bufferSize) {\n            throw 'Invalid buffer size, must be a power of 2.';\n        }\n        if (bufferSize !== buffer.length) {\n            throw 'Supplied buffer is not the same size as defined FFT. FFT Size: ' +\n                bufferSize +\n                ' Buffer Size: ' +\n                buffer.length;\n        }\n\n        var halfSize = 1,\n            phaseShiftStepReal,\n            phaseShiftStepImag,\n            currentPhaseShiftReal,\n            currentPhaseShiftImag,\n            off,\n            tr,\n            ti,\n            tmpReal;\n\n        for (var i = 0; i < bufferSize; i++) {\n            real[i] =\n                buffer[reverseTable[i]] * this.windowValues[reverseTable[i]];\n            imag[i] = 0;\n        }\n\n        while (halfSize < bufferSize) {\n            phaseShiftStepReal = cosTable[halfSize];\n            phaseShiftStepImag = sinTable[halfSize];\n\n            currentPhaseShiftReal = 1;\n            currentPhaseShiftImag = 0;\n\n            for (var fftStep = 0; fftStep < halfSize; fftStep++) {\n                var i = fftStep;\n\n                while (i < bufferSize) {\n                    off = i + halfSize;\n                    tr =\n                        currentPhaseShiftReal * real[off] -\n                        currentPhaseShiftImag * imag[off];\n                    ti =\n                        currentPhaseShiftReal * imag[off] +\n                        currentPhaseShiftImag * real[off];\n\n                    real[off] = real[i] - tr;\n                    imag[off] = imag[i] - ti;\n                    real[i] += tr;\n                    imag[i] += ti;\n\n                    i += halfSize << 1;\n                }\n\n                tmpReal = currentPhaseShiftReal;\n                currentPhaseShiftReal =\n                    tmpReal * phaseShiftStepReal -\n                    currentPhaseShiftImag * phaseShiftStepImag;\n                currentPhaseShiftImag =\n                    tmpReal * phaseShiftStepImag +\n                    currentPhaseShiftImag * phaseShiftStepReal;\n            }\n\n            halfSize = halfSize << 1;\n        }\n\n        for (var i = 0, N = bufferSize / 2; i < N; i++) {\n            rval = real[i];\n            ival = imag[i];\n            mag = bSi * sqrt(rval * rval + ival * ival);\n\n            if (mag > this.peak) {\n                this.peakBand = i;\n                this.peak = mag;\n            }\n            spectrum[i] = mag;\n        }\n        return spectrum;\n    };\n}\n","/* eslint-enable complexity, no-redeclare, no-var, one-var */\n\nimport FFT from './fft';\n\n/**\n * @typedef {Object} SpectrogramPluginParams\n * @property {string|HTMLElement} container Selector of element or element in\n * which to render\n * @property {number} fftSamples=512 Number of samples to fetch to FFT. Must be\n * a power of 2.\n * @property {boolean} labels Set to true to display frequency labels.\n * @property {number} noverlap Size of the overlapping window. Must be <\n * fftSamples. Auto deduced from canvas size by default.\n * @property {string} windowFunc='hann' The window function to be used. One of\n * these: `'bartlett'`, `'bartlettHann'`, `'blackman'`, `'cosine'`, `'gauss'`,\n * `'hamming'`, `'hann'`, `'lanczoz'`, `'rectangular'`, `'triangular'`\n * @property {?number} alpha Some window functions have this extra value.\n * (Between 0 and 1)\n * @property {number} pixelRatio=wavesurfer.params.pixelRatio to control the\n * size of the spectrogram in relation with its canvas. 1 = Draw on the whole\n * canvas. 2 = Draw on a quarter (1/2 the length and 1/2 the width)\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('spectrogram')`\n * @property {?number[][]} colorMap A 256 long array of 4-element arrays.\n * Each entry should contain a float between 0 and 1 and specify\n * r, g, b, and alpha.\n */\n\n/**\n * Render a spectrogram visualisation of the audio.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import SpectrogramPlugin from 'wavesurfer.spectrogram.js';\n *\n * // commonjs\n * var SpectrogramPlugin = require('wavesurfer.spectrogram.js');\n *\n * // if you are using <script> tags\n * var SpectrogramPlugin = window.WaveSurfer.spectrogram;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     SpectrogramPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class SpectrogramPlugin {\n    /**\n     * Spectrogram plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {SpectrogramPluginParams} params Parameters used to initialise the plugin\n     * @return {PluginDefinition} An object representing the plugin.\n     */\n    static create(params) {\n        return {\n            name: 'spectrogram',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                FFT: FFT\n            },\n            instance: SpectrogramPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = ws.util;\n\n        this.frequenciesDataUrl = params.frequenciesDataUrl;\n        this._onScroll = e => {\n            this.updateScroll(e);\n        };\n        this._onRender = () => {\n            this.render();\n        };\n        this._onWrapperClick = e => {\n            this._wrapperClickHandler(e);\n        };\n        this._onReady = () => {\n            const drawer = (this.drawer = ws.drawer);\n\n            this.container =\n                'string' == typeof params.container\n                    ? document.querySelector(params.container)\n                    : params.container;\n\n            if (!this.container) {\n                throw Error('No container for WaveSurfer spectrogram');\n            }\n            if (params.colorMap) {\n                if (params.colorMap.length < 256) {\n                    throw new Error('Colormap must contain 256 elements');\n                }\n                for (let i = 0; i < params.colorMap.length; i++) {\n                    const cmEntry = params.colorMap[i];\n                    if (cmEntry.length !== 4) {\n                        throw new Error(\n                            'ColorMap entries must contain 4 values'\n                        );\n                    }\n                }\n                this.colorMap = params.colorMap;\n            } else {\n                this.colorMap = [];\n                for (let i = 0; i < 256; i++) {\n                    const val = (255 - i) / 256;\n                    this.colorMap.push([val, val, val, 1]);\n                }\n            }\n            this.width = drawer.width;\n            this.pixelRatio = this.params.pixelRatio || ws.params.pixelRatio;\n            this.fftSamples =\n                this.params.fftSamples || ws.params.fftSamples || 512;\n            this.height = this.fftSamples / 2;\n            this.noverlap = params.noverlap;\n            this.windowFunc = params.windowFunc;\n            this.alpha = params.alpha;\n\n            this.createWrapper();\n            this.createCanvas();\n            this.render();\n\n            drawer.wrapper.addEventListener('scroll', this._onScroll);\n            ws.on('redraw', this._onRender);\n        };\n    }\n\n    init() {\n        // Check if wavesurfer is ready\n        if (this.wavesurfer.isReady) {\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n        }\n    }\n\n    destroy() {\n        this.unAll();\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('redraw', this._onRender);\n        this.drawer && this.drawer.wrapper.removeEventListener('scroll', this._onScroll);\n        this.wavesurfer = null;\n        this.util = null;\n        this.params = null;\n        if (this.wrapper) {\n            this.wrapper.removeEventListener('click', this._onWrapperClick);\n            this.wrapper.parentNode.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    }\n\n    createWrapper() {\n        const prevSpectrogram = this.container.querySelector('spectrogram');\n        if (prevSpectrogram) {\n            this.container.removeChild(prevSpectrogram);\n        }\n        const wsParams = this.wavesurfer.params;\n        this.wrapper = document.createElement('spectrogram');\n        // if labels are active\n        if (this.params.labels) {\n            const labelsEl = (this.labelsEl = document.createElement('canvas'));\n            labelsEl.classList.add('spec-labels');\n            this.drawer.style(labelsEl, {\n                left: 0,\n                position: 'absolute',\n                zIndex: 9,\n                height: `${this.height / this.pixelRatio}px`,\n                width: `${55 / this.pixelRatio}px`\n            });\n            this.wrapper.appendChild(labelsEl);\n            this.loadLabels(\n                'rgba(68,68,68,0.5)',\n                '12px',\n                '10px',\n                '',\n                '#fff',\n                '#f7f7f7',\n                'center',\n                '#specLabels'\n            );\n        }\n\n        this.drawer.style(this.wrapper, {\n            display: 'block',\n            position: 'relative',\n            userSelect: 'none',\n            webkitUserSelect: 'none',\n            height: `${this.height / this.pixelRatio}px`\n        });\n\n        if (wsParams.fillParent || wsParams.scrollParent) {\n            this.drawer.style(this.wrapper, {\n                width: '100%',\n                overflowX: 'hidden',\n                overflowY: 'hidden'\n            });\n        }\n        this.container.appendChild(this.wrapper);\n\n        this.wrapper.addEventListener('click', this._onWrapperClick);\n    }\n\n    _wrapperClickHandler(event) {\n        event.preventDefault();\n        const relX = 'offsetX' in event ? event.offsetX : event.layerX;\n        this.fireEvent('click', relX / this.width || 0);\n    }\n\n    createCanvas() {\n        const canvas = (this.canvas = this.wrapper.appendChild(\n            document.createElement('canvas')\n        ));\n\n        this.spectrCc = canvas.getContext('2d');\n\n        this.util.style(canvas, {\n            position: 'absolute',\n            zIndex: 4\n        });\n    }\n\n    render() {\n        this.updateCanvasStyle();\n\n        if (this.frequenciesDataUrl) {\n            this.loadFrequenciesData(this.frequenciesDataUrl);\n        } else {\n            this.getFrequencies(this.drawSpectrogram);\n        }\n    }\n\n    updateCanvasStyle() {\n        const width = Math.round(this.width / this.pixelRatio) + 'px';\n        this.canvas.width = this.width;\n        this.canvas.height = this.height;\n        this.canvas.style.width = width;\n    }\n\n    drawSpectrogram(frequenciesData, my) {\n        const spectrCc = my.spectrCc;\n        const length = my.wavesurfer.backend.getDuration();\n        const height = my.height;\n        const pixels = my.resample(frequenciesData);\n        const heightFactor = my.buffer ? 2 / my.buffer.numberOfChannels : 1;\n        let i;\n        let j;\n\n        for (i = 0; i < pixels.length; i++) {\n            for (j = 0; j < pixels[i].length; j++) {\n                const colorMap = my.colorMap[pixels[i][j]];\n                my.spectrCc.fillStyle =\n                    'rgba(' +\n                    colorMap[0] * 256 +\n                    ', ' +\n                    colorMap[1] * 256 +\n                    ', ' +\n                    colorMap[2] * 256 +\n                    ',' +\n                    colorMap[3] +\n                    ')';\n                my.spectrCc.fillRect(\n                    i,\n                    height - j * heightFactor,\n                    1,\n                    heightFactor\n                );\n            }\n        }\n    }\n\n    getFrequencies(callback) {\n        const fftSamples = this.fftSamples;\n        const buffer = (this.buffer = this.wavesurfer.backend.buffer);\n        const channelOne = buffer.getChannelData(0);\n        const bufferLength = buffer.length;\n        const sampleRate = buffer.sampleRate;\n        const frequencies = [];\n\n        if (!buffer) {\n            this.fireEvent('error', 'Web Audio buffer is not available');\n            return;\n        }\n\n        let noverlap = this.noverlap;\n        if (!noverlap) {\n            const uniqueSamplesPerPx = buffer.length / this.canvas.width;\n            noverlap = Math.max(0, Math.round(fftSamples - uniqueSamplesPerPx));\n        }\n\n        const fft = new FFT(\n            fftSamples,\n            sampleRate,\n            this.windowFunc,\n            this.alpha\n        );\n        const maxSlicesCount = Math.floor(\n            bufferLength / (fftSamples - noverlap)\n        );\n        let currentOffset = 0;\n\n        while (currentOffset + fftSamples < channelOne.length) {\n            const segment = channelOne.slice(\n                currentOffset,\n                currentOffset + fftSamples\n            );\n            const spectrum = fft.calculateSpectrum(segment);\n            const array = new Uint8Array(fftSamples / 2);\n            let j;\n            for (j = 0; j < fftSamples / 2; j++) {\n                array[j] = Math.max(-255, Math.log10(spectrum[j]) * 45);\n            }\n            frequencies.push(array);\n            currentOffset += fftSamples - noverlap;\n        }\n        callback(frequencies, this);\n    }\n\n    loadFrequenciesData(url) {\n        const request = this.util.fetchFile({ url: url });\n\n        request.on('success', data =>\n            this.drawSpectrogram(JSON.parse(data), this)\n        );\n        request.on('error', e => this.fireEvent('error', e));\n\n        return request;\n    }\n\n    freqType(freq) {\n        return freq >= 1000 ? (freq / 1000).toFixed(1) : Math.round(freq);\n    }\n\n    unitType(freq) {\n        return freq >= 1000 ? 'KHz' : 'Hz';\n    }\n\n    loadLabels(\n        bgFill,\n        fontSizeFreq,\n        fontSizeUnit,\n        fontType,\n        textColorFreq,\n        textColorUnit,\n        textAlign,\n        container\n    ) {\n        const frequenciesHeight = this.height;\n        bgFill = bgFill || 'rgba(68,68,68,0)';\n        fontSizeFreq = fontSizeFreq || '12px';\n        fontSizeUnit = fontSizeUnit || '10px';\n        fontType = fontType || 'Helvetica';\n        textColorFreq = textColorFreq || '#fff';\n        textColorUnit = textColorUnit || '#fff';\n        textAlign = textAlign || 'center';\n        container = container || '#specLabels';\n        const bgWidth = 55;\n        const getMaxY = frequenciesHeight || 512;\n        const labelIndex = 5 * (getMaxY / 256);\n        const freqStart = 0;\n        const step =\n            (this.wavesurfer.backend.ac.sampleRate / 2 - freqStart) /\n            labelIndex;\n\n        // prepare canvas element for labels\n        const ctx = this.labelsEl.getContext('2d');\n        this.labelsEl.height = this.height;\n        this.labelsEl.width = bgWidth;\n\n        // fill background\n        ctx.fillStyle = bgFill;\n        ctx.fillRect(0, 0, bgWidth, getMaxY);\n        ctx.fill();\n        let i;\n\n        // render labels\n        for (i = 0; i <= labelIndex; i++) {\n            ctx.textAlign = textAlign;\n            ctx.textBaseline = 'middle';\n\n            const freq = freqStart + step * i;\n            const index = Math.round(\n                (freq / (this.sampleRate / 2)) * this.fftSamples\n            );\n            const label = this.freqType(freq);\n            const units = this.unitType(freq);\n            const yLabelOffset = 2;\n            const x = 16;\n            let y;\n\n            if (i == 0) {\n                y = getMaxY + i - 10;\n                // unit label\n                ctx.fillStyle = textColorUnit;\n                ctx.font = fontSizeUnit + ' ' + fontType;\n                ctx.fillText(units, x + 24, y);\n                // freq label\n                ctx.fillStyle = textColorFreq;\n                ctx.font = fontSizeFreq + ' ' + fontType;\n                ctx.fillText(label, x, y);\n            } else {\n                y = getMaxY - i * 50 + yLabelOffset;\n                // unit label\n                ctx.fillStyle = textColorUnit;\n                ctx.font = fontSizeUnit + ' ' + fontType;\n                ctx.fillText(units, x + 24, y);\n                // freq label\n                ctx.fillStyle = textColorFreq;\n                ctx.font = fontSizeFreq + ' ' + fontType;\n                ctx.fillText(label, x, y);\n            }\n        }\n    }\n\n    updateScroll(e) {\n        if (this.wrapper) {\n            this.wrapper.scrollLeft = e.target.scrollLeft;\n        }\n    }\n\n    resample(oldMatrix) {\n        const columnsNumber = this.width;\n        const newMatrix = [];\n\n        const oldPiece = 1 / oldMatrix.length;\n        const newPiece = 1 / columnsNumber;\n        let i;\n\n        for (i = 0; i < columnsNumber; i++) {\n            const column = new Array(oldMatrix[0].length);\n            let j;\n\n            for (j = 0; j < oldMatrix.length; j++) {\n                const oldStart = j * oldPiece;\n                const oldEnd = oldStart + oldPiece;\n                const newStart = i * newPiece;\n                const newEnd = newStart + newPiece;\n\n                const overlap =\n                    oldEnd <= newStart || newEnd <= oldStart\n                        ? 0\n                        : Math.min(\n                            Math.max(oldEnd, newStart),\n                            Math.max(newEnd, oldStart)\n                        ) -\n                        Math.max(\n                            Math.min(oldEnd, newStart),\n                            Math.min(newEnd, oldStart)\n                        );\n                let k;\n                /* eslint-disable max-depth */\n                if (overlap > 0) {\n                    for (k = 0; k < oldMatrix[0].length; k++) {\n                        if (column[k] == null) {\n                            column[k] = 0;\n                        }\n                        column[k] += (overlap / newPiece) * oldMatrix[j][k];\n                    }\n                }\n                /* eslint-enable max-depth */\n            }\n\n            const intColumn = new Uint8Array(oldMatrix[0].length);\n            let m;\n\n            for (m = 0; m < oldMatrix[0].length; m++) {\n                intColumn[m] = column[m];\n            }\n\n            newMatrix.push(intColumn);\n        }\n\n        return newMatrix;\n    }\n}\n","/**\n * @typedef {Object} TimelinePluginParams\n * @desc Extends the `WavesurferParams` wavesurfer was initialised with\n * @property {!string|HTMLElement} container CSS selector or HTML element where\n * the timeline should be drawn. This is the only required parameter.\n * @property {number} notchPercentHeight=90 Height of notches in percent\n * @property {string} unlabeledNotchColor='#c0c0c0' The colour of the notches\n * that do not have labels\n * @property {string} primaryColor='#000' The colour of the main notches\n * @property {string} secondaryColor='#c0c0c0' The colour of the secondary\n * notches\n * @property {string} primaryFontColor='#000' The colour of the labels next to\n * the main notches\n * @property {string} secondaryFontColor='#000' The colour of the labels next to\n * the secondary notches\n * @property {number} labelPadding=5 The padding between the label and the notch\n * @property {?number} zoomDebounce A debounce timeout to increase rendering\n * performance for large files\n * @property {string} fontFamily='Arial'\n * @property {number} fontSize=10 Font size of labels in pixels\n * @property {?number} duration Length of the track in seconds. Overrides\n * getDuration() for setting length of timeline\n * @property {function} formatTimeCallback (sec, pxPerSec) -> label\n * @property {function} timeInterval (pxPerSec) -> seconds between notches\n * @property {function} primaryLabelInterval (pxPerSec) -> cadence between\n * labels in primary color\n * @property {function} secondaryLabelInterval (pxPerSec) -> cadence between\n * labels in secondary color\n * @property {?number} offset Offset for the timeline start in seconds. May also be\n * negative.\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('timeline')`\n */\n\n/**\n * Adds a timeline to the waveform.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import TimelinePlugin from 'wavesurfer.timeline.js';\n *\n * // commonjs\n * var TimelinePlugin = require('wavesurfer.timeline.js');\n *\n * // if you are using <script> tags\n * var TimelinePlugin = window.WaveSurfer.timeline;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     TimelinePlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class TimelinePlugin {\n  /**\n   * Timeline plugin definition factory\n   *\n   * This function must be used to create a plugin definition which can be\n   * used by wavesurfer to correctly instantiate the plugin.\n   *\n   * @param  {TimelinePluginParams} params parameters use to initialise the plugin\n   * @return {PluginDefinition} an object representing the plugin\n   */\n  static create(params) {\n    return {\n      name: \"timeline\",\n      deferInit: params && params.deferInit ? params.deferInit : false,\n      params: params,\n      instance: TimelinePlugin,\n    };\n  }\n\n  // event handlers\n  /** @private */\n  _onScroll = () => {\n    if (this.wrapper && this.drawer.wrapper) {\n      this.wrapper.scrollLeft = this.drawer.wrapper.scrollLeft;\n    }\n  };\n\n  /**\n   * @private\n   * @returns {void}\n   */\n  _onRedraw = () => this.render();\n\n  /** @private */\n  _onReady = () => {\n    const ws = this.wavesurfer;\n    this.drawer = ws.drawer;\n    this.pixelRatio = ws.drawer.params.pixelRatio;\n    this.maxCanvasWidth = ws.drawer.maxCanvasWidth || ws.drawer.width;\n    this.maxCanvasElementWidth =\n      ws.drawer.maxCanvasElementWidth ||\n      Math.round(this.maxCanvasWidth / this.pixelRatio);\n\n    // add listeners\n    ws.drawer.wrapper.addEventListener(\"scroll\", this._onScroll);\n    ws.on(\"redraw\", this._onRedraw);\n    ws.on(\"zoom\", this._onZoom);\n\n    this.render();\n  };\n\n  /**\n   * @private\n   * @param {object} e Click event\n   */\n  _onWrapperClick = (e) => {\n    e.preventDefault();\n    const relX = \"offsetX\" in e ? e.offsetX : e.layerX;\n    this.fireEvent(\"click\", relX / this.wrapper.scrollWidth || 0);\n  };\n\n  /**\n   * Creates an instance of TimelinePlugin.\n   *\n   * You probably want to use TimelinePlugin.create()\n   *\n   * @param {TimelinePluginParams} params Plugin parameters\n   * @param {object} ws Wavesurfer instance\n   */\n  constructor(params, ws) {\n    /** @private */\n    this.container =\n      \"string\" == typeof params.container\n        ? document.querySelector(params.container)\n        : params.container;\n\n    if (!this.container) {\n      throw new Error(\"No container for wavesurfer timeline\");\n    }\n    /** @private */\n    this.wavesurfer = ws;\n    /** @private */\n    this.util = ws.util;\n    /** @private */\n    this.params = Object.assign(\n      {},\n      {\n        height: 20,\n        notchPercentHeight: 90,\n        labelPadding: 5,\n        unlabeledNotchColor: \"#c0c0c0\",\n        primaryColor: \"#000\",\n        secondaryColor: \"#c0c0c0\",\n        primaryFontColor: \"#000\",\n        secondaryFontColor: \"#000\",\n        fontFamily: \"Arial\",\n        fontSize: 10,\n        duration: null,\n        zoomDebounce: false,\n        formatTimeCallback: this.defaultFormatTimeCallback,\n        timeInterval: this.defaultTimeInterval,\n        primaryLabelInterval: this.defaultPrimaryLabelInterval,\n        secondaryLabelInterval: this.defaultSecondaryLabelInterval,\n        offset: 0,\n      },\n      params\n    );\n\n    /** @private */\n    this.canvases = [];\n    /** @private */\n    this.wrapper = null;\n    /** @private */\n    this.drawer = null;\n    /** @private */\n    this.pixelRatio = null;\n    /** @private */\n    this.maxCanvasWidth = null;\n    /** @private */\n    this.maxCanvasElementWidth = null;\n    /**\n     * This event handler has to be in the constructor function because it\n     * relies on the debounce function which is only available after\n     * instantiation\n     *\n     * Use a debounced function if `params.zoomDebounce` is defined\n     *\n     * @private\n     * @returns {void}\n     */\n    this._onZoom = this.params.zoomDebounce\n      ? this.wavesurfer.util.debounce(\n          () => this.render(),\n          this.params.zoomDebounce\n        )\n      : () => this.render();\n  }\n\n  /**\n   * Initialisation function used by the plugin API\n   */\n  init() {\n    // Check if ws is ready\n    if (this.wavesurfer.isReady) {\n      this._onReady();\n    } else {\n      this.wavesurfer.once(\"ready\", this._onReady);\n    }\n  }\n\n  /**\n   * Destroy function used by the plugin API\n   */\n  destroy() {\n    this.unAll();\n    this.wavesurfer.un(\"redraw\", this._onRedraw);\n    this.wavesurfer.un(\"zoom\", this._onZoom);\n    this.wavesurfer.un(\"ready\", this._onReady);\n    this.wavesurfer.drawer.wrapper.removeEventListener(\n      \"scroll\",\n      this._onScroll\n    );\n    if (this.wrapper && this.wrapper.parentNode) {\n      this.wrapper.removeEventListener(\"click\", this._onWrapperClick);\n      this.wrapper.parentNode.removeChild(this.wrapper);\n      this.wrapper = null;\n    }\n  }\n\n  /**\n   * Create a timeline element to wrap the canvases drawn by this plugin\n   *\n   * @private\n   */\n  createWrapper() {\n    const wsParams = this.wavesurfer.params;\n    this.container.innerHTML = \"\";\n    this.wrapper = this.container.appendChild(\n      document.createElement(\"timeline\")\n    );\n    this.util.style(this.wrapper, {\n      display: \"block\",\n      position: \"relative\",\n      userSelect: \"none\",\n      webkitUserSelect: \"none\",\n      height: `${this.params.height}px`,\n    });\n\n    if (wsParams.fillParent || wsParams.scrollParent) {\n      this.util.style(this.wrapper, {\n        width: \"100%\",\n        overflowX: \"hidden\",\n        overflowY: \"hidden\",\n      });\n    }\n\n    this.wrapper.addEventListener(\"click\", this._onWrapperClick);\n  }\n\n  /**\n   * Render the timeline (also updates the already rendered timeline)\n   *\n   * @private\n   */\n  render() {\n    if (!this.wrapper) {\n      this.createWrapper();\n    }\n    this.updateCanvases();\n    this.updateCanvasesPositioning();\n    this.renderCanvases();\n  }\n\n  /**\n   * Add new timeline canvas\n   *\n   * @private\n   */\n  addCanvas() {\n    const canvas = this.wrapper.appendChild(document.createElement(\"canvas\"));\n    this.canvases.push(canvas);\n    this.util.style(canvas, {\n      position: \"absolute\",\n      zIndex: 4,\n    });\n  }\n\n  /**\n   * Remove timeline canvas\n   *\n   * @private\n   */\n  removeCanvas() {\n    const canvas = this.canvases.pop();\n    canvas.parentElement.removeChild(canvas);\n  }\n\n  /**\n   * Make sure the correct of timeline canvas elements exist and are cached in\n   * this.canvases\n   *\n   * @private\n   */\n  updateCanvases() {\n    const totalWidth = Math.round(this.drawer.wrapper.scrollWidth);\n    const requiredCanvases = Math.ceil(totalWidth / this.maxCanvasElementWidth);\n\n    while (this.canvases.length < requiredCanvases) {\n      this.addCanvas();\n    }\n\n    while (this.canvases.length > requiredCanvases) {\n      this.removeCanvas();\n    }\n  }\n\n  /**\n   * Update the dimensions and positioning style for all the timeline canvases\n   *\n   * @private\n   */\n  updateCanvasesPositioning() {\n    // cache length for performance\n    const canvasesLength = this.canvases.length;\n    this.canvases.forEach((canvas, i) => {\n      // canvas width is the max element width, or if it is the last the\n      // required width\n      const canvasWidth =\n        i === canvasesLength - 1\n          ? this.drawer.wrapper.scrollWidth -\n            this.maxCanvasElementWidth * (canvasesLength - 1)\n          : this.maxCanvasElementWidth;\n      // set dimensions and style\n      canvas.width = canvasWidth * this.pixelRatio;\n      // on certain pixel ratios the canvas appears cut off at the bottom,\n      // therefore leave 1px extra\n      canvas.height = (this.params.height + 1) * this.pixelRatio;\n      this.util.style(canvas, {\n        width: `${canvasWidth}px`,\n        height: `${this.params.height}px`,\n        left: `${i * this.maxCanvasElementWidth}px`,\n      });\n    });\n  }\n\n  /**\n   * Render the timeline labels and notches\n   *\n   * @private\n   */\n  renderCanvases() {\n    const duration =\n      this.wavesurfer.timeline.params.duration ||\n      this.wavesurfer.backend.getDuration();\n\n    if (duration <= 0) {\n      return;\n    }\n    const wsParams = this.wavesurfer.params;\n    const fontSize = this.params.fontSize * wsParams.pixelRatio;\n    const totalSeconds = parseInt(duration, 10) + 1;\n    const width =\n      wsParams.fillParent && !wsParams.scrollParent\n        ? this.drawer.getWidth()\n        : this.drawer.wrapper.scrollWidth * wsParams.pixelRatio;\n    const height1 = this.params.height * this.pixelRatio;\n    const height2 =\n      this.params.height *\n      (this.params.notchPercentHeight / 100) *\n      this.pixelRatio;\n    const pixelsPerSecond = width / duration;\n\n    const formatTime = this.params.formatTimeCallback;\n    // if parameter is function, call the function with\n    // pixelsPerSecond, otherwise simply take the value as-is\n    const intervalFnOrVal = (option) =>\n      typeof option === \"function\" ? option(pixelsPerSecond) : option;\n    const timeInterval = intervalFnOrVal(this.params.timeInterval);\n    const primaryLabelInterval = intervalFnOrVal(\n      this.params.primaryLabelInterval\n    );\n    const secondaryLabelInterval = intervalFnOrVal(\n      this.params.secondaryLabelInterval\n    );\n\n    let curPixel = pixelsPerSecond * this.params.offset;\n    let curSeconds = 0;\n    let i;\n    // build an array of position data with index, second and pixel data,\n    // this is then used multiple times below\n    const positioning = [];\n    for (i = 0; i < totalSeconds / timeInterval; i++) {\n      positioning.push([i, curSeconds, curPixel]);\n      curSeconds += timeInterval;\n      curPixel += pixelsPerSecond * timeInterval;\n    }\n\n    // iterate over each position\n    const renderPositions = (cb) => {\n      positioning.forEach((pos) => {\n        cb(pos[0], pos[1], pos[2]);\n      });\n    };\n\n    // render primary labels\n    this.setFillStyles(this.params.primaryColor);\n    this.setFonts(`${fontSize}px ${this.params.fontFamily}`);\n    this.setFillStyles(this.params.primaryFontColor);\n    renderPositions((i, curSeconds, curPixel) => {\n      if (i % primaryLabelInterval === 0) {\n        this.fillRect(curPixel, 0, 1, height1);\n        this.fillText(\n          formatTime(curSeconds, pixelsPerSecond),\n          curPixel + this.params.labelPadding * this.pixelRatio,\n          height1\n        );\n      }\n    });\n\n    // render secondary labels\n    this.setFillStyles(this.params.secondaryColor);\n    this.setFonts(`${fontSize}px ${this.params.fontFamily}`);\n    this.setFillStyles(this.params.secondaryFontColor);\n    renderPositions((i, curSeconds, curPixel) => {\n      if (i % secondaryLabelInterval === 0) {\n        console.log();\n\n        this.fillRect(curPixel, 0, 1, height1);\n        this.fillText(\n          formatTime(curSeconds, pixelsPerSecond),\n          curPixel + this.params.labelPadding * this.pixelRatio,\n          height1\n        );\n      }\n    });\n\n    // render the actual notches (when no labels are used)\n    this.setFillStyles(this.params.unlabeledNotchColor);\n    renderPositions((i, curSeconds, curPixel) => {\n      if (i % secondaryLabelInterval !== 0 && i % primaryLabelInterval !== 0) {\n        this.fillRect(curPixel, 0, 1, height2);\n      }\n    });\n  }\n\n  /**\n   * Set the canvas fill style\n   *\n   * @param {DOMString|CanvasGradient|CanvasPattern} fillStyle Fill style to\n   * use\n   * @private\n   */\n  setFillStyles(fillStyle) {\n    this.canvases.forEach((canvas) => {\n      canvas.getContext(\"2d\").fillStyle = fillStyle;\n    });\n  }\n\n  /**\n   * Set the canvas font\n   *\n   * @param {DOMString} font Font to use\n   * @private\n   */\n  setFonts(font) {\n    this.canvases.forEach((canvas) => {\n      canvas.getContext(\"2d\").font = font;\n    });\n  }\n\n  /**\n   * Draw a rectangle on the canvases\n   *\n   * (it figures out the offset for each canvas)\n   *\n   * @param {number} x X-position\n   * @param {number} y Y-position\n   * @param {number} width Width\n   * @param {number} height Height\n   * @private\n   */\n  fillRect(x, y, width, height) {\n    this.canvases.forEach((canvas, i) => {\n      const leftOffset = i * this.maxCanvasWidth;\n\n      const intersection = {\n        x1: Math.max(x, i * this.maxCanvasWidth),\n        y1: y,\n        x2: Math.min(x + width, i * this.maxCanvasWidth + canvas.width),\n        y2: y + height,\n      };\n\n      if (intersection.x1 < intersection.x2) {\n        canvas\n          .getContext(\"2d\")\n          .fillRect(\n            intersection.x1 - leftOffset,\n            intersection.y1,\n            intersection.x2 - intersection.x1,\n            intersection.y2 - intersection.y1\n          );\n      }\n    });\n  }\n\n  /**\n   * Fill a given text on the canvases\n   *\n   * @param {string} text Text to render\n   * @param {number} x X-position\n   * @param {number} y Y-position\n   * @private\n   */\n  fillText(text, x, y) {\n    let textWidth;\n    let xOffset = 0;\n\n    this.canvases.forEach((canvas) => {\n      const context = canvas.getContext(\"2d\");\n      const canvasWidth = context.canvas.width;\n\n      if (xOffset > x + textWidth) {\n        return;\n      }\n\n      if (xOffset + canvasWidth > x) {\n        textWidth = context.measureText(text).width;\n        context.fillText(text, x - xOffset, y);\n      }\n\n      xOffset += canvasWidth;\n    });\n  }\n\n  /**\n   * Turn the time into a suitable label for the time.\n   *\n   * @param {number} seconds Seconds to format\n   * @param {number} pxPerSec Pixels per second\n   * @returns {number} Time\n   */\n  defaultFormatTimeCallback(seconds, pxPerSec) {\n    if (seconds / 60 > 1) {\n      // calculate minutes and seconds from seconds count\n      const minutes = parseInt(seconds / 60, 10);\n      seconds = parseInt(seconds % 60, 10);\n      // fill up seconds with zeroes\n      seconds = seconds < 10 ? \"0\" + seconds : seconds;\n      return `${minutes}:${seconds}`;\n    }\n    return Math.round(seconds * 1000) / 1000;\n  }\n\n  /**\n   * Return how many seconds should be between each notch\n   *\n   * @param {number} pxPerSec Pixels per second\n   * @returns {number} Time\n   */\n  defaultTimeInterval(pxPerSec) {\n    if (pxPerSec >= 25) {\n      return 1;\n    } else if (pxPerSec * 5 >= 25) {\n      return 5;\n    } else if (pxPerSec * 15 >= 25) {\n      return 15;\n    }\n    return Math.ceil(0.5 / pxPerSec) * 60;\n  }\n\n  /**\n   * Return the cadence of notches that get labels in the primary color.\n   *\n   * @param {number} pxPerSec Pixels per second\n   * @returns {number} Cadence\n   */\n  defaultPrimaryLabelInterval(pxPerSec) {\n    if (pxPerSec >= 25) {\n      return 10;\n    } else if (pxPerSec * 5 >= 25) {\n      return 6;\n    } else if (pxPerSec * 15 >= 25) {\n      return 4;\n    }\n    return 4;\n  }\n\n  /**\n   * Return the cadence of notches that get labels in the secondary color.\n   *\n   * @param {number} pxPerSec Pixels per second\n   * @returns {number} Cadence\n   */\n  defaultSecondaryLabelInterval(pxPerSec) {\n    if (pxPerSec >= 25) {\n      return 5;\n    } else if (pxPerSec * 5 >= 25) {\n      return 2;\n    } else if (pxPerSec * 15 >= 25) {\n      return 2;\n    }\n    return 2;\n  }\n}\n","\n/**\n * @description Register event function\n */\nexport function registerEvent(wavesurfer, event, func) {\n  wavesurfer.on(event, func);\n}\n\n/**\n * @description Pass audio data to wavesurfer\n */\nexport function loadAudio(wavesurfer, audioFileOrElt, audioPeaks) {\n  if (audioFileOrElt instanceof window.HTMLElement) {\n    // media element\n    wavesurfer.loadMediaElement(audioFileOrElt, audioPeaks);\n  } else if (typeof audioFileOrElt === 'string') {\n    // bog-standard string is handled by load method and ajax call\n    wavesurfer.load(audioFileOrElt, audioPeaks);\n  } else if (\n    audioFileOrElt instanceof window.Blob ||\n    audioFileOrElt instanceof window.File\n  ) {\n    // blob or file is loaded with loadBlob method\n    wavesurfer.loadBlob(audioFileOrElt, audioPeaks);\n  } else {\n    throw new Error(`Wavesurfer._loadAudio expects prop audioFile\n        to be either HTMLElement, string or file/blob`);\n  }\n}\n\n/**\n * @description Capitalise the first letter of a string\n */\nexport function capitalizeFirstLetter(string) {\n  return string\n    .split('-')\n    .map(part => part.charAt(0).toUpperCase() + part.slice(1))\n    .join('');\n}\n\n/**\n * @description Throws an error if the prop is defined and not an integer or not positive\n */\nexport function positiveIntegerProptype(props, propName, componentName) {\n  const n = props[propName];\n  if (\n    n !== undefined &&\n    (typeof n !== 'number' || n !== parseInt(n, 10) || n < 0)\n  ) {\n    return new Error(`Invalid ${propName} supplied to ${componentName},\n      expected a positive integer`);\n  }\n\n  return null;\n}\n\n/**\n * @description Receives seconds and transforms this to the position as a float 0-1\n */\nfunction _secToPos(duration, sec) {\n  return 1 / duration * sec;\n}\n\n/**\n * @description Seek to the position (in seconds)\n */\nexport function seekTo(wavesurfer, props) {\n  const duration = wavesurfer.getDuration() || props.duration;\n  const pos = _secToPos(duration, props.pos);\n\n  if (pos && !isNaN(pos)) {\n    if (props.autoCenter) {\n      wavesurfer.seekAndCenter(pos);\n    } else {\n      wavesurfer.seekTo(pos);\n    }\n  } else if (duration && props.pos) {\n    wavesurfer.seekTo(props.pos);\n  }\n}\n\n/**\n * @description load a media element selector or HTML element\n *              if selector, get the HTML element for it\n *              and pass to _loadAudio\n */\nexport function loadMediaElt(wavesurfer, selectorOrElt, audioPeaks) {\n  if (selectorOrElt instanceof window.HTMLElement) {\n    loadAudio(wavesurfer, selectorOrElt, audioPeaks);\n  } else {\n    if (!window.document.querySelector(selectorOrElt)) {\n      throw new Error('Media Element not found!');\n    }\n\n    loadAudio(wavesurfer, window.document.querySelector(selectorOrElt), audioPeaks);\n  }\n}\n","\nexport const EVENTS = [\n  'audioprocess',\n  'destroy',\n  'error',\n  'finish',\n  'interaction',\n  'loading',\n  'mute',\n  'pause',\n  'play',\n  'ready',\n  'scroll',\n  'seek',\n  'volume',\n  'waveform-ready',\n  'zoom',\n];\n\nexport const EVENT = {\n  // Fires continuously as the audio plays. Also fires on seeking.\n  AUDIO_PROCESS: EVENTS[0],\n  // When instance is destroyed.\n  DESTROY: EVENTS[1],\n  // Occurs on error. Callback will receive (string) error message.\n  ERROR: EVENTS[2],\n  // When it finishes playing.\n  FINISH: EVENTS[3],\n  // When there's interaction with the waveform.\n  INTERACTION: EVENTS[4],\n  // Fires continuously when loading via XHR or drag'n'drop. Callback will receive (integer) loading progress in percents [0..100] and (object) event target.\n  LOADING: EVENTS[5],\n  // On mute change. Callback will receive (boolean) new mute status.\n  MUTE: EVENTS[6],\n  // When audio is paused.\n  PAUSE: EVENTS[7],\n  // When playback starts.\n  PLAY: EVENTS[8],\n  // When audio is loaded, decoded and the waveform drawn. This fires before the waveform is drawn when using MediaElement, see waveform-ready.\n  READY: EVENTS[9],\n  // When the scrollbar is moved. Callback will receive a ScrollEvent object.\n  SCROLL: EVENTS[10],\n  // On seeking. Callback will receive (float) progress [0..1].\n  SEEK: EVENTS[11],\n  // On volume change. Callback will receive (integer) new volume.\n  VOLUME: EVENTS[12],\n  // Fires after the waveform is drawn when using the MediaElement backend. If you're using the WebAudio backend, you can use ready.\n  WAVEFORM_READY: EVENTS[13],\n  // On zooming. Callback will receive (integer) minPxPerSec.\n  ZOOM: EVENTS[14],\n};\n\nexport const REGIONS_EVENTS = [\n  'region-in',\n  'region-out',\n  'region-removed',\n  'region-updated',\n  'region-mouseenter',\n  'region-mouseleave',\n  'region-click',\n  'region-dblclick',\n  'region-update-end',\n  'region-play',\n];\n\nexport const REGION_EVENTS = [\n  'in',\n  'out',\n  'remove',\n  'update',\n  'update-end',\n  'click',\n  'dbclick',\n  'over',\n  'leave'\n];\n","import React from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport Microphone from \"wavesurfer.js/src/plugin/microphone\";\nimport Regions from \"wavesurfer.js/src/plugin/regions\";\nimport Spectrogram from \"wavesurfer.js/src/plugin/spectrogram\";\nimport Timeline from \"../Plugins/timeline\";\n\nimport {\n  registerEvent,\n  loadAudio,\n  loadMediaElt,\n  capitalizeFirstLetter,\n  seekTo,\n} from \"../../utils/wavesurfer\";\nimport { EVENT, EVENTS } from \"../../models/Events\";\n\nexport default class Waveform extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isReady: false,\n    };\n\n    if (typeof WaveSurfer === undefined) {\n      throw new Error(\"WaveSurfer is undefined!\");\n    }\n  }\n\n  componentDidMount() {\n    let { options, spectrogramOptions, timelineOptions } = this.props;\n\n    options.plugins = [Regions.create()];\n\n    if (this.props.micCallback) {\n      options.plugins.push(Microphone.create());\n    }\n\n    if (spectrogramOptions) {\n      options.plugins.push(\n        Spectrogram.create({\n          container: spectrogramOptions.container,\n          colorMap: spectrogramOptions.colorMap,\n          pixelRatio: spectrogramOptions.pixelRatio,\n          fftSamples: spectrogramOptions.fftSamples,\n          noverlap: spectrogramOptions.noverlap,\n          windowFunc: spectrogramOptions.windowFunc,\n          alpha: spectrogramOptions.alpha,\n          deferInit: spectrogramOptions.deferInit,\n          labels: spectrogramOptions.labels,\n        })\n      );\n    }\n\n    if (timelineOptions) {\n      options.plugins.push(\n        Timeline.create({\n          container: timelineOptions.container,\n          pixelRatio: timelineOptions.pixelRatio,\n          zoomDebounce: timelineOptions.zoomDebounce,\n          height: timelineOptions.height || 50,\n          duration: timelineOptions.duration,\n          notchPercentHeight: timelineOptions.notchPercentHeight,\n          timeInterval: timelineOptions.timeInterval,\n          primaryLabelInterval: timelineOptions.primaryLabelInterval,\n          secondaryLabelInterval: timelineOptions.secondaryLabelInterval,\n          offset: timelineOptions.offset,\n          primaryColor: timelineOptions.primaryColor,\n          fontSize: timelineOptions.fontSize,\n          fontFamily: timelineOptions.fontFamily,\n          primaryFontColor: timelineOptions.primaryFontColor,\n          labelPadding: timelineOptions.labelPadding,\n          unlabeledNotchColor: timelineOptions.unlabeledNotchColor,\n        })\n      );\n    }\n\n    this._wavesurfer = WaveSurfer.create({\n      ...options,\n      container: this.wavesurferEl,\n    });\n\n    if (this.props.micCallback) {\n      this._wavesurfer.microphone.on(\"deviceReady\", (stream) => {\n        this.props.micCallback({ stream });\n      });\n      this._wavesurfer.microphone.on(\"deviceError\", (error) => {\n        this.props.micCallback({ error });\n      });\n\n      this.props.micCallback({ micInstance: this._wavesurfer.microphone });\n    }\n\n    registerEvent(this._wavesurfer, EVENT.AUDIO_PROCESS, (pos) => {\n      if (Math.ceil(pos) !== Math.ceil(this.props.pos)) {\n        this.props.onPosChange({\n          wavesurfer: this._wavesurfer,\n          originalArgs: [Math.ceil(pos)],\n        });\n      }\n    });\n\n    registerEvent(this._wavesurfer, EVENT.SEEK, (pos) => {\n      let duration = this._wavesurfer.getDuration();\n\n      if (Math.ceil(duration * pos) !== Math.ceil(this.props.pos)) {\n        this.props.onPosChange({\n          wavesurfer: this._wavesurfer,\n          originalArgs: [Math.ceil(duration * pos)],\n        });\n      }\n    });\n\n    // file was loaded, wave was drawn\n    registerEvent(this._wavesurfer, EVENT.READY, () => {\n      this.setState({ isReady: true });\n\n      if (!this.props.micCallback) {\n        // set initial position\n        seekTo(this._wavesurfer, this.props);\n      }\n\n      // set initial volume\n      this._wavesurfer.setVolume(this.props.volume);\n\n      if (this.props.playing) {\n        // set initial playing state\n        this._wavesurfer.play();\n      }\n\n      // set initial zoom\n      this._wavesurfer.zoom(this.props.zoom);\n    });\n\n    EVENTS.forEach((event) => {\n      const capLetter = capitalizeFirstLetter(event);\n      const propCallback = this.props[\"on\" + capLetter];\n      if (propCallback) {\n        registerEvent(this._wavesurfer, event, (...originalArgs) => {\n          if (event === EVENT.SEEK) {\n            let duration = this._wavesurfer.getDuration();\n            propCallback({\n              wavesurfer: this._wavesurfer,\n              pos: Math.ceil(duration * originalArgs),\n            });\n          } else {\n            propCallback({\n              wavesurfer: this._wavesurfer,\n              ...originalArgs,\n            });\n          }\n        });\n      }\n    });\n\n    // if audioFile prop, load file\n    if (this.props.audioFile) {\n      loadAudio(this._wavesurfer, this.props.audioFile, this.props.audioPeaks);\n    }\n\n    // if mediaElt prop, load media Element\n    if (this.props.mediaElt) {\n      loadMediaElt(\n        this._wavesurfer,\n        this.props.mediaElt,\n        this.props.audioPeaks\n      );\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    // update audioFile\n    if (this.props.audioFile !== nextProps.audioFile) {\n      this.setState({ isReady: false });\n      loadAudio(this._wavesurfer, nextProps.audioFile, nextProps.audioPeaks);\n    }\n\n    // update mediaElt\n    if (this.props.mediaElt !== nextProps.mediaElt) {\n      this.setState({ isReady: false });\n      loadMediaElt(this._wavesurfer, nextProps.mediaElt, nextProps.audioPeaks);\n    }\n\n    // update peaks\n    if (this.props.audioPeaks !== nextProps.audioPeaks) {\n      if (nextProps.mediaElt) {\n        loadMediaElt(\n          this._wavesurfer,\n          nextProps.mediaElt,\n          nextProps.audioPeaks\n        );\n      } else {\n        loadAudio(this._wavesurfer, nextProps.audioFile, nextProps.audioPeaks);\n      }\n    }\n\n    if (nextProps.playing) {\n      this._wavesurfer.play();\n    } else {\n      this._wavesurfer.pause();\n    }\n\n    // update volume\n    if (this.props.volume !== nextProps.volume) {\n      this._wavesurfer.setVolume(nextProps.volume);\n    }\n\n    // update zoom\n    if (this.props.zoom !== nextProps.zoom) {\n      this._wavesurfer.zoom(nextProps.zoom);\n    }\n\n    // update audioRate\n    if (this.props.options.audioRate !== nextProps.options.audioRate) {\n      this._wavesurfer.setPlaybackRate(nextProps.options.audioRate);\n    }\n  }\n\n  componentWillUnmount() {\n    // Clear buffer\n    delete this._wavesurfer.backend.buffer;\n\n    // unsubscribe all listeners\n    this._wavesurfer.unAll();\n\n    // destroy wavesurfer instance\n    this._wavesurfer.destroy();\n  }\n\n  render() {\n    const childrenWithProps = this.props.children\n      ? React.Children.map(this.props.children, (child) =>\n        React.cloneElement(child, {\n          wavesurfer: this._wavesurfer,\n          isReady: this.state.isReady,\n        })\n      )\n      : false;\n\n    return (\n      <div className=\"waveform\">\n        <div\n          className=\"wave\"\n          ref={(c) => {\n            this.wavesurferEl = c;\n          }}\n        />\n        {this._wavesurfer && this.state.isReady && childrenWithProps}\n      </div>\n    );\n  }\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { REGIONS_EVENTS, REGION_EVENTS } from '../../models/Events';\nimport { capitalizeFirstLetter } from '../../utils/wavesurfer';\n\n\nexport class Regions extends React.Component {\n\n  componentDidMount() {\n    if (this.props.isReady) {\n      this._init.call(this);\n    }\n\n    this.props.wavesurfer.on('ready', this._init.bind(this));\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    // only update if the wavesurfer instance has been ready\n    if (!this.props.isReady) {\n      return;\n    }\n\n    // cache reference to old regions\n    const oldRegions = Object.create(this.props.wavesurfer.regions.list);\n    let newRegionId;\n    let oldRegionId;\n\n    for (newRegionId in nextProps.regions) {\n      if ({}.hasOwnProperty.call(nextProps.regions, newRegionId)) {\n        const newRegion = nextProps.regions[newRegionId];\n\n        // remove from oldRegions\n        delete oldRegions[newRegionId];\n\n        // new regions\n        if (!this.props.wavesurfer.regions.list[newRegionId] && nextProps.wavesurfer && nextProps.wavesurfer.addRegion) {\n          this._hookUpRegionEvents(nextProps.wavesurfer.addRegion(newRegion));\n\n          // update regions\n        } else if (\n          oldRegions[newRegionId] &&\n          (oldRegions[newRegionId].start !== newRegion.start ||\n            oldRegions[newRegionId].end !== newRegion.end)\n        ) {\n          nextProps.wavesurfer.regions.list[newRegionId].update({\n            start: newRegion.start,\n            end: newRegion.end\n          });\n        }\n      }\n    }\n\n    // remove any old regions\n    for (oldRegionId in oldRegions) {\n      if ({}.hasOwnProperty.call(oldRegions, oldRegionId)) {\n        nextProps.wavesurfer.regions.list[oldRegionId].remove();\n      }\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    REGION_EVENTS.forEach(e => {\n      this.props.wavesurfer.un(e);\n    });\n  }\n\n  _init() {\n    const { wavesurfer, regions } = this.props;\n    let newRegionId;\n\n    REGIONS_EVENTS.forEach(e => {\n      const propCallback = this.props[`on${capitalizeFirstLetter(e)}`];\n      if (!propCallback) return;\n\n      wavesurfer.on(e, (...originalArgs) => {\n        propCallback({\n          wavesurfer,\n          originalArgs\n        });\n      });\n    });\n\n    // add regions and hook up callbacks to region objects\n    for (newRegionId in regions) {\n      if ({}.hasOwnProperty.call(regions, newRegionId) && wavesurfer && wavesurfer.addRegion) {\n        this._hookUpRegionEvents(wavesurfer.addRegion(regions[newRegionId]));\n      }\n    }\n  }\n\n  _hookUpRegionEvents(region) {\n    REGION_EVENTS.forEach(e => {\n      const propCallback = this.props[`onSingleRegion${capitalizeFirstLetter(e)}`];\n      const { wavesurfer } = this.props;\n\n      if (propCallback) {\n        region.on(e, (...originalArgs) => {\n          propCallback({\n            wavesurfer,\n            originalArgs,\n            region\n          });\n        });\n      }\n    });\n\n    region.on('remove', () => {\n      REGION_EVENTS.forEach(e => {\n        region.un(e);\n      });\n    });\n  }\n\n  render() {\n    return false;\n  }\n}\n\nRegions.propTypes = {\n  isReady: PropTypes.bool,\n  regions: PropTypes.object,\n  wavesurfer: PropTypes.object\n};\n\nRegions.defaultProps = {\n  regions: []\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Waveform from \"./components/Waveform\";\nimport { positiveIntegerProptype } from \"./utils/wavesurfer\";\n\nimport styles from \"./styles.scss\";\n\nexport default class ReactWaves extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      pos: this.props.pos,\n      duration: this.props.duration,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.audioFile && nextProps.audioFile) {\n      this.setState({\n        pos: nextProps.pos,\n        duration: nextProps.duration,\n      });\n    }\n  }\n\n  onPosChange = (e) => {\n    const pos = e.originalArgs && e.originalArgs[0];\n    const duration = e.wavesurfer && e.wavesurfer.getDuration();\n\n    if (this.props.onPosChange) {\n      this.props.onPosChange(pos, e.wavesurfer);\n    }\n\n    // We always update this.state.pos, because it is used for comparison in Waveform's AUDIO_PROCESS event handler\n    if (pos && pos !== this.state.pos) {\n      this.setState({\n        pos,\n        duration,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className={\n          styles.reactWaves +\n          (this.props.className ? \" \" + this.props.className : \"\")\n        }\n      >\n        <Waveform\n          {...this.props}\n          pos={this.state.pos}\n          duration={this.state.duration}\n          onPosChange={this.onPosChange}\n          playing={this.props.playing}\n        />\n      </div>\n    );\n  }\n}\n\nReactWaves.propTypes = {\n  playing: PropTypes.bool,\n  pos: PropTypes.number,\n  audioFile: (props, propName, componentName) => {\n    const prop = props[propName];\n    if (\n      prop &&\n      typeof prop !== \"string\" &&\n      !(prop instanceof window.Blob) &&\n      !(prop instanceof window.File)\n    ) {\n      return new Error(`Invalid ${propName} supplied to ${componentName}\n        expected either string or file/blob`);\n    }\n\n    return null;\n  },\n\n  mediaElt: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(window.HTMLElement),\n  ]),\n  audioPeaks: PropTypes.array,\n  volume: PropTypes.number,\n  zoom: PropTypes.number,\n  onPosChange: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.array]),\n  options: PropTypes.shape({\n    audioRate: PropTypes.number,\n    audioContext: PropTypes.object,\n    audioScriptProcessor: PropTypes.object,\n    autoCenter: PropTypes.bool,\n    backend: PropTypes.oneOf([\n      \"WebAudio\",\n      \"MediaElement\",\n      \"MediaElementWebAudio\",\n    ]),\n    barGap: positiveIntegerProptype,\n    barHeight: positiveIntegerProptype,\n    barRadius: positiveIntegerProptype,\n    barWidth: (props, propName, componentName) => {\n      const prop = props[propName];\n      if (prop !== undefined && typeof prop !== \"number\") {\n        return new Error(`Invalid ${propName} supplied to ${componentName}\n          expected either undefined or number`);\n      }\n\n      return null;\n    },\n    closeAudioContext: PropTypes.bool,\n    cursorColor: PropTypes.string,\n    cursorWidth: positiveIntegerProptype,\n    fillParent: PropTypes.bool,\n    forceDecode: PropTypes.bool,\n    height: positiveIntegerProptype,\n    hideScrollbar: PropTypes.bool,\n    interact: PropTypes.bool,\n    loopSelection: PropTypes.bool,\n    maxCanvasWidth: positiveIntegerProptype,\n    mediaControls: PropTypes.bool,\n    mediaType: PropTypes.oneOf([\"audio\", \"video\"]),\n    minPxPerSec: positiveIntegerProptype,\n    normalize: PropTypes.bool,\n    partialRender: PropTypes.bool,\n    pixelRatio: PropTypes.number,\n    progressColor: PropTypes.string,\n    removeMediaElementOnDestroy: PropTypes.bool,\n    renderer: PropTypes.object,\n    responsive: PropTypes.bool,\n    scrollParent: PropTypes.bool,\n    skipLength: PropTypes.number,\n    splitChannels: PropTypes.bool,\n    waveColor: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.instanceOf(window.CanvasGradient),\n    ]),\n    xhr: PropTypes.object,\n  }),\n  spectrogramOptions: PropTypes.object,\n  timelineOptions: PropTypes.object,\n};\n\nReactWaves.defaultProps = {\n  audioFile: \"\",\n  volume: 1,\n  zoom: 1,\n  options: {\n    barGap: 0,\n    barHeight: 2,\n    cursorWidth: 0,\n    height: 200,\n    hideScrollbar: true,\n    progressColor: \"#EC407A\",\n    responsive: true,\n    waveColor: \"#D1D6DA\",\n  },\n  pos: 0,\n  playing: false,\n};\n\nexport * from \"./components/Plugins/regions\";\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}